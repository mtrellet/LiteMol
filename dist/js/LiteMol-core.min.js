var __LiteMol_Core=function(){"use strict";var t,e=function(t){function e(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function r(t){L=t}function i(t){Z=t}function o(){return function(){process.nextTick(c)}}function s(){var t=0,e=new W(c),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function a(){var t=new MessageChannel;return t.port1.onmessage=c,function(){t.port2.postMessage(0)}}function u(){return function(){setTimeout(c,1)}}function c(){for(var t=0;t<X;t+=2){var e=K[t],n=K[t+1];e(n),K[t]=void 0,K[t+1]=void 0}X=0}function h(t,e){var n=this,r=new this.constructor(l);void 0===r[et]&&F(r);var i=n._state;if(i){var o=arguments[i-1];Z(function(){E(i,r,o,n._result)})}else I(n,r,t,e);return r}function f(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(l);return _(n,t),n}function l(){}function d(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function m(t){try{return t.then}catch(t){return ot.error=t,ot}}function v(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function y(t,e,n){Z(function(t){var r=!1,i=v(n,e,function(n){r||(r=!0,e!==n?_(t,n):x(t,n))},function(e){r||(r=!0,C(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,C(t,i))},t)}function g(t,e){e._state===rt?x(t,e._result):e._state===it?C(t,e._result):I(e,void 0,function(e){_(t,e)},function(e){C(t,e)})}function b(t,e,r){e.constructor===t.constructor&&r===$&&constructor.resolve===tt?g(t,e):r===ot?C(t,ot.error):void 0===r?x(t,e):n(r)?y(t,e,r):x(t,e)}function _(t,n){t===n?C(t,d()):e(n)?b(t,n,m(n)):x(t,n)}function w(t){t._onerror&&t._onerror(t._result),S(t)}function x(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&Z(S,t))}function C(t,e){t._state===nt&&(t._state=it,t._result=e,Z(w,t))}function I(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+rt]=n,i[o+it]=r,0===o&&t._state&&Z(S,t)}function S(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?E(n,r,i,o):i(o);t._subscribers.length=0}}function A(){this.error=null}function k(t,e){try{return t(e)}catch(t){return st.error=t,st}}function E(t,e,r,i){var o,s,a,u,c=n(r);if(c){if(o=k(r,i),o===st?(u=!0,s=o.error,o=null):a=!0,e===o)return void C(e,p())}else o=i,a=!0;e._state!==nt||(c&&a?_(e,o):u?C(e,s):t===rt?x(e,o):t===it&&C(e,o))}function P(t,e){try{e(function(e){_(t,e)},function(e){C(t,e)})}catch(e){C(t,e)}}function T(){return at++}function F(t){t[et]=at++,t._state=void 0,t._result=void 0,t._subscribers=[]}function D(t){return new lt(this,t).promise}function M(t){var e=this;return new e(Y(t)?function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function N(t){var e=this,n=new e(l);return C(n,t),n}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function O(t){this[et]=T(),this._result=this._state=void 0,this._subscribers=[],l!==t&&("function"!=typeof t&&R(),this instanceof O?P(this,t):q())}function z(t,e){this._instanceConstructor=t,this.promise=new t(l),this.promise[et]||F(this.promise),Array.isArray(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&x(this.promise,this._result))):C(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function B(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=ft)}var j;j=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var L,V,Y=j,X=0,Z=function(t,e){K[X]=t,K[X+1]=e,X+=2,2===X&&(L?L(c):V())},H="undefined"!=typeof window?window:void 0,G=H||{},W=G.MutationObserver||G.WebKitMutationObserver,Q="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,K=new Array(1e3);V=Q?o():W?s():J?a():u();var $=h,tt=f,et=Math.random().toString(36).substring(16),nt=void 0,rt=1,it=2,ot=new A,st=new A,at=0,ut=D,ct=M,ht=N,ft=O;O.all=ut,O.race=ct,O.resolve=tt,O.reject=ht,O._setScheduler=r,O._setAsap=i,O._asap=Z,O.prototype={constructor:O,then:$,catch:function(t){return this.then(null,t)}};var lt=z;z.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===nt&&n<t;n++)this._eachEntry(e[n],n)},z.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===tt){var i=m(t);if(i===$&&t._state!==nt)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===ft){var o=new n(l);b(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},z.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===nt&&(this._remaining--,t===it?C(r,n):this._result[e]=n),0===this._remaining&&x(r,this._result)},z.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){n._settledAt(rt,e,t)},function(t){n._settledAt(it,e,t)})};var dt=B,pt={Promise:ft,polyfill:dt};dt(),t.ES6Promise=pt};if("undefined"!=typeof window&&window&&window.Promise)t=window.Promise;else if("undefined"!=typeof global&&global&&global.Promise)t=global.Promise;else{var n={};e(n),t=n.ES6Promise.Promise}var r={};(function(t,e,n){function r(t){return t&&t.Object===Object?t:null}function i(t){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=t[r];return n}function o(t){return function(){try{return t.apply(this,arguments)}catch(t){return Ct.e=t,Ct}}}function s(t){throw t}function a(t,e){if(St&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(Pt)===-1){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+Pt+"\n");t.stack=u(i)}}function u(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;r<i;r++){var o=e[r];c(o)||h(o)||!o||n.push(o)}return n.join("\n")}function c(t){var e=l(t);if(!e)return!1;var n=e[0],r=e[1];return n===kt&&r>=Et&&r<=bi}function h(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function f(){if(St)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=l(e);if(!n)return;return kt=n[0],n[1]}}function l(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function d(t,e,r,i,o,s){var a=ve(t),u=a.length,c=ve(e),h=c.length;if(u!==h&&!i)return!1;for(var f,l=u;l--;)if(f=a[l],!(i?f in e:de.call(e,f)))return!1;for(var d=i;++l<u;){f=a[l];var p,m=t[f],v=e[f];if(!(p===n?r(m,v,i,o,s):p))return!1;d||(d="constructor"===f)}if(!d){var y=t.constructor,g=e.constructor;if(y!==g&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g))return!1}return!0}function p(t,e,n){switch(n){case Yt:case Xt:return+t===+e;case Zt:return t.name===e.name&&t.message===e.message;case Wt:return t!==+t?e!==+e:t===+e;case Jt:case $t:return t===e+""}return!1}function m(t){return!!t&&"object"==typeof t}function v(t){return"number"==typeof t&&t>-1&&t%1===0&&t<=me}function y(t){return m(t)&&v(t.length)&&!!fe[pe.call(t)]}function g(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function b(t,e,r,i,o,s){var a=-1,u=t.length,c=e.length;if(u!==c&&!(i&&c>u))return!1;for(;++a<u;){var h,f=t[a],l=e[a];if(h!==n){if(h)continue;return!1}if(i){if(!g(e,function(t){return f===t||r(f,t,i,o,s)}))return!1}else if(f!==l&&!r(f,l,i,o,s))return!1}return!0}function _(t,e,n,r,i,o){var s=be(t),a=be(e),u=Vt,c=Vt;s||(u=pe.call(t),u===Lt?u=Qt:u!==Qt&&(s=y(t))),a||(c=pe.call(e),c===Lt&&(c=Qt));var h=u===Qt&&!ge(t),f=c===Qt&&!ge(e),l=u===c;if(l&&!s&&!h)return p(t,e,u);if(!r){var m=h&&de.call(t,"__wrapped__"),v=f&&de.call(e,"__wrapped__");if(m||v)return n(m?t.value():t,v?e.value():e,r,i,o)}if(!l)return!1;i||(i=[]),o||(o=[]);for(var g=i.length;g--;)if(i[g]===t)return o[g]===e;i.push(t),o.push(e);var _=(s?b:d)(t,e,n,r,i,o);return i.pop(),o.pop(),_}function w(t,e,n,r,i){return t===e||(null==t||null==e||!ye(t)&&!m(e)?t!==t&&e!==e:_(t,e,w,n,r,i))}function x(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}function C(t,e){this.id=t,this.value=e}function I(t){this._s=t,this.isDisposed=!1}function S(t){this._s=t}function A(t){this._s=t,this._l=t.length,this._i=0}function k(t){this._a=t}function E(t){this._a=t,this._l=D(t),this._i=0}function P(t){return"number"==typeof t&&dt.isFinite(t)}function T(t){var e,r=t[qt];if(!r&&"string"==typeof t)return e=new S(t),e[qt]();if(!r&&t.length!==n)return e=new k(t),e[qt]();if(!r)throw new TypeError("Object is not iterable");return t[qt]()}function F(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}function D(t){var e=+t.length;return isNaN(e)?0:0!==e&&P(e)?(e=F(e)*Math.floor(Math.abs(e)),e<=0?0:e>Pn?Pn:e):e}function M(t,e){return ze(t)||(t=Ye),new Fn(e,t)}function N(t,e){this.observer=t,this.parent=e}function R(){return!1}function q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function R(){return!1}function q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function R(){return!1}function O(){return[]}function R(){return!1}function O(){return[]}function q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function z(t){return function(e){return t.subscribe(e)}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function B(t,e){return function(r){for(var i=r,o=0;o<e;o++){var s=i[t[o]];if("undefined"==typeof s)return n;i=s}return i}}function j(t,e,n,r){var i=new mi;return r.push(L(i,e,n)),t.apply(e,r),i.asObservable()}function L(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(xt(n)){if(i=It(n).apply(e,i),i===Ct)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function V(t,e,n,r){var i=new mi;return r.push(Y(i,e,n)),t.apply(e,r),i.asObservable()}function Y(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var i=arguments.length,o=[],s=1;s<i;s++)o[s-1]=arguments[s];if(xt(n)){var o=It(n).apply(e,o);if(o===Ct)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function X(t){return dt.StaticNodeList?t instanceof dt.StaticNodeList||t instanceof dt.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function Z(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function H(t,e,n){var r=new Ce,i=Object.prototype.toString.call(t);if(X(t)||"[object HTMLCollection]"===i)for(var o=0,s=t.length;o<s;o++)r.add(H(t.item(o),e,n));else t&&r.add(new Z(t,e,n));return r}function G(t,e){return new Qr(t,e)}function W(t,e,n){return new fi(function(r){var i=t,o=Oe(e);return n.scheduleRecursiveFuture(0,i,function(t,e){if(o>0){var s=n.now();i=new Date(i.getTime()+o),i.getTime()<=s&&(i=new Date(s+o))}r.onNext(t),e(t+1,new Date(i))})})}function Q(t,e,n){return t===e?new fi(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):In(function(){return W(new Date(n.now()+t),e,n)})}function J(t,e,n){return new fi(function(r){var i,o=!1,s=new De,a=null,u=[],c=!1;return i=t.materialize().timestamp(n).subscribe(function(t){var i,h;"E"===t.value.kind?(u=[],u.push(t),a=t.value.error,h=!c):(u.push({value:t.value,timestamp:t.timestamp+e}),h=!o,o=!0),h&&(null!==a?r.onError(a):(i=new Fe,s.setDisposable(i),i.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var i,s,h,f;if(null===a){c=!0;do h=null,u.length>0&&u[0].timestamp-n.now()<=0&&(h=u.shift().value),null!==h&&h.accept(r);while(null!==h);f=!1,s=0,u.length>0?(f=!0,s=Math.max(0,u[0].timestamp-n.now())):o=!1,i=a,c=!1,null!==i?r.onError(i):f&&e(null,s)}}))))}),new Me(i,s)},t)}function K(t,e,n){return In(function(){return J(t,e-n.now(),n)})}function $(t,e,n){var r,i;return xt(e)?i=e:(r=e,i=n),new fi(function(e){function n(){u.setDisposable(t.subscribe(function(t){var n=It(i)(t);if(n===Ct)return e.onError(n.e);var r=new Fe;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),o()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),o()}))},function(t){e.onError(t)},function(){a=!0,u.dispose(),o()}))}function o(){a&&0===s.length&&e.onCompleted()}var s=new Ce,a=!1,u=new De;return r?u.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new Me(u,s)},t)}function tt(t,e){return new fi(function(n){var r,i=!1,o=new De,s=0,a=t.subscribe(function(t){var a=It(e)(t);if(a===Ct)return n.onError(a.e);wt(a)&&(a=Zr(a)),i=!0,r=t,s++;var u=s,c=new Fe;o.setDisposable(c),c.setDisposable(a.subscribe(function(){i&&s===u&&n.onNext(r),i=!1,c.dispose()},function(t){n.onError(t)},function(){i&&s===u&&n.onNext(r),i=!1,c.dispose()}))},function(t){o.dispose(),n.onError(t),i=!1,s++},function(){o.dispose(),i&&n.onNext(r),n.onCompleted(),i=!1,s++});return new Me(a,o)},t)}function et(t,e,n,r){return xt(e)&&(r=n,n=e,e=Rn()),fn.isObservable(r)||(r=jn(new oi)),new fi(function(i){function o(t){function e(){return f=n===h}var n=h,o=new Fe;u.setDisposable(o),o.setDisposable(t.subscribe(function(){e()&&a.setDisposable(r.subscribe(i)),o.dispose()},function(t){e()&&i.onError(t)},function(){e()&&a.setDisposable(r.subscribe(i))}))}function s(){var t=!f;return t&&h++,t}var a=new De,u=new De,c=new Fe;a.setDisposable(c);var h=0,f=!1;return o(e),c.setDisposable(t.subscribe(function(t){if(s()){i.onNext(t);var e=It(n)(t);if(e===Ct)return i.onError(e.e);o(wt(e)?Zr(e):e)}},function(t){s()&&i.onError(t)},function(){s()&&i.onCompleted()})),new Me(a,u)},t)}function nt(t,e,n,r){return ze(n)&&(r=n,n=jn(new oi)),n instanceof Error&&(n=jn(n)),ze(r)||(r=We),fn.isObservable(n)||(n=jn(new oi)),new fi(function(i){function o(){var t=s;h.setDisposable(r.scheduleFuture(null,e,function(){c=s===t,c&&(wt(n)&&(n=Zr(n)),u.setDisposable(n.subscribe(i)))}))}var s=0,a=new Fe,u=new De,c=!1,h=new De;return u.setDisposable(a),o(),a.setDisposable(t.subscribe(function(t){c||(s++,i.onNext(t),o())},function(t){c||(s++,i.onError(t))},function(){c||(s++,i.onCompleted())})),new Me(u,h)},t)}function rt(t,e,n){return new fi(function(r){function i(t,e){if(c[e]=t,s[e]=!0,a||(a=s.every(vt))){if(o)return r.onError(o);var i=It(n).apply(null,c);if(i===Ct)return r.onError(i.e);r.onNext(i)}u&&c[1]&&r.onCompleted()}var o,s=[!1,!1],a=!1,u=!1,c=new Array(2);return new Me(t.subscribe(function(t){i(t,0)},function(t){c[1]?r.onError(t):o=t},function(){u=!0,c[1]&&r.onCompleted()}),e.subscribe(function(t){i(t,1)},function(t){r.onError(t)},function(){u=!0,i(!0,1)}))},t)}function it(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}var ot={function:!0,object:!0},st=ot[typeof exports]&&exports&&!exports.nodeType?exports:null,at=ot[typeof module]&&module&&!module.nodeType?module:null,ut=r(st&&at&&"object"==typeof global&&global),ct=r(ot[typeof self]&&self),ht=r(ot[typeof window]&&window),ft=at&&at.exports===st?st:null,lt=r(ot[typeof this]&&this),dt=ut||ht!==(lt&&lt.window)&&ht||ct||lt||Function("return this")(),pt={internals:{},config:{Promise:e},helpers:{}},mt=pt.helpers.noop=function(){},vt=pt.helpers.identity=function(t){return t},yt=pt.helpers.defaultNow=Date.now,gt=pt.helpers.defaultComparer=function(t,e){return _e(t,e)},bt=pt.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},_t=(pt.helpers.defaultKeySerializer=function(t){return t.toString()},pt.helpers.defaultError=function(t){throw t}),wt=pt.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},xt=pt.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),Ct={e:{}},It=pt.internals.tryCatch=function(t){if(!xt(t))throw new TypeError("fn must be a function");return o(t)};pt.config.longStackSupport=!1;var St=!1,At=It(function(){throw new Error})();St=!!At.e&&!!At.e.stack;var kt,Et=f(),Pt="From previous event:",Tt=pt.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};Tt.prototype=Object.create(Error.prototype),Tt.prototype.name="EmptyError";var Ft=pt.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};Ft.prototype=Object.create(Error.prototype),Ft.prototype.name="ObjectDisposedError";var Dt=pt.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};Dt.prototype=Object.create(Error.prototype),Dt.prototype.name="ArgumentOutOfRangeError";var Mt=pt.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};Mt.prototype=Object.create(Error.prototype),Mt.prototype.name="NotSupportedError";var Nt=pt.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};Nt.prototype=Object.create(Error.prototype),Nt.prototype.name="NotImplementedError";var Rt=pt.helpers.notImplemented=function(){throw new Nt},qt=(pt.helpers.notSupported=function(){throw new Mt},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");dt.Set&&"function"==typeof(new dt.Set)["@@iterator"]&&(qt="@@iterator");var Ot=pt.doneEnumerator={done:!0,value:n},zt=pt.helpers.isIterable=function(t){return t&&t[qt]!==n},Ut=pt.helpers.isArrayLike=function(t){return t&&t.length!==n};pt.helpers.iterator=qt;var Bt=pt.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},jt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Lt=(jt.length,"[object Arguments]"),Vt="[object Array]",Yt="[object Boolean]",Xt="[object Date]",Zt="[object Error]",Ht="[object Function]",Gt="[object Map]",Wt="[object Number]",Qt="[object Object]",Jt="[object RegExp]",Kt="[object Set]",$t="[object String]",te="[object WeakMap]",ee="[object ArrayBuffer]",ne="[object Float32Array]",re="[object Float64Array]",ie="[object Int8Array]",oe="[object Int16Array]",se="[object Int32Array]",ae="[object Uint8Array]",ue="[object Uint8ClampedArray]",ce="[object Uint16Array]",he="[object Uint32Array]",fe={};fe[ne]=fe[re]=fe[ie]=fe[oe]=fe[se]=fe[ae]=fe[ue]=fe[ce]=fe[he]=!0,fe[Lt]=fe[Vt]=fe[ee]=fe[Yt]=fe[Xt]=fe[Zt]=fe[Ht]=fe[Gt]=fe[Wt]=fe[Qt]=fe[Jt]=fe[Kt]=fe[$t]=fe[te]=!1;var le=Object.prototype,de=le.hasOwnProperty,pe=le.toString,me=Math.pow(2,53)-1,ve=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,a=[];for(o in i)t.call(i,o)&&a.push(o);if(e)for(s=0;s<r;s++)t.call(i,n[s])&&a.push(n[s]);return a}}(),ye=pt.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},ge=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),be=Array.isArray||function(t){return m(t)&&v(t.length)&&pe.call(t)===Vt},_e=pt.internals.isEqual=function(t,e){return w(t,e)},we=({}.hasOwnProperty,Array.prototype.slice,pt.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),xe=pt.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var i=0,o=e.length;i<o;i++){var s=e[i];for(var a in s)t[a]=s[a]}},Ce=(pt.internals.addRef=function(t,e){return new fi(function(n){return new Me(e.getDisposable(),t.subscribe(n))})},pt.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length}),Ie=Ce.prototype;Ie.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},Ie.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);n!==-1&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},Ie.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}};var Se=pt.Disposable=function(t){this.isDisposed=!1,this.action=t||mt};Se.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Ae=Se.create=function(t){return new Se(t)},ke=Se.empty={dispose:mt},Ee=Se.isDisposable=function(t){return t&&xt(t.dispose)},Pe=Se.checkDisposed=function(t){if(t.isDisposed)throw new Ft},Te=Se._fixup=function(t){return Ee(t)?t:ke},Fe=pt.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Fe.prototype.getDisposable=function(){return this.current},Fe.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},Fe.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var De=pt.SerialDisposable=function(){this.isDisposed=!1,this.current=null};De.prototype.getDisposable=function(){return this.current},De.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},De.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Me=pt.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Me.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var Ne=pt.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};Ne.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}};var Re=(pt.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?ke:new t(this)},e}(),pt.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||bt,this.disposable=new Fe});Re.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Re.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},Re.prototype.isCancelled=function(){return this.disposable.isDisposed},Re.prototype.invokeCore=function(){return Te(this.action(this.scheduler,this.state))};var qe=pt.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new Nt},e.scheduleFuture=function(e,n,r){var i=n;return i instanceof Date&&(i-=this.now()),i=t.normalize(i),0===i?this.schedule(e,r):this._scheduleFuture(e,i,r)},e._scheduleFuture=function(t,e,n){throw new Nt},t.now=yt,t.prototype.now=yt,t.normalize=function(t){return t<0&&(t=0),t},t}(),Oe=qe.normalize,ze=qe.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?o.remove(u):a=!0,i(e,n),ke}var s=!1,a=!1,u=t.schedule(e,r);a||(o.add(u),s=!0)}var r=e[0],i=e[1],o=new Ce;return i(r,n),o}function n(t,e){function n(e,r){function s(t,e){return a?o.remove(c):u=!0,i(e,n),ke}var a=!1,u=!1,c=t.scheduleFuture(e,r,s);u||(o.add(c),a=!0)}var r=e[0],i=e[1],o=new Ce;return i(r,n),o}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(qe.prototype),function(t){t.schedulePeriodic=function(t,e,n){if("undefined"==typeof dt.setInterval)throw new Mt;e=Oe(e);var r=t,i=dt.setInterval(function(){r=n(r)},e);return Ae(function(){dt.clearInterval(i)})}}(qe.prototype);var Ue,Be,je=function(t){function e(){t.call(this)}return we(e,t),e.prototype.schedule=function(t,e){return Te(e(this,t))},e}(qe),Le=qe.immediate=new je,Ve=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return we(n,t),n.prototype.schedule=function(t,n){var i=new Re(this,t,n,this.now());if(r)r.enqueue(i);else{r=new Qe(4),r.enqueue(i);var o=It(e)();r=null,o===Ct&&s(o.e)}return i.disposable},n.prototype.scheduleRequired=function(){return!r},n}(qe),Ye=qe.currentThread=new Ve,Xe=(pt.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=It(t._action)(t._state);r===Ct&&(t._cancel.dispose(),s(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new Fe;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),function(){var t,e=mt;if(dt.setTimeout)t=dt.setTimeout,e=dt.clearTimeout;else{if(!dt.WScript)throw new Mt;t=function(t,e){dt.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}()),Ze=Xe.setTimeout,He=Xe.clearTimeout;!function(){function t(e){if(i)Ze(function(){t(e)},0);else{var n=r[e];if(n){i=!0;var o=It(n)();Be(e),i=!1,o===Ct&&s(o.e)}}}function e(){if(!dt.postMessage||dt.importScripts)return!1;var t=!1,e=dt.onmessage;return dt.onmessage=function(){t=!0},dt.postMessage("","*"),dt.onmessage=e,t}var n=1,r={},i=!1;Be=function(t){delete r[t]};var o=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),a="function"==typeof(a=ut&&ft&&ut.setImmediate)&&!o.test(a)&&a;if(xt(a))Ue=function(e){var i=n++;return r[i]=e,a(function(){t(i)}),i};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))Ue=function(e){var i=n++;return r[i]=e,process.nextTick(function(){t(i)}),i};else if(e()){var u="ms.rx.schedule"+Math.random(),c=function(e){"string"==typeof e.data&&e.data.substring(0,u.length)===u&&t(e.data.substring(u.length))};dt.addEventListener("message",c,!1),Ue=function(t){var e=n++;return r[e]=t,dt.postMessage(u+e,"*"),e}}else if(dt.MessageChannel){var h=new dt.MessageChannel;h.port1.onmessage=function(e){t(e.data)},Ue=function(t){var e=n++;return r[e]=t,h.port2.postMessage(e),e}}else Ue="document"in dt&&"onreadystatechange"in dt.document.createElement("script")?function(e){var i=dt.document.createElement("script"),o=n++;return r[o]=e,i.onreadystatechange=function(){t(o),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},dt.document.documentElement.appendChild(i),o}:function(e){var i=n++;return r[i]=e,Ze(function(){t(i)},0),i}}();var Ge=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(Se._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function i(t){this._id=t,this.isDisposed=!1}function o(t,e,n){return function(){e(t,n)}}return we(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Be(this._id))},i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,He(this._id))},e.prototype.schedule=function(t,e){var i=new Fe,o=Ue(n(i,e,this,t));return new Me(i,new r(o))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var o=new Fe,s=Ze(n(o,r,this,t),e);return new Me(o,new i(s))},e.prototype.scheduleLongRunning=function(t,e){var n=Ae(mt);return Ue(o(t,e,n)),n},e}(qe),We=qe.default=qe.async=new Ge;C.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Qe=pt.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},Je=Qe.prototype;Je.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},Je.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},Je.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},Je.peek=function(){return this.items[0].value},Je.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=n,this.heapify()},Je.dequeue=function(){var t=this.peek();return this.removeAt(0),t},Je.enqueue=function(t){var e=this.length++;this.items[e]=new C(Qe.count++,t),this.percolate(e)},Je.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Qe.count=0;var Ke,$e=pt.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new Nt},t.prototype._acceptObserver=function(t,e,n){throw new Nt},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return ze(t)||(t=Le),new fi(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),tn=function(t){function e(t){this.value=t,this.kind="N"}return we(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}($e),en=function(t){function e(t){this.error=t,this.kind="E"}return we(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}($e),nn=function(t){function e(){this.kind="C"}return we(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}($e),rn=$e.createOnNext=function(t){return new tn(t)},on=$e.createOnError=function(t){return new en(t)},sn=$e.createOnCompleted=function(){return new nn;
},an=pt.Observer=function(){},un=an.create=function(t,e,n){return t||(t=mt),e||(e=_t),n||(n=mt),new hn(t,e,n)},cn=pt.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return we(e,t),e.prototype.next=Rt,e.prototype.error=Rt,e.prototype.completed=Rt,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(an),hn=pt.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return we(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(cn),fn=pt.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){a(e,t),r.call(n,e)},e.call(t,n)}}function e(){if(pt.config.longStackSupport&&St){var e=this._subscribe,n=It(s)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return Ke=e.prototype,e.isObservable=function(t){return t&&xt(t.subscribe)},Ke.subscribe=Ke.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:un(t,e,n))},Ke.subscribeOnNext=function(t,e){return this._subscribe(un("undefined"!=typeof e?function(n){t.call(e,n)}:t))},Ke.subscribeOnError=function(t,e){return this._subscribe(un(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},Ke.subscribeOnCompleted=function(t,e){return this._subscribe(un(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),ln=pt.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new De}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function i(t){return function(){t.onCompleted()}}function o(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=It(n)();return r===Ct?(t.queue=[],t.hasFaulted=!0,s(r.e)):void e(t)}return we(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(i(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,o))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(cn),dn=pt.ObservableBase=function(t){function e(t){return t&&xt(t.dispose)?t:xt(t)?Ae(t):ke}function n(t,n){var r=n[0],i=n[1],o=It(i.subscribeCore).call(i,r);o!==Ct||r.fail(Ct.e)||s(Ct.e),r.setDisposable(e(o))}function r(){t.call(this)}return we(r,t),r.prototype._subscribe=function(t){var e=new li(t),r=[e,this];return Ye.scheduleRequired()?Ye.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=Rt,r}(fn),pn=pt.FlatMapObservable=function(t){function e(e,n,r,i){this.resultSelector=xt(r)?r:null,this.selector=Bt(xt(n)?n:function(){return n},i,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},we(n,cn),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=It(this.selector)(t,e,this.source);return n===Ct?this.o.onError(n.e):(wt(n)&&(n=Zr(n)),(Ut(n)||zt(n))&&(n=fn.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(dn),mn=pt.internals.Enumerable=function(){};I.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var vn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=It(t.e.next).call(t.e);if(n===Ct)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var i=n.value;wt(i)&&(i=Zr(i));var o=new Fe;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new De,r={isDisposed:!1,o:t,subscription:e,e:this.sources[qt]()},i=Ye.scheduleRecursive(r,n);return new Ne([e,i,new I(r)])},we(r,cn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(dn);mn.prototype.concat=function(){return new vn(this)};var yn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=It(t.e.next).call(t.e);if(n===Ct)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var i=n.value;wt(i)&&(i=Zr(i));var o=new Fe;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new De,r={isDisposed:!1,e:this.sources[qt](),subscription:e,lastError:null,o:t},i=Ye.scheduleRecursive(r,n);return new Ne([e,i,new I(r)])},we(r,cn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(dn);mn.prototype.catchError=function(){return new yn(this)};var gn=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return we(e,t),e.prototype[qt]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?Ot:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(mn),bn=mn.repeat=function(t,e){return new gn(t,e)},_n=function(t){function e(t,e,n){this.s=t,this.fn=e?Bt(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return we(e,t),e.prototype[qt]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:Ot},e}(mn),wn=mn.of=function(t,e,n){return new _n(t,e,n)},xn=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},we(n,cn),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(dn);Ke.toArray=function(){return new xn(this)},fn.create=function(t,e){return new fi(t,e)};var Cn=function(t){function e(e){this._f=e,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=It(this._f)();return e===Ct?jn(e.e).subscribe(t):(wt(e)&&(e=Zr(e)),e.subscribe(t))},e}(dn),In=fn.defer=function(t){return new Cn(t)},Sn=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),ke}return we(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this.scheduler);return e.run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Le?r(null,t):this.scheduler.schedule(t,r)},e}(dn),An=new Sn(Le),kn=fn.empty=function(t){return ze(t)||(t=Le),t===Le?An:new Sn(t)},En=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,i){var o=It(e.next).call(e);if(o===Ct)return t.onError(o.e);if(o.done)return t.onCompleted();var s=o.value;return xt(n)&&(s=It(n)(s,r),s===Ct)?t.onError(s.e):(t.onNext(s),void i(r+1))}}return we(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=T(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(dn),Pn=Math.pow(2,53)-1;S.prototype[qt]=function(){return new A(this._s)},A.prototype[qt]=function(){return this},A.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Ot},k.prototype[qt]=function(){return new E(this._a)},E.prototype[qt]=function(){return this},E.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Ot};var Tn=fn.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!xt(e))throw new Error("mapFn when provided must be a function");if(e)var i=Bt(e,n,2);return ze(r)||(r=Ye),new En(t,i,r)},Fn=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,i){r<n?(t.onNext(e[r]),i(r+1)):t.onCompleted()}}return we(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(dn),Dn=fn.fromArray=function(t,e){return ze(e)||(e=Ye),new Fn(t,e)},Mn=function(t){function e(){t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return ke},e}(dn),Nn=new Mn,Rn=fn.never=function(){return Nn};fn.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Fn(e,Ye)},fn.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new Fn(n,t)};var qn=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,i){if(r<n.length){var o=n[r];t.onNext([o,e[o]]),i(r+1)}else t.onCompleted()}}return we(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(dn);fn.pairs=function(t,e){return e||(e=Ye),new qn(t,e)};var On=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,i){r<e?(n.onNext(t+r),i(r+1)):n.onCompleted()}}return we(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(dn);fn.range=function(t,e,n){return ze(n)||(n=Ye),new On(t,e,n)};var zn=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new N(t,this);return e.run()},e}(dn);N.prototype.run=function(){function t(t,r){return(t===-1||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},fn.repeat=function(t,e,n){return ze(n)||(n=Ye),new zn(t,e,n)};var Un=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),ke}return we(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Le?n(null,e):this._scheduler.schedule(e,n)},e}(dn),Bn=(fn.return=fn.just=function(t,e){return ze(e)||(e=Le),new Un(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onError(n),ke}return we(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===Le?n(null,e):this._scheduler.schedule(e,n)},e}(dn)),jn=fn.throw=function(t,e){return ze(e)||(e=Le),new Bn(t,e)},Ln=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new Fe,n=new De;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Vn(t,n,this._fn))),n},e}(dn),Vn=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return we(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=It(this._fn)(t);if(e===Ct)return this._o.onError(e.e);wt(e)&&(e=Zr(e));var n=new Fe;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(cn);Ke.catch=function(t){return xt(t)?new Ln(this,t):Yn([this,t])};var Yn=fn.catch=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return wn(t).catchError()};Ke.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Hn.apply(this,e)};var Xn=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:x(e,R),hasValueAll:!1,isDone:x(e,R),values:new Array(e)},i=0;i<e;i++){var o=this._params[i],s=new Fe;n[i]=s,wt(o)&&(o=Zr(o)),s.setDisposable(o.subscribe(new Zn(t,i,this._cb,r)))}return new Ne(n)},e}(dn),Zn=function(t){function e(e,n,r,i){this._o=e,this._i=n,this._cb=r,this._state=i,t.call(this)}function n(t){return function(e,n){return n!==t}}return we(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(vt))){var e=It(this._cb).apply(null,this._state.values);if(e===Ct)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(vt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(vt)&&this._o.onCompleted()},e}(cn),Hn=fn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=xt(e[t-1])?e.pop():q;return Array.isArray(e[0])&&(e=e[0]),new Xn(e,r)};Ke.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),Qn.apply(null,t)};var Gn=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return we(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(cn),Wn=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];wt(n)&&(n=Zr(n));var r=new Fe;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Gn(t,e)))}}return we(e,t),e.prototype.subscribeCore=function(t){var e=new De,r=Ae(mt),i={o:t,i:0,subscription:e,disposable:r,sources:this._sources},o=Le.scheduleRecursive(i,n);return new Ne([e,r,o])},e}(dn),Qn=fn.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e]}return new Wn(t)};Ke.concatAll=function(){return this.merge(1)};var Jn=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new Ce;return e.add(this.source.subscribe(new Kn(t,this.maxConcurrent,e))),e},e}(dn),Kn=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return we(e,t),e.prototype.handleSubscribe=function(t){var e=new Fe;this.g.add(e),wt(t)&&(t=Zr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},we(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(cn);Ke.merge=function(t){return"number"!=typeof t?$n(this,t):new Jn(this,t)};var $n=fn.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(ze(arguments[0]))for(t=arguments[0],e=1;e<r;e++)n.push(arguments[e]);else for(t=Le,e=0;e<r;e++)n.push(arguments[e]);else for(t=Le,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),M(t,n).mergeAll()},tr=pt.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};tr.prototype=Object.create(Error.prototype),tr.prototype.name="CompositeError";var er=function(t){function e(e){this.source=e,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new Ce,n=new Fe,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new nr(e,r))),e},e}(dn),nr=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new tr(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return we(e,t),e.prototype.next=function(t){var e=new Fe;this._group.add(e),wt(t)&&(t=Zr(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},we(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(cn);fn.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}var r=M(null,t);return new er(r)};var rr=function(t){function e(e){this.source=e,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new Ce,n=new Fe;return e.add(n),n.setDisposable(this.source.subscribe(new ir(t,e))),e},e}(dn),ir=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return we(e,t),e.prototype.next=function(t){var e=new Fe;this.g.add(e),wt(t)&&(t=Zr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},we(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(cn);Ke.mergeAll=function(){return new rr(this)};var or=function(t){function e(e,n){this._s=e,this._o=wt(n)?Zr(n):n,this._open=!1,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new Fe;e.setDisposable(this._s.subscribe(new sr(t,this))),wt(this._o)&&(this._o=Zr(this._o));var n=new Fe;return n.setDisposable(this._o.subscribe(new ar(t,this,n))),new Me(e,n)},e}(dn),sr=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return we(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(cn),ar=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return we(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(cn);Ke.skipUntil=function(t){return new or(this,t)};var ur=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,cn.call(this)}function r(t,e){this.parent=t,this.id=e,cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new De,r=this.source.subscribe(new n(t,e));return new Me(r,e)},we(n,cn),n.prototype.next=function(t){var e=new Fe,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),wt(t)&&(t=Zr(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},we(r,cn),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(dn);Ke.switch=Ke.switchLatest=function(){return new ur(this)};var cr=function(t){function e(e,n){this.source=e,this.other=wt(n)?Zr(n):n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return new Me(this.source.subscribe(t),this.other.subscribe(new hr(t)))},e}(dn),hr=function(t){function e(e){this._o=e,t.call(this)}return we(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=mt,e}(cn);Ke.takeUntil=function(t){return new cr(this,t)};var fr=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:x(e,R),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;o<r;o++){var s=this._ss[o],a=new Fe;wt(s)&&(s=Zr(s)),a.setDisposable(s.subscribe(new lr(t,o,n))),i[o]=a}var u=new Fe;return u.setDisposable(this._s.subscribe(new dr(t,this._cb,n))),i[r]=u,new Ne(i)},e}(dn),lr=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return we(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(vt)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=mt,e}(cn),dr=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return we(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=It(this._cb).apply(null,e);return n===Ct?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(cn);Ke.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=xt(e[t-1])?e.pop():q;return Array.isArray(e[0])&&(e=e[0]),new fr(this,e,r)};var pr=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=x(e,R),i=x(e,O),o=0;o<e;o++){var s=this._s[o],a=new Fe;n[o]=a,wt(s)&&(s=Zr(s)),a.setDisposable(s.subscribe(new mr(t,o,this,i,r)))}return new Ne(n)},e}(dn),mr=function(t){function e(e,n,r,i,o){this._o=e,this._i=n,this._p=r,this._q=i,this._d=o,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(e,n){return n!==t}}return we(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),o=It(this._p._cb).apply(null,e);if(o===Ct)return this._o.onError(o.e);this._o.onNext(o)}else this._d.filter(i(this._i)).every(vt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(vt)&&this._o.onCompleted()},e}(cn);Ke.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=xt(e[t-1])?e.pop():q;Array.isArray(e[0])&&(e=e[0]);var i=this;return e.unshift(i),new pr(e,r)},fn.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=xt(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var vr=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),i={q:x(n,O),done:x(n,R),cb:this._cb,o:t},o=0;o<n;o++)!function(t){var n=e[t],o=new Fe;(Ut(n)||zt(n))&&(n=Tn(n)),r[t]=o,o.setDisposable(n.subscribe(new yr(i,t)))}(o);return new Ne(r)},e}(dn),yr=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(e,n){return n!==t}}return we(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),o=It(this._s.cb).apply(null,e);if(o===Ct)return this._s.o.onError(o.e);this._s.o.onNext(o)}else this._s.done.filter(i(this._i)).every(vt)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(vt)&&this._s.o.onCompleted()},e}(cn);Ke.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=xt(e[t-1])?e.pop():q,i=this;return e.unshift(i),new vr(e,r)},Ke.asObservable=function(){return new fi(z(this),this)};var gr=function(t){function e(e){this.source=e,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new br(t))},e}(dn),br=function(t){function e(e){this._o=e,t.call(this)}return we(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(cn);Ke.dematerialize=function(){return new gr(this)};var _r=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new wr(t,this.keyFn,this.comparer))},e}(dn),wr=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return we(e,t),e.prototype.next=function(t){var e,n=t;return xt(this.keyFn)&&(n=It(this.keyFn)(t),n===Ct)?this.o.onError(n.e):this.hasCurrentKey&&(e=It(this.comparer)(this.currentKey,n),e===Ct)?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(cn);Ke.distinctUntilChanged=function(t,e){return e||(e=gt),new _r(this,t,e)};var xr=function(t){function e(e,n,r,i){this.source=e,this._oN=n,this._oE=r,this._oC=i,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||xt(e._oN)?un(e._oN||mt,e._oE||mt,e._oC||mt):e._oN,this.isStopped=!1,cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},we(n,cn),n.prototype.next=function(t){var e=It(this.t.onNext).call(this.t,t);e===Ct&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=It(this.t.onError).call(this.t,t);return e===Ct?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=It(this.t.onCompleted).call(this.t);return t===Ct?this.o.onError(t.e):void this.o.onCompleted()},e}(dn);Ke.do=Ke.tap=Ke.doAction=function(t,e,n){return new xr(this,t,e,n)},Ke.doOnNext=Ke.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},Ke.doOnError=Ke.tapOnError=function(t,e){return this.tap(mt,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},Ke.doOnCompleted=Ke.tapOnCompleted=function(t,e){return this.tap(mt,null,"undefined"!=typeof e?function(){t.call(e)}:t)};var Cr=function(t){function e(e,n,r){this.source=e,this._fn=Bt(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return we(e,t),e.prototype.subscribeCore=function(t){var e=It(this.source.subscribe).call(this.source,t);return e===Ct&&(this._fn(),s(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=It(this._s.dispose).call(this._s);this._fn(),t===Ct&&s(t.e)}},e}(dn);Ke.finally=function(t,e){return new Cr(this,t,e)};var Ir=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=mt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(dn);Ke.ignoreElements=function(){return new Ir(this)};var Sr=function(t){function e(e,n){this.source=e,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ar(t))},e}(dn),Ar=function(t){function e(e){this._o=e,t.call(this)}return we(e,t),e.prototype.next=function(t){this._o.onNext(rn(t))},e.prototype.error=function(t){this._o.onNext(on(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(sn()),this._o.onCompleted()},e}(cn);Ke.materialize=function(){return new Sr(this)},Ke.repeat=function(t){return bn(this,t).concat()},Ke.retry=function(t){return bn(this,t).catchError()};var kr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return we(n,t),n.prototype.subscribeCore=function(t){var n,r=new pi,i=new pi,o=this._notifier(r),s=o.subscribe(i),a=this.source["@@iterator"](),u={isDisposed:!1},c=new De,h=Ye.scheduleRecursive(null,function(e,o){if(!u.isDisposed){var s=a.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var h=s.value;wt(h)&&(h=Zr(h));var f=new Fe,l=new Fe;c.setDisposable(new Me(l,f)),f.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){l.setDisposable(i.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),f.dispose()},function(){t.onCompleted()}))}});return new Ne([s,c,h,e(u)])},n}(dn);Ke.retryWhen=function(t){return new kr(U(this),t)};var Er=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return we(n,t),n.prototype.subscribeCore=function(t){var n,r=new pi,i=new pi,o=this._notifier(r),s=o.subscribe(i),a=this.source["@@iterator"](),u={isDisposed:!1},c=new De,h=Ye.scheduleRecursive(null,function(e,o){if(!u.isDisposed){var s=a.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var h=s.value;wt(h)&&(h=Zr(h));var f=new Fe,l=new Fe;c.setDisposable(new Me(l,f)),f.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){l.setDisposable(i.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),f.dispose()}))}});return new Ne([s,c,h,e(u)])},n}(dn);Ke.repeatWhen=function(t){return new Er(U(this),t)};var Pr=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Tr(t,this))},e}(dn),Tr=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return we(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=It(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?It(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),
this._a===Ct?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(cn);Ke.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Pr(this,n,e,t)};var Fr=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Dr(t,this._c))},e}(dn),Dr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return we(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(cn);Ke.skipLast=function(t){if(t<0)throw new Dt;return new Fr(this,t)},Ke.startWith=function(){var t,e=0;arguments.length&&ze(arguments[0])?(t=arguments[0],e=1):t=Le;for(var n=[],r=e,i=arguments.length;r<i;r++)n.push(arguments[r]);return Qn.apply(null,[Dn(n,t),this])};var Mr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return we(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(cn);Ke.takeLast=function(t){if(t<0)throw new Dt;var e=this;return new fi(function(n){return e.subscribe(new Mr(n,t))},e)},Ke.flatMapConcat=Ke.concatMap=function(t,e,n){return new pn(this,t,e,n).merge(1)};var Nr=function(t){function e(e,n,r){this.source=e,this.selector=Bt(n,r,3),t.call(this)}function n(t,e){return function(n,r,i){return t.call(this,e.selector(n,r,i),r,i)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,cn.call(this)}return we(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},we(r,cn),r.prototype.next=function(t){var e=It(this.selector)(t,this.i++,this.source);return e===Ct?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(dn);Ke.map=Ke.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Nr?this.internalMap(n,e):new Nr(this,n,e)},Ke.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;n<t;n++)e[n]=arguments[n];return this.map(B(e,t))},Ke.flatMap=Ke.selectMany=Ke.mergeMap=function(t,e,n){return new pn(this,t,e,n).mergeAll()},Ke.flatMapLatest=Ke.switchMap=function(t,e,n){return new pn(this,t,e,n).switchLatest()};var Rr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},we(n,cn),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(dn);Ke.skip=function(t){if(t<0)throw new Dt;return new Rr(this,t)};var qr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Or(t,this))},e}(dn),Or=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return we(e,t),e.prototype.next=function(t){if(!this._r){var e=It(this._p._fn)(t,this._i++,this._p);if(e===Ct)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(cn);Ke.skipWhile=function(t,e){var n=Bt(t,e,3);return new qr(this,n)};var zr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},we(n,cn),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(dn);Ke.take=function(t,e){if(t<0)throw new Dt;return 0===t?kn(e):new zr(this,t)};var Ur=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Br(t,this))},e}(dn),Br=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return we(e,t),e.prototype.next=function(t){return this._r&&(this._r=It(this._p._fn)(t,this._i++,this._p),this._r===Ct)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(cn);Ke.takeWhile=function(t,e){var n=Bt(t,e,3);return new Ur(this,n)};var jr=function(t){function e(e,n,r){this.source=e,this.predicate=Bt(n,r,3),t.call(this)}function n(t,e){return function(n,r,i){return e.predicate(n,r,i)&&t.call(this,n,r,i)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,cn.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},we(r,cn),r.prototype.next=function(t){var e=It(this.predicate)(t,this.i++,this.source);return e===Ct?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(dn);Ke.filter=Ke.where=function(t,e){return this instanceof jr?this.internalFilter(t,e):new jr(this,t,e)},fn.fromCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return j(t,e,n,i)}},fn.fromNodeCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return V(t,e,n,i)}},Z.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},pt.config.useNativeEvents=!1;var Lr=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return xt(e)&&(n=It(e).apply(null,arguments),n===Ct)?t.onError(n.e):void t.onNext(n)}}return we(e,t),e.prototype.subscribeCore=function(t){return H(this._el,this._n,n(t,this._fn))},e}(dn);fn.fromEvent=function(t,e,n){return t.addListener?Yr(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):pt.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Lr(t,e,n).publish().refCount():Yr(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var Vr=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return xt(e)&&(n=It(e).apply(null,arguments),n===Ct)?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return we(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),i=this._add(e);return new r(this._del,e,i)},r.prototype.dispose=function(){this.isDisposed||(xt(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(dn),Yr=fn.fromEventPattern=function(t,e,n){return new Vr(t,e,n).publish().refCount()},Xr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new Fe,i=this,o=this._p;return xt(o)&&(o=It(o)(),o===Ct)?(t.onError(o.e),e):(o.then(function(r){e.setDisposable(i._s.schedule([t,r],n))},function(n){e.setDisposable(i._s.schedule([t,n],r))}),e)},e}(dn),Zr=fn.fromPromise=function(t,e){return e||(e=We),new Xr(t,e)};Ke.toPromise=function(t){if(t||(t=pt.config.Promise),!t)throw new Mt("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})},fn.startAsync=function(t){var e=It(t)();return e===Ct?jn(e.e):Zr(e)};var Hr=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new Me(this._fn2(e).subscribe(t),e.connect())},e}(dn);Ke.multicast=function(t,e){return xt(t)?new Hr(this,t,e):new Wr(this,t)},Ke.publish=function(t){return t&&xt(t)?this.multicast(function(){return new pi},t):this.multicast(new pi)},Ke.share=function(){return this.publish().refCount()},Ke.publishLast=function(t){return t&&xt(t)?this.multicast(function(){return new mi},t):this.multicast(new mi)},Ke.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new yi(e)},t):this.multicast(new yi(t))},Ke.shareValue=function(t){return this.publishValue(t).refCount()},Ke.replay=function(t,e,n,r){return t&&xt(t)?this.multicast(function(){return new gi(e,n,r)},t):this.multicast(new gi(e,n,r))},Ke.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Gr=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return we(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},e}(dn),Wr=pt.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return we(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return ke;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new Gr(this)},e}(fn),Qr=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return we(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(dn),Jr=fn.interval=function(t,e){return Q(t,t,ze(e)?e:We)};fn.timer=function(t,e,r){var i;return ze(r)||(r=We),null!=e&&"number"==typeof e?i=e:ze(e)&&(r=e),(t instanceof Date||"number"==typeof t)&&i===n?G(t,r):t instanceof Date&&i!==n?W(t,e,r):Q(t,i,r)};Ke.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return ze(n)||(n=We),e instanceof Date?K(this,e,n):J(this,e,n)}if(fn.isObservable(t)||xt(t))return $(this,t,arguments[1]);throw new Error("Invalid arguments")};var Kr=function(t){function e(e,n,r){ze(r)||(r=We),this.source=e,this._dt=n,this._s=r,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e=new De;return new Me(this.source.subscribe(new $r(t,this._dt,this._s,e)),e)},e}(dn),$r=function(t){function e(e,n,r,i){this._o=e,this._d=n,this._scheduler=r,this._c=i,this._v=null,this._hv=!1,this._id=0,t.call(this)}return we(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new Fe;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(cn);Ke.debounce=function(){if(xt(arguments[0]))return tt(this,arguments[0]);if("number"==typeof arguments[0])return new Kr(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")};var ti=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ei(t,this._s))},e}(dn),ei=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return we(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(cn);Ke.timestamp=function(t){return ze(t)||(t=We),new ti(this,t)};var ni=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return we(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new Fe};return e.sourceSubscription.setDisposable(this.source.subscribe(new ii(e))),new Me(e.sourceSubscription,this._sampler.subscribe(new ri(e)))},e}(dn),ri=function(t){function e(e){this._s=e,t.call(this)}return we(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(cn),ii=function(t){function e(e){this._s=e,t.call(this)}return we(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(cn);Ke.sample=function(t,e){return ze(e)||(e=We),"number"==typeof t?new ni(this,Jr(t,e)):new ni(this,t)};var oi=pt.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};oi.prototype=Object.create(Error.prototype),Ke.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return nt(this,t,arguments[1],arguments[2]);if(fn.isObservable(t)||xt(t))return et(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")},Ke.throttle=function(t,e){ze(e)||(e=We);var n=+t||0;if(n<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new fi(function(t){var i=0;return r.subscribe(function(r){var o=e.now();(0===i||o-i>=n)&&(i=o,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var si=function(t){function e(e,n){this.source=e,this.controller=new pi,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return we(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=ke,i=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=ke)});return new Ne([n,r,i])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(fn);Ke.pausable=function(t){return new si(this,t)};var ai=function(t){function e(e,n){this.source=e,this.controller=new pi,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return we(e,t),e.prototype._subscribe=function(t){function e(){for(;i.length>0;)t.onNext(i.shift())}var r,i=[],o=rt(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){r!==n&&o.shouldFire!==r?(r=o.shouldFire,o.shouldFire&&e()):(r=o.shouldFire,o.shouldFire?t.onNext(o.data):i.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()});return o},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(fn);Ke.pausableBuffered=function(t){return new ai(this,t)};var ui=function(t){function e(e,n,r){t.call(this),this.subject=new ci(n,r),this.source=e.multicast(this.subject).refCount()}return we(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(fn),ci=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new pi,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||Ye}return we(e,t),xe(e.prototype,an,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push($e.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push($e.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push($e.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n),i=e.hasCompleted||e.hasFailed;if(!i&&r>0)return e.requestedCount=r,Ae(function(){e.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(fn);Ke.controlled=function(t,e){return t&&ze(t)&&(e=t,t=!0),null==t&&(t=!0),new ui(this,t,e)},Ke.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e)&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var hi=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return we(e,t),e.prototype.next=function(t){var e=It(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===Ct&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(cn);Ke.transduce=function(t){var e=this;return new fi(function(n){var r=t(it(n));return e.subscribe(new hi(n,r))},e)};var fi=pt.AnonymousObservable=function(t){function e(t){return t&&xt(t.dispose)?t:xt(t)?Ae(t):ke}function n(t,n){var r=n[0],i=n[1],o=It(i.__subscribe).call(i,r);o!==Ct||r.fail(Ct.e)||s(Ct.e),r.setDisposable(e(o))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return we(r,t),r.prototype._subscribe=function(t){var e=new li(t),r=[e,this];return Ye.scheduleRequired()?Ye.schedule(r,n):n(null,r),e},r}(fn),li=function(t){function e(e){t.call(this),this.observer=e,this.m=new Fe}we(e,t);var n=e.prototype;return n.next=function(t){var e=It(this.observer.onNext).call(this.observer,t);e===Ct&&(this.dispose(),s(e.e))},n.error=function(t){var e=It(this.observer.onError).call(this.observer,t);this.dispose(),e===Ct&&s(e.e)},n.completed=function(){var t=It(this.observer.onCompleted).call(this.observer);this.dispose(),t===Ct&&s(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(cn),di=function(t,e){this._s=t,this._o=e};di.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var pi=pt.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return we(e,t),xe(e.prototype,an.prototype,{_subscribe:function(t){return Pe(this),this.isStopped?this.hasError?(t.onError(this.error),ke):(t.onCompleted(),ke):(this.observers.push(t),new di(this,t))},hasObservers:function(){return Pe(this),this.observers.length>0},onCompleted:function(){if(Pe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=i(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Pe(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=i(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Pe(this),!this.isStopped)for(var e=0,n=i(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new vi(t,e)},e}(fn),mi=pt.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return we(e,t),xe(e.prototype,an.prototype,{_subscribe:function(t){return Pe(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),ke):(this.observers.push(t),new di(this,t))},hasObservers:function(){return Pe(this),this.observers.length>0},onCompleted:function(){var t,e;if(Pe(this),!this.isStopped){this.isStopped=!0;var n=i(this.observers),e=n.length;if(this.hasValue)for(t=0;t<e;t++){var r=n[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<e;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(Pe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=i(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){Pe(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(fn),vi=pt.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return we(e,t),xe(e.prototype,an.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(fn),yi=pt.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return we(e,t),xe(e.prototype,an.prototype,{_subscribe:function(t){return Pe(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),ke):(this.observers.push(t),t.onNext(this.value),new di(this,t))},getValue:function(){return Pe(this),this.hasError&&s(this.error),this.value},hasObservers:function(){return Pe(this),this.observers.length>0},onCompleted:function(){if(Pe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=i(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Pe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=i(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Pe(this),!this.isStopped){this.value=t;for(var e=0,n=i(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(fn),gi=pt.ReplaySubject=function(t){function e(t,e){return Ae(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,i){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=i||Ye,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return we(n,t),xe(n.prototype,an.prototype,{_subscribe:function(t){Pe(this);var n=new ln(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var i=0,o=this.q.length;i<o;i++)n.onNext(this.q[i].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return Pe(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(Pe(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=i(this.observers),o=r.length;n<o;n++){var s=r[n];s.onNext(t),s.ensureActive()}}},onError:function(t){if(Pe(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=i(this.observers),o=r.length;n<o;n++){var s=r[n];s.onError(t),s.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Pe(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=i(this.observers),r=n.length;e<r;e++){var o=n[e];o.onCompleted(),o.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(fn);pt.Pauser=function(t){function e(){t.call(this)}return we(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(pi),t.Rx=pt;var bi=f()}).call(this,r,t);var i,o=r.Rx;!function(t){t.VERSION={number:"1.1.4",date:"Jan 18 2017"}}(i||(i={}));var i;!function(t){var e;!function(t){var e;!function(t){function e(t){return t.creator&&t.chunkSize}function n(t,e,n,r,i){return t.currentIndex>=t.chunkSize&&(t.currentIndex=0,t.current=t.creator(t.chunkSize),t.parts[t.parts.length]=t.current),t.current[t.currentIndex++]=e,t.current[t.currentIndex++]=n,t.current[t.currentIndex++]=r,t.current[t.currentIndex++]=i,t.elementCount++}function r(t,e,n,r){return t.currentIndex>=t.chunkSize&&(t.currentIndex=0,t.current=t.creator(t.chunkSize),t.parts[t.parts.length]=t.current),t.current[t.currentIndex++]=e,t.current[t.currentIndex++]=n,t.current[t.currentIndex++]=r,t.elementCount++}function i(t,e,n){return t.currentIndex>=t.chunkSize&&(t.currentIndex=0,t.current=t.creator(t.chunkSize),t.parts[t.parts.length]=t.current),t.current[t.currentIndex++]=e,t.current[t.currentIndex++]=n,t.elementCount++}function o(t,e){return t.currentIndex>=t.chunkSize&&(t.currentIndex=0,t.current=t.creator(t.chunkSize),t.parts[t.parts.length]=t.current),t.current[t.currentIndex++]=e,t.elementCount++}function s(t){var e,n=t.creator(t.elementSize*t.elementCount),r=(t.parts.length-1)*t.chunkSize,i=0;if(t.parts.length>1)if(t.parts[0].buffer)for(var o=0;o<t.parts.length-1;o++)n.set(t.parts[o],t.chunkSize*o);else for(var o=0;o<t.parts.length-1;o++){i=t.chunkSize*o,e=t.parts[o];for(var s=0;s<t.chunkSize;s++)n[i+s]=e[s]}if(t.current.buffer&&t.currentIndex>=t.chunkSize)n.set(t.current,t.chunkSize*(t.parts.length-1));else for(var o=0;o<t.currentIndex;o++)n[r+o]=t.current[o];return n}function a(t){return void 0===t&&(t=262144),p(function(t){return new Float32Array(t)},t,3)}function u(t){return void 0===t&&(t=262144),p(function(t){return new Uint32Array(t)},t,3)}function c(t){return void 0===t&&(t=131072),p(function(t){return new Int32Array(t)},t,2)}function h(t){return void 0===t&&(t=131072),p(function(t){return new Int32Array(t)},t,1)}function f(t){return void 0===t&&(t=131072),p(function(t){return new Int32Array(t)},t,1)}function l(t){return void 0===t&&(t=131072),p(function(t){return new Float32Array(t)},t,1)}function d(t){return void 0===t&&(t=131072),p(function(t){return[]},t,1)}function p(t,e,n){e|=0,e<=0&&(e=1);var r=e*n,i=t(r);return{elementSize:n,chunkSize:r,creator:t,current:i,parts:[i],currentIndex:0,elementCount:0}}t.is=e,t.add4=n,t.add3=r,t.add2=i,t.add=o,t.compact=s,t.forVertex3D=a,t.forIndexBuffer=u,t.forTokenIndices=c,t.forIndices=h,t.forInt32=f,t.forFloat32=l,t.forArray=d,t.create=p}(e=t.ChunkedArray||(t.ChunkedArray={}))}(e=t.Utils||(t.Utils={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e;!function(t){function e(t,e,r){for(;e<r&&32===t.charCodeAt(e);)e++;return n(t,e,r)}function n(t,e,n){var r=0,i=1;for(45===t.charCodeAt(e)&&(i=-1,e++);e<n;e++){var o=t.charCodeAt(e)-48;if(o>9||o<0)return i*r|0;r=10*r+o|0}return i*r}function r(t,e,r,i){return 43===e.charCodeAt(r)&&r++,t*Math.pow(10,n(e,r,i))}function i(t,e,n){for(;e<n&&32===t.charCodeAt(e);)e++;return o(t,e,n)}function o(t,e,n){var i=1,o=0,s=0,a=1;for(45===t.charCodeAt(e)&&(i=-1,++e);e<n;){var u=t.charCodeAt(e)-48;if(!(u>=0&&u<10)){if(u===-2){for(++e;e<n;){if(u=t.charCodeAt(e)-48,!(u>=0&&u<10))return 53===u||21===u?r(i*(o+s/a),t,e+1,n):i*(o+s/a);s=10*s+u,a*=10,++e}return i*(o+s/a)}if(53===u||21===u)return r(i*o,t,e+1,n);break}o=10*o+u,++e}return i*o}t.parseIntSkipTrailingWhitespace=e,t.parseInt=n,t.parseFloatSkipTrailingWhitespace=i,t.parseFloat=o}(e=t.FastNumberParsers||(t.FastNumberParsers={}))}(e=t.Utils||(t.Utils={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e=[];!function(){for(var t="",n=0;n<512;n++)e[n]=t,t+=" "}();var n;!function(t){function n(t){return void 0===t&&(t=512),{chunkData:[],chunkOffset:0,chunkCapacity:t,data:[]}}function r(t){return t.data.length?(t.chunkOffset>0&&(t.data[t.data.length]=t.chunkData.splice(0,t.chunkOffset).join("")),t.data.join("")):t.chunkData.length===t.chunkOffset?t.chunkData.join(""):t.chunkData.splice(0,t.chunkOffset).join("")}function i(t,e){o(t);for(var n=0,r=t.data;n<r.length;n++){var i=r[n];e.writeString(i)}}function o(t){t.chunkOffset>0&&(t.chunkData.length===t.chunkOffset?t.data[t.data.length]=t.chunkData.join(""):t.data[t.data.length]=t.chunkData.splice(0,t.chunkOffset).join(""),t.chunkOffset=0)}function s(t){u(t,"\n")}function a(t,n){u(t,e[n])}function u(t,e){void 0!==e&&null!==e&&(t.chunkOffset===t.chunkCapacity&&(t.data[t.data.length]=t.chunkData.join(""),t.chunkOffset=0),t.chunkData[t.chunkOffset++]=e)}function c(t,e){t.chunkOffset===t.chunkCapacity&&(t.data[t.data.length]=t.chunkData.join(""),t.chunkOffset=0),t.chunkData[t.chunkOffset++]=e}function h(t,n,r){void 0!==n&&null!==n||u(t,e[r]);var i=r-n.length;i>0&&u(t,e[i]),u(t,n)}function f(t,n,r){void 0!==n&&null!==n||u(t,e[r]);var i=r-n.length;u(t,n),i>0&&u(t,e[i])}function l(t,e){u(t,""+e)}function d(t,n,r){var i=""+n,o=r-i.length;o>0&&u(t,e[o]),u(t,i)}function p(t,n,r){var i=""+n,o=r-i.length;u(t,i),o>0&&u(t,e[o])}function m(t,e,n){u(t,""+Math.round(n*e)/n)}function v(t,n,r,i){var o=""+Math.round(r*n)/r,s=i-o.length;s>0&&u(t,e[s]),u(t,o)}function y(t,n,r,i){var o=""+Math.round(r*n)/r,s=i-o.length;u(t,o),s>0&&u(t,e[s])}t.create=n,t.asString=r,t.writeTo=i,t.newline=s,t.whitespace=a,t.write=u,t.writeSafe=c,t.writePadLeft=h,t.writePadRight=f,t.writeInteger=l,t.writeIntegerPadLeft=d,t.writeIntegerPadRight=p,t.writeFloat=m,t.writeFloatPadLeft=v,t.writeFloatPadRight=y}(n=t.StringWriter||(t.StringWriter={}))}(e=t.Utils||(t.Utils={}))}(i||(i={}));var i;!function(t){var e=function(){function t(){this.isDefined=!1}return t.prototype.getString=function(t){return null},t.prototype.getInteger=function(t){return 0},t.prototype.getFloat=function(t){return 0},t.prototype.getValuePresence=function(t){return 1},t.prototype.areValuesEqual=function(t,e){return!0},t.prototype.stringEquals=function(t,e){return null===e},t}();t.UndefinedColumn=new e;var n;!function(t){function e(t,e,n,r,i){for(var o=[],s=1;s<=n;s++){for(var a=[],u=1;u<=r;u++)a[u-1]=t.getColumn(e+"["+s+"]["+u+"]").getFloat(i);o[s-1]=a}return o}function n(t,e,n,r,i){for(var o=[],s=1;s<=n;s++)o[s-1]=t.getColumn(e+"["+s+"]").getFloat(i);return o}t.getMatrix=e,t.getVector=n}(n=t.Category||(t.Category={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(t,e){return void 0===e&&(e=-1),new n(t,e)}function i(t,e){return void 0===e&&(e=[]),new r(t,e)}t.error=e,t.success=i}(e=t.ParserResult||(t.ParserResult={}));var n=function(){function t(t,e){this.message=t,this.line=e,this.isError=!0}return t.prototype.toString=function(){return this.line>=0?"[Line "+this.line+"] "+this.message:this.message;
},t}();t.ParserError=n;var r=function(){function t(t,e){this.result=t,this.warnings=e,this.isError=!1}return t}();t.ParserSuccess=r}(i||(i={}));var i;!function(t){var e;!function(e){var n;!function(t){function e(){return Object.create(null)}function n(t,e){if(e.length>6)return e;var n=t[e];return void 0!==n?n:(t[e]=e,e)}t.create=e,t.get=n}(n||(n={}));var r=function(){function t(t){this.dataBlocks=[],this.data=t}return t.prototype.toJSON=function(){return this.dataBlocks.map(function(t){return t.toJSON()})},t}();e.File=r;var i=function(){function t(t,e){this.header=e,this.data=t,this.categoryList=[],this.additionalData={},this.categoryMap=new Map}return Object.defineProperty(t.prototype,"categories",{get:function(){return this.categoryList},enumerable:!0,configurable:!0}),t.prototype.getCategory=function(t){return this.categoryMap.get(t)},t.prototype.addCategory=function(t){this.categoryList[this.categoryList.length]=t,this.categoryMap.set(t.name,t)},t.prototype.toJSON=function(){return{id:this.header,categories:this.categoryList.map(function(t){return t.toJSON()}),additionalData:this.additionalData}},t}();e.DataBlock=i;var o=function(){function e(t,e,n,r,i,o,s){this.name=e,this.tokens=o,this.data=t,this.startIndex=n,this.endIndex=r,this.columnCount=i.length,this.rowCount=s/i.length|0,this.columnIndices=new Map,this.columnNameList=[];for(var a=0;a<i.length;a++){var u=i[a].substr(e.length+1);this.columnIndices.set(u,a),this.columnNameList.push(u)}}return Object.defineProperty(e.prototype,"columnNames",{get:function(){return this.columnNameList},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(e){var n=this.columnIndices.get(e);return void 0!==n?new u(this,this.data,e,n):t.UndefinedColumn},e.prototype.toJSON=function(){for(var t=[],e=this.data,r=this.tokens,i=this.columnNameList,o=n.create(),s=0;s<this.rowCount;s++){for(var a={},u=0;u<this.columnCount;u++){var c=2*(s*this.columnCount+u);a[i[u]]=n.get(o,e.substring(r[c],r[c+1]))}t[s]=a}return{name:this.name,columns:i,rows:t}},e}();e.Category=o;var s=t.Utils.FastNumberParsers.parseInt,a=t.Utils.FastNumberParsers.parseFloat,u=function(){function t(t,e,r,i){this.data=e,this.name=r,this.index=i,this.stringPool=n.create(),this.isDefined=!0,this.tokens=t.tokens,this.columnCount=t.columnCount}return t.prototype.getString=function(t){var e=2*(t*this.columnCount+this.index),r=n.get(this.stringPool,this.data.substring(this.tokens[e],this.tokens[e+1]));return"."===r||"?"===r?null:r},t.prototype.getInteger=function(t){var e=2*(t*this.columnCount+this.index);return s(this.data,this.tokens[e],this.tokens[e+1])},t.prototype.getFloat=function(t){var e=2*(t*this.columnCount+this.index);return a(this.data,this.tokens[e],this.tokens[e+1])},t.prototype.stringEquals=function(t,e){var n=2*(t*this.columnCount+this.index),r=this.tokens[n],i=e.length;if(i!==this.tokens[n+1]-r)return!1;for(var o=0;o<i;o++)if(this.data.charCodeAt(o+r)!==e.charCodeAt(o))return!1;return!0},t.prototype.areValuesEqual=function(t,e){var n=2*(t*this.columnCount+this.index),r=2*(e*this.columnCount+this.index),i=this.tokens[n],o=this.tokens[r],s=this.tokens[n+1]-i;if(s!==this.tokens[r+1]-o)return!1;for(var a=0;a<s;a++)if(this.data.charCodeAt(a+i)!==this.data.charCodeAt(a+o))return!1;return!0},t.prototype.getValuePresence=function(t){var e=t*this.columnCount+this.index,n=this.tokens[2*e];if(this.tokens[2*e+1]-n!==1)return 0;var r=this.data.charCodeAt(n);return 46===r?1:63===r?2:0},t}();e.Column=u}(e=t.Text||(t.Text={}))}(i||(i={}));var i;!function(t){var e;!function(e){function n(t){for(;t.position<t.length;)switch(t.data.charCodeAt(t.position)){case 9:case 10:case 13:case 32:return void(t.currentTokenEnd=t.position);default:++t.position}t.currentTokenEnd=t.position}function r(t,e){var n,r;for(++t.position;t.position<t.length;)if(r=t.data.charCodeAt(t.position),r===e)switch(n=t.data.charCodeAt(t.position+1)){case 9:case 10:case 13:case 32:return t.currentTokenStart++,t.currentTokenEnd=t.position,t.isEscaped=!0,void++t.position;default:if(void 0===n)return t.currentTokenStart++,t.currentTokenEnd=t.position,t.isEscaped=!0,void++t.position;++t.position}else{if(10===r||13===r)return void(t.currentTokenEnd=t.position);++t.position}t.currentTokenEnd=t.position}function i(t){for(var e,n=59,r=t.position+1;r<t.length;){if(e=t.data.charCodeAt(r),59===e&&(10===n||13===n)){for(t.position=r+1,t.currentTokenStart++,r--,e=t.data.charCodeAt(r);10===e||13===e;)r--,e=t.data.charCodeAt(r);return t.currentTokenEnd=r+1,void(t.isEscaped=!0)}13===e?t.currentLineNumber++:10===e&&13!==n&&t.currentLineNumber++,n=e,++r}return t.position=r,n}function o(t){for(;t.position<t.length;){var e=t.data.charCodeAt(t.position);if(10===e||13===e)return;++t.position}}function s(t){for(var e=10;t.position<t.length;){var n=t.data.charCodeAt(t.position);switch(n){case 9:case 32:e=n,++t.position;break;case 10:13!==e&&++t.currentLineNumber,e=n,++t.position;break;case 13:e=n,++t.position,++t.currentLineNumber;break;default:return e}}return e}function a(t){var e=t.data.charCodeAt(t.currentTokenStart);return(68===e||100===e)&&(e=t.data.charCodeAt(t.currentTokenStart+1),(65===e||97===e)&&(e=t.data.charCodeAt(t.currentTokenStart+2),(84===e||116===e)&&(e=t.data.charCodeAt(t.currentTokenStart+3),65===e||97===e)))}function u(t){var e=t.data.charCodeAt(t.currentTokenStart);return(83===e||115===e)&&(e=t.data.charCodeAt(t.currentTokenStart+1),(65===e||97===e)&&(e=t.data.charCodeAt(t.currentTokenStart+2),(86===e||118===e)&&(e=t.data.charCodeAt(t.currentTokenStart+3),69===e||101===e)))}function c(t){if(t.currentTokenEnd-t.currentTokenStart!==5)return!1;var e=t.data.charCodeAt(t.currentTokenStart);return(76===e||108===e)&&(e=t.data.charCodeAt(t.currentTokenStart+1),(79===e||111===e)&&(e=t.data.charCodeAt(t.currentTokenStart+2),(79===e||111===e)&&(e=t.data.charCodeAt(t.currentTokenStart+3),80===e||112===e)))}function h(t,e,n){var r,i=n-e,o=t.currentTokenStart-e,s=t.currentTokenEnd-t.currentTokenStart;if(s<i)return!1;for(r=e;r<n;++r)if(t.data.charCodeAt(r)!==t.data.charCodeAt(r+o))return!1;return i===s||46===t.data.charCodeAt(r+o)}function f(t){var e;for(e=t.currentTokenStart;e<t.currentTokenEnd;++e)if(46===t.data.charCodeAt(e))return e;return e}function l(t,e){return t.data.substring(t.currentTokenStart,e)}function d(t){return t.data.substring(t.currentTokenStart,t.currentTokenEnd)}function p(t){var e=s(t);if(t.position>=t.length)return void(t.currentTokenType=6);t.currentTokenStart=t.position,t.currentTokenEnd=t.position,t.isEscaped=!1;var h=t.data.charCodeAt(t.position);switch(h){case 35:o(t),t.currentTokenType=5;break;case 34:case 39:r(t,h),t.currentTokenType=3;break;case 59:10===e||13===e?i(t):n(t),t.currentTokenType=3;break;default:n(t),t.isEscaped?t.currentTokenType=3:95===t.data.charCodeAt(t.currentTokenStart)?t.currentTokenType=4:t.currentTokenEnd-t.currentTokenStart>=5&&95===t.data.charCodeAt(t.currentTokenStart+4)?a(t)?t.currentTokenType=0:u(t)?t.currentTokenType=1:c(t)?t.currentTokenType=2:t.currentTokenType=3:t.currentTokenType=3}}function m(t){for(p(t);5===t.currentTokenType;)p(t)}function v(t){return{data:t,length:t.length,position:0,currentTokenStart:0,currentTokenEnd:0,currentTokenType:6,currentLineNumber:1,isEscaped:!1}}function y(t,n){for(var r,i=t.currentTokenStart,o=f(t),s=l(t,o),a=[],u=C.create(512),c=0,p=!0;p;){if(4!==t.currentTokenType||!h(t,i,o)){p=!1;break}if(r=d(t),m(t),3!==t.currentTokenType)return{hasError:!0,errorLine:t.currentLineNumber,errorMessage:"Expected value."};a[a.length]=r,C.addToken(u,t.currentTokenStart,t.currentTokenEnd),c++,m(t)}return n.addCategory(new e.Category(n.data,s,i,t.currentTokenStart,a,u.tokens,c)),{hasError:!1,errorLine:0,errorMessage:""}}function g(t,n){var r=t.currentTokenStart,i=t.currentLineNumber;m(t);for(var o=l(t,f(t)),s=[],a=C.create("_atom_site"===o?n.data.length/1.85|0:1024),u=0;4===t.currentTokenType;)s[s.length]=d(t),m(t);for(;3===t.currentTokenType;)C.addToken(a,t.currentTokenStart,t.currentTokenEnd),u++,m(t);return u%s.length!==0?{hasError:!0,errorLine:t.currentLineNumber,errorMessage:"The number of values for loop starting at line "+i+" is not a multiple of the number of columns."}:(n.addCategory(new e.Category(n.data,o,r,t.currentTokenStart,s,a.tokens,u)),{hasError:!1,errorLine:0,errorMessage:""})}function b(e,n){return t.ParserResult.error(n,e)}function _(e){return t.ParserResult.success(e)}function w(t){var n,r,i,o=v(t),s=new e.File(t),a=new e.DataBlock(t,"default"),u=new e.DataBlock(t,"empty"),c=!1;for(m(o);6!==o.currentTokenType;){var h=o.currentTokenType;if(0===h){if(c)return b(o.currentLineNumber,"Unexpected data block inside a save frame.");a.categories.length>0&&s.dataBlocks.push(a),a=new e.DataBlock(t,t.substring(o.currentTokenStart+5,o.currentTokenEnd)),m(o)}else if(1===h){if(r=t.substring(o.currentTokenStart+5,o.currentTokenEnd),0===r.length)u.categories.length>0&&(i=a.additionalData.saveFrames,i||(i=[],a.additionalData.saveFrames=i),i[i.length]=u),c=!1;else{if(c)return b(o.currentLineNumber,"Save frames cannot be nested.");c=!0,u=new e.DataBlock(t,r)}m(o)}else if(2===h){if(n=g(o,c?u:a),n.hasError)return b(n.errorLine,n.errorMessage)}else{if(4!==h)return b(o.currentLineNumber,"Unexpected token. Expected data_, loop_, or data name.");if(n=y(o,c?u:a),n.hasError)return b(n.errorLine,n.errorMessage)}}return c?b(o.currentLineNumber,"Unfinished save frame (`"+u.header+"`)."):(a.categories.length>0&&s.dataBlocks.push(a),_(s))}function x(t){return w(t)}var C;!function(t){function e(t){var e=new Int32Array(1.61*t.tokens.length|0);e.set(t.tokens),t.tokens=e,t.tokensLenMinus2=e.length-2|0}function n(t,n,r){t.count>=t.tokensLenMinus2&&e(t),t.tokens[t.count++]=n,t.tokens[t.count++]=r}function r(t){return{tokensLenMinus2:t-2|0,count:0,tokens:new Int32Array(t)}}t.addToken=n,t.create=r}(C||(C={})),e.parse=x}(e=t.Text||(t.Text={}))}(i||(i={}));var i;!function(t){var e;!function(e){function n(t){return!!t&&t.indexOf("\n")>=0}function r(t,e){for(var r=t.desc.fields,i=t.data,o=r.reduce(function(t,e){return Math.max(t,e.name.length)},0)+t.desc.name.length+5,f=0,l=r;f<l.length;f++){var d=l[f];h.writePadRight(e,t.desc.name+"."+d.name,o);var p=d.presence,m=void 0;if(p&&0!==(m=p(i,0)))1===m?s(e):a(e);else{var v=d.string(i,0);n(v)?(c(e,v),h.newline(e)):u(e,v)}h.newline(e)}h.write(e,"#\n")}function i(t,e){o(e,"loop_");for(var r=t[0],i=r.desc.fields,f=0,l=i;f<l.length;f++){var d=l[f];o(e,r.desc.name+"."+d.name)}for(var p=0,m=t;p<m.length;p++)for(var v=m[p],y=v.data,g=v.count,b=0;b<g;b++){for(var _=0,w=i;_<w.length;_++){var d=w[_],x=d.presence,C=void 0;if(x&&0!==(C=x(y,b)))1===C?s(e):a(e);else{var I=d.string(y,b);n(I)?(c(e,I),h.newline(e)):u(e,I)}}h.newline(e)}h.write(e,"#\n")}function o(t,e){h.write(t,e),h.newline(t)}function s(t){h.writeSafe(t,". ")}function a(t){h.writeSafe(t,"? ")}function u(t,e){if(!e)return void h.writeSafe(t,". ");for(var n=!1,r="'",i="' ",o=!1,s=!1,a=!1,u=0,c=e.length-1;u<c;u++){var f=e.charCodeAt(u);switch(f){case 9:o=!0;break;case 10:return h.writeSafe(t,"\n;"+e),void h.writeSafe(t,"\n; ");case 32:o=!0;break;case 34:if(s)return h.writeSafe(t,"\n;"+e),void h.writeSafe(t,"\n; ");a=!0,n=!0,r="'",i="' ";break;case 39:if(a)return h.writeSafe(t,"\n;"+e),void h.writeSafe(t,"\n; ");n=!0,s=!0,r='"',i='" '}}var l=e.charCodeAt(0);n||35!==l&&59!==l&&!o||(r="'",i="' ",n=!0),n?h.writeSafe(t,r+e+i):(h.write(t,e),h.writeSafe(t," "))}function c(t,e){h.writeSafe(t,"\n;"+e),h.writeSafe(t,"\n; ")}var h=t.Utils.StringWriter,f=function(){function t(){this.writer=h.create(),this.encoded=!1,this.dataBlockCreated=!1}return t.prototype.startDataBlock=function(t){this.dataBlockCreated=!0,h.write(this.writer,"data_"+(t||"").replace(/[ \n\t]/g,"").toUpperCase()+"\n#\n")},t.prototype.writeCategory=function(t,e){if(this.encoded)throw new Error("The writer contents have already been encoded, no more writing.");if(!this.dataBlockCreated)throw new Error("No data block created.");var n=e&&e.length?e.map(function(e){return t(e)}):[t(void 0)],o=n.filter(function(t){return t&&t.count>0});if(o.length){var s=o.reduce(function(t,e){return t+(void 0===e.count?1:e.count)},0);s&&(1===s?r(o[0],this.writer):i(o,this.writer))}},t.prototype.encode=function(){this.encoded=!0},t.prototype.flush=function(t){h.writeTo(this.writer,t)},t}();e.Writer=f}(e=t.Text||(t.Text={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e;!function(t){function e(t,e){for(var n={},r=0;r<e;r++){var i=o(t);n[i]=o(t)}return n}function n(t,e){for(var n=new Uint8Array(e),r=t.offset,i=0;i<e;i++)n[i]=t.buffer[i+r];return t.offset+=e,n}function r(e,n){var r=t.utf8Read(e.buffer,e.offset,n);return e.offset+=n,r}function i(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=o(t);return n}function o(t){var o,s,a=t.buffer[t.offset];if(0===(128&a))return t.offset++,a;if(128===(240&a))return s=15&a,t.offset++,e(t,s);if(144===(240&a))return s=15&a,t.offset++,i(t,s);if(160===(224&a))return s=31&a,t.offset++,r(t,s);if(224===(224&a))return o=t.dataView.getInt8(t.offset),t.offset++,o;switch(a){case 192:return t.offset++,null;case 194:return t.offset++,!1;case 195:return t.offset++,!0;case 196:return s=t.dataView.getUint8(t.offset+1),t.offset+=2,n(t,s);case 197:return s=t.dataView.getUint16(t.offset+1),t.offset+=3,n(t,s);case 198:return s=t.dataView.getUint32(t.offset+1),t.offset+=5,n(t,s);case 202:return o=t.dataView.getFloat32(t.offset+1),t.offset+=5,o;case 203:return o=t.dataView.getFloat64(t.offset+1),t.offset+=9,o;case 204:return o=t.buffer[t.offset+1],t.offset+=2,o;case 205:return o=t.dataView.getUint16(t.offset+1),t.offset+=3,o;case 206:return o=t.dataView.getUint32(t.offset+1),t.offset+=5,o;case 208:return o=t.dataView.getInt8(t.offset+1),t.offset+=2,o;case 209:return o=t.dataView.getInt16(t.offset+1),t.offset+=3,o;case 210:return o=t.dataView.getInt32(t.offset+1),t.offset+=5,o;case 217:return s=t.dataView.getUint8(t.offset+1),t.offset+=2,r(t,s);case 218:return s=t.dataView.getUint16(t.offset+1),t.offset+=3,r(t,s);case 219:return s=t.dataView.getUint32(t.offset+1),t.offset+=5,r(t,s);case 220:return s=t.dataView.getUint16(t.offset+1),t.offset+=3,i(t,s);case 221:return s=t.dataView.getUint32(t.offset+1),t.offset+=5,i(t,s);case 222:return s=t.dataView.getUint16(t.offset+1),t.offset+=3,e(t,s);case 223:return s=t.dataView.getUint32(t.offset+1),t.offset+=5,e(t,s)}throw new Error("Unknown type 0x"+a.toString(16))}function s(t){return o({buffer:t,offset:0,dataView:new DataView(t.buffer)})}t.decode=s}(e=t.MessagePack||(t.MessagePack={}))}(e=t.Binary||(t.Binary={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e;!function(t){function e(t){var e=new ArrayBuffer(n(t)),i=new DataView(e),o=new Uint8Array(e);return r(t,i,o,0),o}function n(e){var r=typeof e;if("string"===r){var i=t.utf8ByteCount(e);if(i<32)return 1+i;if(i<256)return 2+i;if(i<65536)return 3+i;if(i<4294967296)return 5+i}if(e instanceof Uint8Array){var o=e.byteLength;if(o<256)return 2+o;if(o<65536)return 3+o;if(o<4294967296)return 5+o}if("number"===r){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===r||null===e||void 0===e)return 1;if("object"===r){var s,a=0;if(Array.isArray(e)){s=e.length;for(var u=0;u<s;u++)a+=n(e[u])}else{var c=Object.keys(e);s=c.length;for(var u=0;u<s;u++){var h=c[u];a+=n(h)+n(e[h])}}if(s<16)return 1+a;if(s<65536)return 3+a;if(s<4294967296)return 5+a;throw new Error("Array or object too long 0x"+s.toString(16))}throw new Error("Unknown type "+r)}function r(e,n,i,o){var s=typeof e;if("string"===s){var a=t.utf8ByteCount(e);if(a<32)return n.setUint8(o,160|a),t.utf8Write(i,o+1,e),1+a;if(a<256)return n.setUint8(o,217),n.setUint8(o+1,a),t.utf8Write(i,o+2,e),2+a;if(a<65536)return n.setUint8(o,218),n.setUint16(o+1,a),t.utf8Write(i,o+3,e),3+a;if(a<4294967296)return n.setUint8(o,219),n.setUint32(o+1,a),t.utf8Write(i,o+5,e),5+a}if(e instanceof Uint8Array){var u=e.byteLength,c=new Uint8Array(n.buffer);if(u<256)return n.setUint8(o,196),n.setUint8(o+1,u),c.set(e,o+2),2+u;if(u<65536)return n.setUint8(o,197),n.setUint16(o+1,u),c.set(e,o+3),3+u;if(u<4294967296)return n.setUint8(o,198),n.setUint32(o+1,u),c.set(e,o+5),5+u}if("number"===s){if(!isFinite(e))throw new Error("Number not finite: "+e);if(Math.floor(e)!==e)return n.setUint8(o,203),n.setFloat64(o+1,e),9;if(e>=0){if(e<128)return n.setUint8(o,e),1;if(e<256)return n.setUint8(o,204),n.setUint8(o+1,e),2;if(e<65536)return n.setUint8(o,205),n.setUint16(o+1,e),3;if(e<4294967296)return n.setUint8(o,206),n.setUint32(o+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return n.setInt8(o,e),1;if(e>=-128)return n.setUint8(o,208),n.setInt8(o+1,e),2;if(e>=-32768)return n.setUint8(o,209),n.setInt16(o+1,e),3;if(e>=-2147483648)return n.setUint8(o,210),n.setInt32(o+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(null===e||void 0===e)return n.setUint8(o,192),1;if("boolean"===s)return n.setUint8(o,e?195:194),1;if("object"===s){var h,f=0,l=Array.isArray(e),d=void 0;if(l?h=e.length:(d=Object.keys(e),h=d.length),h<16?(n.setUint8(o,h|(l?144:128)),f=1):h<65536?(n.setUint8(o,l?220:222),n.setUint16(o+1,h),f=3):h<4294967296&&(n.setUint8(o,l?221:223),n.setUint32(o+1,h),f=5),l)for(var p=0;p<h;p++)f+=r(e[p],n,i,o+f);else for(var m=0,v=d;m<v.length;m++){var y=v[m];f+=r(y,n,i,o+f),f+=r(e[y],n,i,o+f)}return f}throw new Error("Unknown type "+s)}t.encode=e}(e=t.MessagePack||(t.MessagePack={}))}(e=t.Binary||(t.Binary={}))}(i||(i={}));var i;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n){for(var r=(t.byteLength,0),i=n.length;r<i;r++){var o=n.charCodeAt(r);if(o<128)t[e++]=o>>>0&127|0;else if(o<2048)t[e++]=o>>>6&31|192,t[e++]=o>>>0&63|128;else if(o<65536)t[e++]=o>>>12&15|224,t[e++]=o>>>6&63|128,t[e++]=o>>>0&63|128;else{if(!(o<1114112))throw new Error("bad codepoint "+o);t[e++]=o>>>18&7|240,t[e++]=o>>>12&63|128,t[e++]=o>>>6&63|128,t[e++]=o>>>0&63|128}}}function n(t){throw new Error(t)}function r(t,e,r){for(var i=o,s=void 0,a=[],u=512,c=0,h=e,f=e+r;h<f;h++){var l=t[h];0===(128&l)?a[c++]=i[l]:192===(224&l)?a[c++]=i[(15&l)<<6|63&t[++h]]:224===(240&l)?a[c++]=String.fromCharCode((15&l)<<12|(63&t[++h])<<6|(63&t[++h])<<0):240===(248&l)?a[c++]=String.fromCharCode((7&l)<<18|(63&t[++h])<<12|(63&t[++h])<<6|(63&t[++h])<<0):n("Invalid byte "+l.toString(16)),c===u&&(s=s||[],s[s.length]=a.join(""),c=0)}return s?(c>0&&(s[s.length]=a.slice(0,c).join("")),s.join("")):a.slice(0,c).join("")}function i(t){for(var e=0,r=0,i=t.length;r<i;r++){var o=t.charCodeAt(r);o<128?e+=1:o<2048?e+=2:o<65536?e+=3:o<1114112?e+=4:n("bad codepoint "+o)}return e}t.utf8Write=e;var o=function(){for(var t=[],e=0;e<1024;e++)t[e]=String.fromCharCode(e);return t}();t.utf8Read=r,t.utf8ByteCount=i}(e=t.MessagePack||(t.MessagePack={}))}(e=t.Binary||(t.Binary={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(t){for(var e=t.data,r=t.encoding.length-1;r>=0;r--)e=n.decodeStep(e,t.encoding[r]);return e}t.decode=e;var n;!function(t){function n(t,e){switch(e.kind){case"ByteArray":switch(e.type){case 4:return t;case 1:return o(t);case 2:return u(t);case 5:return c(t);case 3:return h(t);case 6:return f(t);case 32:return l(t);case 33:return d(t);default:throw new Error("Unsupported ByteArray type.")}case"FixedPoint":return p(t,e);case"IntervalQuantization":return m(t,e);case"RunLength":return v(t,e);case"Delta":return y(t,e);case"IntegerPacking":return _(t,e);case"StringArray":return w(t,e)}}function r(t,e){switch(t){case 1:return new Int8Array(e);case 2:return new Int16Array(e);case 3:return new Int32Array(e);case 4:return new Uint8Array(e);case 5:return new Uint16Array(e);case 6:return new Uint32Array(e);default:throw new Error("Unsupported integer data type.")}}function i(t,e){switch(t){case 32:return new Float32Array(e);case 33:return new Float64Array(e);default:throw new Error("Unsupported floating data type.")}}function o(t){return new Int8Array(t.buffer,t.byteOffset)}function s(t,e){for(var n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0,o=t.length;i<o;i+=e)for(var s=0;s<e;s++)r[i+e-s-1]=t[i+s];return n}function a(t,e,n){return new n(x?t.buffer:s(t,e))}function u(t){return a(t,2,Int16Array)}function c(t){return a(t,2,Uint16Array)}function h(t){return a(t,4,Int32Array)}function f(t){return a(t,4,Uint32Array)}function l(t){return a(t,4,Float32Array)}function d(t){return a(t,8,Float64Array)}function p(t,e){for(var n=t.length,r=i(e.srcType,n),o=1/e.factor,s=0;s<n;s++)r[s]=o*t[s];return r}function m(t,e){for(var n=t.length,r=i(e.srcType,n),o=(e.max-e.min)/(e.numSteps-1),s=e.min,a=0;a<n;a++)r[a]=s+o*t[a];return r}function v(t,e){for(var n=r(e.srcType,e.srcSize),i=0,o=0,s=t.length;o<s;o+=2)for(var a=t[o],u=t[o+1],c=0;c<u;++c)n[i++]=a;return n}function y(t,e){var n=t.length,i=r(e.srcType,n);if(!n)return i;i[0]=t[0]+(0|e.origin);for(var o=1;o<n;++o)i[o]=t[o]+i[o-1];return i}function g(t,e){for(var n=1===e.byteCount?127:32767,r=-n-1,i=t.length,o=new Int32Array(e.srcSize),s=0,a=0;s<i;){for(var u=0,c=t[s];c===n||c===r;)u+=c,s++,c=t[s];u+=c,o[a]=u,s++,a++}return o}function b(t,e){for(var n=1===e.byteCount?255:65535,r=t.length,i=new Int32Array(e.srcSize),o=0,s=0;o<r;){for(var a=0,u=t[o];u===n;)a+=u,o++,u=t[o];a+=u,i[s]=a,o++,s++}return i}function _(t,e){return e.isUnsigned?b(t,e):g(t,e)}function w(t,n){for(var r=n.stringData,i=e({encoding:n.offsetEncoding,data:n.offsets}),o=e({encoding:n.dataEncoding,data:t}),s=Object.create(null),a=new Array(o.length),u=0,c=0,h=o;c<h.length;c++){var f=h[c];if(f<0)a[u++]=null;else{var l=s[f];void 0===l&&(l=r.substring(i[f],i[f+1]),s[f]=l),a[u++]=l}}return a}t.decodeStep=n;var x=function(){var t=new ArrayBuffer(2),e=new Uint8Array(t),n=new Uint16Array(t);return e[0]=170,e[1]=187,48042===n[0]}()}(n||(n={}))}(e=t.Binary||(t.Binary={}))}(i||(i={}));var i;!function(t){var e;!function(e){function n(n){if(!n.data.data)return t.UndefinedColumn;var r=e.decode(n.data),i=void 0;return n.mask&&(i=e.decode(n.mask)),r.buffer&&r.byteLength&&r.BYTES_PER_ELEMENT?i?new c(r,i):new u(r):i?new f(r,i):new h(r)}var r=function(){function t(t){this.dataBlocks=t.dataBlocks.map(function(t){return new i(t)})}return t.prototype.toJSON=function(){return this.dataBlocks.map(function(t){return t.toJSON()})},t}();e.File=r;var i=function(){function t(t){this.additionalData={},this.header=t.header,this.categoryList=t.categories.map(function(t){return new o(t)}),this.categoryMap=new Map;for(var e=0,n=this.categoryList;e<n.length;e++){var r=n[e];this.categoryMap.set(r.name,r)}}return Object.defineProperty(t.prototype,"categories",{get:function(){return this.categoryList},enumerable:!0,configurable:!0}),t.prototype.getCategory=function(t){return this.categoryMap.get(t)},t.prototype.toJSON=function(){return{id:this.header,categories:this.categoryList.map(function(t){return t.toJSON()}),additionalData:this.additionalData}},t}();e.DataBlock=i;var o=function(){function e(t){this.name=t.name,this.columnCount=t.columns.length,this.rowCount=t.rowCount,this.columnNameList=[],this.encodedColumns=new Map;for(var e=0,n=t.columns;e<n.length;e++){var r=n[e];this.encodedColumns.set(r.name,r),this.columnNameList.push(r.name)}}return Object.defineProperty(e.prototype,"columnNames",{get:function(){return this.columnNameList},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(e){var r=this.encodedColumns.get(e);return r?n(r):t.UndefinedColumn},e.prototype.toJSON=function(){for(var t=this,e=[],n=this.columnNameList.map(function(e){return{name:e,column:t.getColumn(e)}}),r=0;r<this.rowCount;r++){for(var i={},o=0,s=n;o<s.length;o++){var a=s[o],u=a.column.getValuePresence(r);0===u?i[a.name]=a.column.getString(r):1===u?i[a.name]=".":i[a.name]="?"}e[r]=i}return{name:this.name,columns:this.columnNames,rows:e}},e}();e.Category=o;var s=t.Utils.FastNumberParsers.parseInt,a=t.Utils.FastNumberParsers.parseFloat,u=function(){function t(t){this.data=t,this.isDefined=!0}return t.prototype.getString=function(t){return""+this.data[t]},t.prototype.getInteger=function(t){return 0|this.data[t]},t.prototype.getFloat=function(t){return 1*this.data[t]},t.prototype.stringEquals=function(t,e){return this.data[t]===a(e,0,e.length)},t.prototype.areValuesEqual=function(t,e){return this.data[t]===this.data[e]},t.prototype.getValuePresence=function(t){return 0},t}(),c=function(){function t(t,e){this.data=t,this.mask=e,this.isDefined=!0}return t.prototype.getString=function(t){return 0===this.mask[t]?""+this.data[t]:null},t.prototype.getInteger=function(t){return 0===this.mask[t]?this.data[t]:0},t.prototype.getFloat=function(t){return 0===this.mask[t]?this.data[t]:0},t.prototype.stringEquals=function(t,e){return 0===this.mask[t]?this.data[t]===a(e,0,e.length):null===e||void 0===e},t.prototype.areValuesEqual=function(t,e){return this.data[t]===this.data[e]},t.prototype.getValuePresence=function(t){return this.mask[t]},t}(),h=function(){function t(t){this.data=t,this.isDefined=!0}return t.prototype.getString=function(t){return this.data[t]},t.prototype.getInteger=function(t){var e=this.data[t];return s(e,0,e.length)},t.prototype.getFloat=function(t){var e=this.data[t];return a(e,0,e.length)},t.prototype.stringEquals=function(t,e){return this.data[t]===e},t.prototype.areValuesEqual=function(t,e){return this.data[t]===this.data[e]},t.prototype.getValuePresence=function(t){return 0},t}(),f=function(){function t(t,e){this.data=t,this.mask=e,this.isDefined=!0}return t.prototype.getString=function(t){return 0===this.mask[t]?this.data[t]:null},t.prototype.getInteger=function(t){if(0!==this.mask[t])return 0;var e=this.data[t];return s(e||"",0,(e||"").length)},t.prototype.getFloat=function(t){if(0!==this.mask[t])return 0;var e=this.data[t];return a(e||"",0,(e||"").length)},t.prototype.stringEquals=function(t,e){return this.data[t]===e},t.prototype.areValuesEqual=function(t,e){return this.data[t]===this.data[e]},t.prototype.getValuePresence=function(t){return this.mask[t]},t}()}(e=t.Binary||(t.Binary={}))}(i||(i={}));var i;!function(t){var e;!function(e){var n=function(){function t(t){this.providers=t}return t.prototype.and=function(e){return new t(this.providers.concat([e]))},t.prototype.encode=function(t){for(var e=[],n=0,r=this.providers;n<r.length;n++){var i=r[n],o=i(t);if(!o.encodings.length)throw new Error("Encodings must be non-empty.");t=o.data;for(var s=0,a=o.encodings;s<a.length;s++){var u=a[s];e.push(u)}}if(!(t instanceof Uint8Array))throw new Error("The encoding must result in a Uint8Array. Fix your encoding chain.");return{encoding:e,data:t}},t}();e.Encoder=n;var n;!function(n){function r(t){return new n([t])}function i(t){return{encodings:[{kind:"ByteArray",type:4}],data:t}}function o(t){return{encodings:[{kind:"ByteArray",type:1}],data:new Uint8Array(t.buffer,t.byteOffset)}}function s(t){var n=e.Encoding.getDataType(t);if(1===n)return o(t);if(4===n)return i(t);for(var r=new Uint8Array(t.length*_[n]),s=b[n],a=new DataView(r.buffer),u=0,c=t.length;u<c;u++)s(a,u,t[u]);return{encodings:[{kind:"ByteArray",type:n}],data:r}}function a(t,n){for(var r=e.Encoding.getDataType(t),i=new Int32Array(t.length),o=0,s=t.length;o<s;o++)i[o]=Math.round(t[o]*n);return{encodings:[{kind:"FixedPoint",factor:n,srcType:r}],data:i}}function u(t){return function(e){return a(e,t)}}function c(t,n,r,i,o){var s=e.Encoding.getDataType(t);if(!t.length)return{encodings:[{kind:"IntervalQuantization",min:n,max:r,numSteps:i,srcType:s}],data:new Int32Array(0)};if(r<n){var a=n;n=r,r=a}for(var u=(r-n)/(i-1),c=new o(t.length),h=0,f=t.length;h<f;h++){var l=t[h];l<=n?c[h]=0:l>=r?c[h]=i:c[h]=0|Math.round((l-n)/u)}return{encodings:[{kind:"IntervalQuantization",min:n,max:r,numSteps:i,srcType:s}],data:c}}function h(t,e,n,r){return void 0===r&&(r=Int32Array),function(i){return c(i,t,e,n,r)}}function f(t){var n=e.Encoding.getDataType(t);if(void 0===n&&(t=new Int32Array(t),n=3),!t.length)return{encodings:[{kind:"RunLength",srcType:n,srcSize:0}],data:new Int32Array(0)};for(var r=2,i=1,o=t.length;i<o;i++)t[i-1]!==t[i]&&(r+=2);for(var s=new Int32Array(r),a=0,u=1,i=1,o=t.length;i<o;i++)t[i-1]!==t[i]?(s[a]=t[i-1],s[a+1]=u,u=1,a+=2):++u;return s[a]=t[t.length-1],s[a+1]=u,{encodings:[{kind:"RunLength",srcType:n,srcSize:t.length}],data:s}}function l(t){if(!e.Encoding.isSignedIntegerDataType(t))throw new Error("Only signed integer types can be encoded using delta encoding.");var n=e.Encoding.getDataType(t);if(void 0===n&&(t=new Int32Array(t),n=3),!t.length)return{encodings:[{kind:"Delta",origin:0,srcType:n}],data:new t.constructor(0)};var r=new t.constructor(t.length),i=t[0];r[0]=t[0];for(var o=1,s=t.length;o<s;o++)r[o]=t[o]-t[o-1];return r[0]=0,{encodings:[{kind:"Delta",origin:i,srcType:n}],data:r}}function d(t){for(var e=0,n=t.length;e<n;e++)if(t[e]<0)return!0;return!1}function p(t,e){for(var n=-e-1,r=0,i=0,o=t.length;i<o;i++){var s=t[i];r+=0===s?1:s===e||s===n?2:s>0?Math.ceil(s/e):Math.ceil(s/n)}return r}function m(t){var e=d(t),n=e?p(t,127):p(t,255),r=e?p(t,32767):p(t,65535);return 4*t.length<2*r?{isSigned:e,size:t.length,bytesPerElement:4}:2*r<n?{isSigned:e,size:r,bytesPerElement:2}:{isSigned:e,size:n,bytesPerElement:1}}function v(t,e){for(var n=e.isSigned?1===e.bytesPerElement?127:32767:1===e.bytesPerElement?255:65535,r=-n-1,i=t.length,o=e.isSigned?1===e.bytesPerElement?new Int8Array(e.size):new Int16Array(e.size):1===e.bytesPerElement?new Uint8Array(e.size):new Uint16Array(e.size),a=0,u=0;u<i;u++){var c=t[u];if(c>=0)for(;c>=n;)o[a]=n,++a,c-=n;else for(;c<=r;)o[a]=r,++a,c-=r;o[a]=c,++a}var h=s(o);return{encodings:[{kind:"IntegerPacking",byteCount:e.bytesPerElement,isUnsigned:!e.isSigned,srcSize:i},h.encodings[0]],data:h.data}}function y(t){if(!(t instanceof Int32Array))throw new Error("Integer packing can only be applied to Int32 data.");var e=m(t);return 4===e.bytesPerElement?s(t):v(t,e)}function g(e){var r=Object.create(null),i=[],o=0,s=t.Utils.ChunkedArray.create(function(t){return new Int32Array(t)},1024,1),a=new Int32Array(e.length);t.Utils.ChunkedArray.add(s,0);for(var u=0,c=0,h=e;c<h.length;c++){var d=h[c];if(null!==d&&void 0!==d){var p=r[d];void 0===p&&(o+=d.length,p=i.length,i[p]=d,r[d]=p,t.Utils.ChunkedArray.add(s,o)),a[u++]=p}else a[u++]=-1}var m=n.by(l).and(y).encode(t.Utils.ChunkedArray.compact(s)),v=n.by(l).and(f).and(y).encode(a);return{encodings:[{kind:"StringArray",dataEncoding:v.encoding,stringData:i.join(""),offsetEncoding:m.encoding,offsets:m.data}],data:v.data}}n.by=r;var b=(w={},w[2]=function(t,e,n){t.setInt16(2*e,n,!0)},w[5]=function(t,e,n){t.setUint16(2*e,n,!0)},w[3]=function(t,e,n){t.setInt32(4*e,n,!0)},w[6]=function(t,e,n){t.setUint32(4*e,n,!0)},w[32]=function(t,e,n){t.setFloat32(4*e,n,!0)},w[33]=function(t,e,n){t.setFloat64(8*e,n,!0)},w),_=(x={},x[2]=2,x[5]=2,x[3]=4,x[6]=4,x[32]=4,x[33]=8,x);n.byteArray=s,n.fixedPoint=u,n.intervalQuantizaiton=h,n.runLength=f,n.delta=l,n.integerPacking=y,n.stringArray=g;var w,x}(n=e.Encoder||(e.Encoder={}))}(e=t.Binary||(t.Binary={}))}(i||(i={}));var i;!function(t){var e;!function(t){t.VERSION="0.3.0";var e;!function(t){function e(t){var e;if(t instanceof Int8Array)e=1;else if(t instanceof Int16Array)e=2;else if(t instanceof Int32Array)e=3;else if(t instanceof Uint8Array)e=4;else if(t instanceof Uint16Array)e=5;else if(t instanceof Uint32Array)e=6;else if(t instanceof Float32Array)e=32;else{if(!(t instanceof Float64Array))throw new Error("Unsupported integer data type.");e=33}return e}function n(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array}t.getDataType=e,t.isSignedIntegerDataType=n}(e=t.Encoding||(t.Encoding={}))}(e=t.Binary||(t.Binary={}))}(i||(i={}));var i;!function(t){var e;!function(e){function n(t,e){for(var n=0;n<2;n++)if(t[n]>e[n])return!1;return!0}function r(r){var i=[0,3];try{var o=new Uint8Array(r),s=e.MessagePack.decode(o);if(!n(i,s.version.match(/(\d)\.(\d)\.\d/).slice(1)))return t.ParserResult.error("Unsupported format version. Current "+s.version+", required "+i.join(".")+".");
var a=new e.File(s);return t.ParserResult.success(a)}catch(e){return t.ParserResult.error(""+e)}}e.parse=r}(e=t.Binary||(t.Binary={}))}(i||(i={}));var i;!function(t){var e;!function(t){function e(e,n,r){var i,o=!1;e.typedArray?i=new e.typedArray(r):(o=!0,i=new Array(r));for(var s=new Uint8Array(r),a=e.presence,u=e.number?e.number:e.string,c=!0,h=0,f=0,l=n;f<l.length;f++)for(var d=l[f],p=d.data,m=0,v=d.count;m<v;m++){var y=void 0;a&&0!==(y=a(p,m))?(s[h]=y,o&&(i[h]=null),c=!1):(s[h]=0,i[h]=u(p,m)),h++}var g=e.encoder?e.encoder:t.Encoder.by(t.Encoder.stringArray),b=g.encode(i),_=void 0;if(!c){var w=t.Encoder.by(t.Encoder.runLength).and(t.Encoder.byteArray).encode(s);_=w.data.length<s.length?w:t.Encoder.by(t.Encoder.byteArray).encode(s)}return{name:e.name,data:b,mask:_}}var n=function(){function n(e){this.dataBlocks=[],this.data={encoder:e,version:t.VERSION,dataBlocks:this.dataBlocks}}return n.prototype.startDataBlock=function(t){this.dataBlocks.push({header:(t||"").replace(/[ \n\t]/g,"").toUpperCase(),categories:[]})},n.prototype.writeCategory=function(t,n){if(!this.data)throw new Error("The writer contents have already been encoded, no more writing.");if(!this.dataBlocks.length)throw new Error("No data block created.");var r=n&&n.length?n.map(function(e){return t(e)}):[t(void 0)],i=r.filter(function(t){return t&&t.count>0});if(i.length){var o=i.reduce(function(t,e){return t+e.count},0);if(o){for(var s=i[0],a={name:s.desc.name,columns:[],rowCount:o},u=i.map(function(t){return{data:t.data,count:t.count}}),c=0,h=s.desc.fields;c<h.length;c++){var f=h[c];a.columns.push(e(f,u,o))}this.dataBlocks[this.dataBlocks.length-1].categories.push(a)}}},n.prototype.encode=function(){this.encodedData=t.MessagePack.encode(this.data),this.data=null,this.dataBlocks=null},n.prototype.flush=function(t){t.writeBinary(this.encodedData)},n}();t.Writer=n}(e=t.Binary||(t.Binary={}))}(i||(i={}));var s;!function(e){e.Promise=t}(s||(s={})),function(t){var e;!function(e){e.Rx=o,e.Promise=t.Promise;var n;!function(t){t.CIF=i}(n=e.Formats||(e.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){t.VERSION={number:"3.0.4",date:"Feb 17 2017"}}(e=t.Core||(t.Core={}))}(s||(s={}));var s,a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,o=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){a.label=n[1];break}if(6===n[0]&&a.label<s[1]){a.label=s[1],s=n;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(n);break}s[2]&&a.ops.pop(),a.trys.pop();continue}n=e.call(t,a)}catch(t){n=[6,t],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}};!function(t){var e;!function(t){function e(t){return new n(t)}t.computation=e;var n=function(){function e(t){this.computation=t}return e.prototype.run=function(t){return this.runWithContext(t).result},e.prototype.runWithContext=function(e){var n=this,i=e?e:new r;return{progress:i.progressStream,result:new t.Promise(function(t,e){return a(n,void 0,void 0,function(){var n,r;return u(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),i.started(),[4,this.computation(i)];case 1:return n=o.sent(),t(n),[3,4];case 2:return r=o.sent(),e(r),[3,4];case 3:return i.finished(),[7];case 4:return[2]}})})})}},e}();t.Computation=n,function(n){function i(n){return e(function(){return t.Promise.resolve(n)})}function o(n){return e(function(){return t.Promise.reject(n)})}function s(){return new r}n.resolve=i,n.reject=o,n.createContext=s,n.Aborted="Aborted",n.UpdateProgressDelta=100}(n=t.Computation||(t.Computation={}));var r=function(){function e(){var e=this;this._abortRequested=!1,this._abortRequester=function(){e._abortRequested=!0},this.progressTick=new t.Rx.Subject,this._progress={message:"Working...",current:0,max:0,isIndeterminate:!0,requestAbort:void 0},this.progressStream=new t.Rx.BehaviorSubject(this._progress),this.startEndCounter=0,this.progressTick.throttle(1e3/15).subscribe(function(t){e.progressStream.onNext({message:t.message,isIndeterminate:t.isIndeterminate,current:t.current,max:t.max,requestAbort:t.requestAbort})})}return Object.defineProperty(e.prototype,"isAbortRequested",{get:function(){return this._abortRequested},enumerable:!0,configurable:!0}),e.prototype.checkAborted=function(){if(this._abortRequested)throw n.Aborted},e.prototype.requestAbort=function(){try{this._abortRequester&&this._abortRequester.call(null)}catch(t){}},Object.defineProperty(e.prototype,"progress",{get:function(){return this.progressTick},enumerable:!0,configurable:!0}),e.prototype.updateProgress=function(e,n,r,i){return void 0===r&&(r=NaN),void 0===i&&(i=NaN),this.checkAborted(),this._progress.message=e,"boolean"==typeof n?this._progress.requestAbort=n?this._abortRequester:void 0:(n&&(this._abortRequester=n),this._progress.requestAbort=n?this._abortRequester:void 0),isNaN(r)?this._progress.isIndeterminate=!0:(this._progress.isIndeterminate=!1,this._progress.current=r,this._progress.max=i),this.progressTick.onNext(this._progress),new t.Promise(function(t){return setTimeout(t,0)})},e.prototype.started=function(){this.startEndCounter++},e.prototype.finished=function(){if(this.startEndCounter--,this.startEndCounter<=0&&(this.progressTick.onCompleted(),this.progressStream.onCompleted()),this.startEndCounter<0)throw"Bug in code somewhere, Computation.resolve/reject called too many times."},e}()}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){function e(){var t=Object.create(null);return t.__=void 0,delete t.__,t}var n;!function(t){function n(t,e,n){for(var r=Object.prototype.hasOwnProperty,i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];if(r.call(t,s)){var a=t[s];void 0!==a&&e(a,s,n)}}}function r(){var t=Object.create(s);return t.data=e(),t.size=0,t}function i(t){for(var e=r(),n=0,i=t;n<i.length;n++){var o=i[n];e.set(o[0],o[1])}return e}function o(t){for(var e=r(),n=Object.prototype.hasOwnProperty,i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];if(n.call(t,s)){var a=t[s];e.set(s,a)}}return e}var s={set:function(t,e){void 0===this.data[t]&&void 0!==e&&this.size++,this.data[t]=e},get:function(t){return this.data[t]},delete:function(t){return void 0!==this.data[t]&&(delete this.data[t],this.size--,!0)},has:function(t){return void 0!==this.data[t]},clear:function(){this.data=e(),this.size=0},forEach:function(t,e){n(this.data,t,void 0!==e?e:void 0)}};t.create=r,t.ofArray=i,t.ofObject=o}(n=t.FastMap||(t.FastMap={}));var r;!function(t){function n(t,e,n){for(var r=Object.prototype.hasOwnProperty,i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];r.call(t,s)&&null===t[s]&&e(s,n)}}function r(){var t=Object.create(o);return t.data=e(),t.size=0,t}function i(t){for(var e=r(),n=0,i=t.length;n<i;n++)e.add(t[n]);return e}var o={add:function(t){return null!==this.data[t]&&(this.data[t]=null,this.size++,!0)},delete:function(t){return null===this.data[t]&&(delete this.data[t],this.size--,!0)},has:function(t){return null===this.data[t]},clear:function(){this.data=e(),this.size=0},forEach:function(t,e){n(this.data,t,void 0!==e?e:void 0)}};t.create=r,t.ofArray=i}(r=t.FastSet||(t.FastSet={}))}(e=t.Utils||(t.Utils={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){function n(t,e,n){for(var r,i=e,o=t,s=n,a=0,u=Object.keys(e);a<u.length;a++){var c=u[a];r=i[c],void 0!==r?o[c]=r:n&&(o[c]=s[c])}if(n)for(var h=0,f=Object.keys(n);h<f.length;h++){var c=f[h];r=o[c],void 0===r&&(o[c]=s[c])}return t}function r(t,e){var n,r,i,o,s,a,u,c=0,h=0,f=!0,l=!1;e=Math.max(0,e)||0;var d=function(){var h=e-(performance.now()-o);if(h<=0){r&&clearTimeout(r);var f=u;r=a=u=void 0,f&&(c=performance.now(),i=t.apply(s,n),a||r||(n=s=null))}else a=setTimeout(d,h)},p=function(){a&&clearTimeout(a),r=a=u=void 0,(f||h!==e)&&(c=performance.now(),i=t.apply(s,n),a||r||(n=s=null))};return function(){n=arguments,o=performance.now(),s=this,u=f&&(a||!l);var m=!1,v=!1;if(0===h)v=l&&!a;else{r||l||(c=o);var y=h-(o-c),g=y<=0;g?(r&&(r=clearTimeout(r)),c=o,i=t.apply(s,n)):r||(r=setTimeout(p,y))}return m&&a?a=clearTimeout(a):a||e===h||(a=setTimeout(d,e)),v&&(m=!0,i=t.apply(s,n)),!m||a||r||(n=s=null),i}}e.FastNumberParsers=t.Formats.CIF.Utils.FastNumberParsers,e.extend=n,e.debounce=r}(e=t.Utils||(t.Utils={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(t){return function(e){return new t(e)}}function r(){return function(t){return new Array(t)}}function i(t){return new u(t)}function o(t,n){for(var r=e.builder(n),i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];if(Object.prototype.hasOwnProperty.call(t,s)){var a=t[s];a&&r.addColumn(s,a)}}return r.seal()}function s(t,e){for(var n=Object.create(null),r=0,i=t.columns;r<i.length;r++){var o=i[r];!function(t,e,n,r){Object.defineProperty(e,t.name,{enumerable:!0,configurable:!1,get:function(){return r[n.index]}})}(o,n,e,t[o.name])}return n}e.typedColumn=n,e.customColumn=r,e.stringColumn=function(t){return new Array(t)},e.stringNullColumn=function(t){return new Array(t)},e.builder=i,e.ofDefinition=o;var a=function(){function e(e,n,r){this.__rowIndexer={index:0},this.count=e,this.indices=new Int32Array(e),this.columns=[];for(var i=0;i<e;i++)this.indices[i]=i;for(var o=0,a=n;o<a.length;o++){var u=a[o],c=r[u.name];t.ChunkedArray.is(c)&&(c=t.ChunkedArray.compact(c)),Object.defineProperty(this,u.name,{enumerable:!0,configurable:!1,writable:!1,value:c}),this.columns[this.columns.length]=u}this.__row=s(this,this.__rowIndexer)}return e.prototype.getBuilder=function(t){for(var e=new u(t),n=0,r=this.columns;n<r.length;n++){var i=r[n];e.addColumn(i.name,i.creator)}return e},e.prototype.getRawData=function(){var t=this;return this.columns.map(function(e){return t[e.name]})},e.prototype.getRow=function(t){return this.__rowIndexer.index=t,this.__row},e}(),u=function(){function t(t){this.columns=[],this.count=t}return t.prototype.addColumn=function(t,e){var n=e(this.count);return Object.defineProperty(this,t,{enumerable:!0,configurable:!1,writable:!1,value:n}),this.columns[this.columns.length]={name:t,creator:e},n},t.prototype.getRawData=function(){var t=this;return this.columns.map(function(e){return t[e.name]})},t.prototype.seal=function(){return new a(this.count,this.columns,this)},t}()}(e=t.DataTable||(t.DataTable={}))}(e=t.Utils||(t.Utils={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){function e(t){var e=new Int32Array(t.size);return t.forEach(function(t,e){e.array[e.index++]=t},{array:e,index:0}),Array.prototype.sort.call(e,function(t,e){return t-e}),e}function n(t){for(var e=[],n=0;n<t;n++)e[n]=0;return e}function r(t){var e=[];if(!t)return e;e[0]=.1;for(var n=0;n<t;n++)e[n]=0;return e}t.integerSetToSortedTypedArray=e,t.makeNativeIntArray=n,t.makeNativeFloatArray=r;var i;!function(t){function e(t){return t.creator&&t.chunkSize}function n(t,e,n,r,i){return t.currentIndex>=t.chunkSize&&(t.currentIndex=0,t.current=t.creator(t.chunkSize),t.parts[t.parts.length]=t.current),t.current[t.currentIndex++]=e,t.current[t.currentIndex++]=n,t.current[t.currentIndex++]=r,t.current[t.currentIndex++]=i,t.elementCount++}function r(t,e,n,r){return t.currentIndex>=t.chunkSize&&(t.currentIndex=0,t.current=t.creator(t.chunkSize),t.parts[t.parts.length]=t.current),t.current[t.currentIndex++]=e,t.current[t.currentIndex++]=n,t.current[t.currentIndex++]=r,t.elementCount++}function i(t,e,n){return t.currentIndex>=t.chunkSize&&(t.currentIndex=0,t.current=t.creator(t.chunkSize),t.parts[t.parts.length]=t.current),t.current[t.currentIndex++]=e,t.current[t.currentIndex++]=n,t.elementCount++}function o(t,e){return t.currentIndex>=t.chunkSize&&(t.currentIndex=0,t.current=t.creator(t.chunkSize),t.parts[t.parts.length]=t.current),t.current[t.currentIndex++]=e,t.elementCount++}function s(t){var e,n=t.creator(t.elementSize*t.elementCount),r=(t.parts.length-1)*t.chunkSize,i=0;if(t.parts.length>1)if(t.parts[0].buffer)for(var o=0;o<t.parts.length-1;o++)n.set(t.parts[o],t.chunkSize*o);else for(var o=0;o<t.parts.length-1;o++){i=t.chunkSize*o,e=t.parts[o];for(var s=0;s<t.chunkSize;s++)n[i+s]=e[s]}if(t.current.buffer&&t.currentIndex>=t.chunkSize)n.set(t.current,t.chunkSize*(t.parts.length-1));else for(var o=0;o<t.currentIndex;o++)n[r+o]=t.current[o];return n}function a(t){return void 0===t&&(t=262144),p(function(t){return new Float32Array(t)},t,3)}function u(t){return void 0===t&&(t=262144),p(function(t){return new Uint32Array(t)},t,3)}function c(t){return void 0===t&&(t=131072),p(function(t){return new Int32Array(t)},t,2)}function h(t){return void 0===t&&(t=131072),p(function(t){return new Int32Array(t)},t,1)}function f(t){return void 0===t&&(t=131072),p(function(t){return new Int32Array(t)},t,1)}function l(t){return void 0===t&&(t=131072),p(function(t){return new Float32Array(t)},t,1)}function d(t){return void 0===t&&(t=131072),p(function(t){return[]},t,1)}function p(t,e,n){e|=0,e<=0&&(e=1);var r=e*n,i=t(r);return{elementSize:n,chunkSize:r,creator:t,current:i,parts:[i],currentIndex:0,elementCount:0}}t.is=e,t.add4=n,t.add3=r,t.add2=i,t.add=o,t.compact=s,t.forVertex3D=a,t.forIndexBuffer=u,t.forTokenIndices=c,t.forIndices=h,t.forInt32=f,t.forFloat32=l,t.forArray=d,t.create=p}(i=t.ChunkedArray||(t.ChunkedArray={}));var o;!function(t){function e(t,e,n,r){var i=t.array;i[t.currentIndex++]=e,i[t.currentIndex++]=n,i[t.currentIndex++]=r,t.elementCount++}function n(t,e,n){var r=t.array;r[t.currentIndex++]=e,r[t.currentIndex++]=n,t.elementCount++}function r(t,e){t.array[t.currentIndex++]=e,t.elementCount++}function i(t){return f(function(t){return new Float32Array(t)},t,3)}function o(t){return f(function(t){return new Int32Array(t)},t,3)}function s(t){return f(function(t){return new Int32Array(t)},t,2)}function a(t){return f(function(t){return new Int32Array(t)},t,1)}function u(t){return f(function(t){return new Int32Array(t)},t,1)}function c(t){return f(function(t){return new Float32Array(t)},t,1)}function h(t){return f(function(t){return[]},t,1)}function f(t,e,n){return e|=0,{array:t(e*n),currentIndex:0,elementCount:0}}t.add3=e,t.add2=n,t.add=r,t.forVertex3D=i,t.forIndexBuffer=o,t.forTokenIndices=s,t.forIndices=a,t.forInt32=u,t.forFloat32=c,t.forArray=h,t.create=f}(o=t.ArrayBuilder||(t.ArrayBuilder={}))}(e=t.Utils||(t.Utils={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.perfGetTime=function(){return"undefined"!=typeof window&&window.performance?function(){return window.performance.now()}:"undefined"!=typeof process&&"undefined"!==process.hrtime?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:function(){return+new Date}}()}(e||(e={}));var n=function(){function n(){this.starts=t.FastMap.create(),this.ends=t.FastMap.create()}return n.currentTime=function(){return e.perfGetTime()},n.prototype.start=function(t){this.starts.set(t,e.perfGetTime())},n.prototype.end=function(t){this.ends.set(t,e.perfGetTime())},n.format=function(t){if(isNaN(t))return"n/a";for(var e=Math.floor(t/36e5),n=Math.floor(t/6e4%60),r=Math.floor(t/1e3%60),i=Math.floor(t%1e3).toString();i.length<3;)i="0"+i;return e>0?e+"h"+n+"m"+r+"."+i+"s":n>0?n+"m"+r+"."+i+"s":r>0?r+"."+i+"s":t.toFixed(0)+"ms"},n.prototype.formatTime=function(t){return n.format(this.time(t))},n.prototype.formatTimeSum=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.format(this.timeSum.apply(this,t))},n.prototype.time=function(t){var e=this.starts.get(t),n=this.ends.get(t);return this.starts.delete(t),this.ends.delete(t),n-e},n.prototype.timeSum=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,i=0,o=e.map(function(e){return t.ends.get(e)-t.starts.get(e)});i<o.length;i++){var s=o[i];r+=s}return r},n}();t.PerformanceMonitor=n}(e=t.Utils||(t.Utils={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t){return t.name&&t.parse}function n(t,e){e=e.toLowerCase().trim();for(var n=0,r=t;n<r.length;n++)for(var i=r[n],o=0,s=i.shortcuts;o<s.length;o++){var a=s[o];if(a.toLowerCase()===e)return i}}function r(t){return new RegExp(t.extensions.map(function(t){return"(\\"+t+")"}).join("|")+"(\\.gz){0,1}$","i")}function i(t){return t.map(function(t){return t.extensions.map(function(t){return t+","+t+".gz"}).join(",")}).join(",")}function o(t,e){for(var n=0,i=e;n<i.length;n++){var o=i[n];if(r(o).test(t))return o}}t.is=e,t.fromShortcut=n,t.formatRegExp=r,t.formatFileFilters=i,t.getFormat=o}(e=t.FormatInfo||(t.FormatInfo={}));var n;!function(t){function e(t,e){return void 0===e&&(e=-1),new r(t,e)}function n(t,e){return void 0===e&&(e=[]),new i(t,e)}t.error=e,t.success=n}(n=t.ParserResult||(t.ParserResult={}));var r=function(){function t(t,e){this.message=t,this.line=e,this.isError=!0}return t.prototype.toString=function(){return this.line>=0?"[Line "+this.line+"] "+this.message:this.message},t}();t.ParserError=r;var i=function(){function t(t,e){this.result=t,this.warnings=e,this.isError=!1}return t}();t.ParserSuccess=i;var o;!function(t){function e(t){var e=new Int32Array(1.61*t.tokens.length|0);e.set(t.tokens),t.tokens=e,t.tokensLenMinus2=e.length-2|0}function n(t,n,r){t.count>=t.tokensLenMinus2&&e(t),t.tokens[t.count++]=n,t.tokens[t.count++]=r}function r(t){return{tokensLenMinus2:t-2|0,count:0,tokens:new Int32Array(t)}}t.addToken=n,t.create=r}(o=t.TokenIndexBuilder||(t.TokenIndexBuilder={}));var s;!function(t){function e(){return Object.create(null)}function n(t,e){if(e.length>6)return e;var n=t[e];return void 0!==n?n:(t[e]=e,e)}t.create=e,t.get=n}(s=t.ShortStringPool||(t.ShortStringPool={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){var o,s,a,u=t.Geometry.LinearAlgebra.Matrix4.identity();for(o=1;o<=3;o++){for(s=1;s<=3;s++)a=n+"["+o+"]["+s+"]",t.Geometry.LinearAlgebra.Matrix4.setValue(u,o-1,s-1,e.getColumn(n+"["+o+"]["+s+"]").getFloat(i));t.Geometry.LinearAlgebra.Matrix4.setValue(u,o-1,3,e.getColumn(r+"["+o+"]").getFloat(i))}return u}function r(t,e,n){var r=0;if(!n||!n.isDefined)return e;for(r=t+1;r<e&&n.areValuesEqual(r-1,r);r++);return r}function i(e){for(var n=t.Utils.FastMap.create(),r=0,i=I;r<i.length;r++){var o=i[r];n.set(o,e.getColumn(o))}return n}function o(e,n,i){for(var o=r(e,n,i.get("pdbx_PDB_model_num")),s=t.Utils.DataTable.ofDefinition(t.Structure.Tables.Atoms,o-e),a=t.Utils.DataTable.ofDefinition(t.Structure.Tables.Positions,o-e),u=a.x,c=i.get("Cartn_x"),h=a.y,f=i.get("Cartn_y"),l=a.z,d=i.get("Cartn_z"),p=s.id,m=i.get("id"),v=s.altLoc,y=i.get("label_alt_id"),g=s.rowIndex,b=s.residueIndex,_=s.chainIndex,w=s.entityIndex,x=s.name,I=i.get("label_atom_id"),S=s.elementSymbol,A=i.get("type_symbol"),k=s.occupancy,E=i.get("occupancy"),P=s.tempFactor,T=i.get("B_iso_or_equiv"),F=s.authName,D=i.get("auth_atom_id"),M=i.get("label_asym_id"),N=i.get("label_entity_id"),R=i.get("pdbx_PDB_ins_code"),q=i.get("auth_seq_id"),O=i.get("pdbx_PDB_model_num"),z=0,U=0,B=0,j=e,L=e;L<o;L++){var V=L-e;p[V]=m.getInteger(L),u[V]=c.getFloat(L),h[V]=f.getFloat(L),l[V]=d.getFloat(L),S[V]=A.getString(L)||C.ElementSymbol,x[V]=I.getString(L)||S[V],F[V]=D.getString(L)||x[V],v[V]=y.getString(L),k[V]=E.getFloat(L),P[V]=T.getFloat(L);var Y=!1,X=!q.areValuesEqual(j,L)||!R.areValuesEqual(j,L);M.areValuesEqual(j,L)||(Y=!0,X=!0),N.areValuesEqual(j,L)||(B++,Y=!0,X=!0),X&&U++,Y&&z++,g[V]=L,b[V]=U,_[V]=z,w[V]=B,j=L}var Z=O.isDefined?O.getString(e)||C.ModelId:C.ModelId;return{atoms:s,positions:a,modelId:Z,endRow:o}}function s(e,n){var r=n.count,i=n.residueIndex,o=n.chainIndex,s=n.entityIndex,a=t.Utils.DataTable.ofDefinition(t.Structure.Tables.Residues,n.residueIndex[n.count-1]+1),u=t.Utils.DataTable.ofDefinition(t.Structure.Tables.Chains,n.chainIndex[n.count-1]+1),c=t.Utils.DataTable.ofDefinition(t.Structure.Tables.Entities,n.entityIndex[n.count-1]+1),h=a.name,f=a.seqNumber,l=a.asymId,d=a.authName,p=a.authSeqNumber,m=a.authAsymId,v=a.insCode,y=a.entityId,g=a.isHet,b=a.atomStartIndex,_=a.atomEndIndex,w=a.chainIndex,x=a.entityIndex,I=u.asymId,S=u.entityId,A=u.authAsymId,k=u.atomStartIndex,E=u.atomEndIndex,P=u.residueStartIndex,T=u.residueEndIndex,F=u.entityIndex,D=c.entityId,M=c.type,N=c.atomStartIndex,R=c.atomEndIndex,q=c.residueStartIndex,O=c.residueEndIndex,z=c.chainStartIndex,U=c.chainEndIndex,B=e.get("label_comp_id"),j=e.get("label_seq_id"),L=e.get("label_asym_id"),V=e.get("auth_comp_id"),Y=e.get("auth_seq_id"),X=e.get("auth_asym_id"),Z=e.get("group_PDB"),H=e.get("label_entity_id"),G=e.get("pdbx_PDB_ins_code"),W=0,Q=0,J=0,K=0,$=0,tt=0,et=0,nt=0,rt=0,it=0;for(it=0;it<r;it++)i[it]!==i[W]&&(h[et]=B.getString(W)||C.ResidueName,f[et]=j.getInteger(W),l[et]=L.getString(W)||C.AsymId,d[et]=V.getString(W)||h[et],p[et]=Y.getInteger(W),m[et]=X.getString(W)||l[et],v[et]=G.getString(W),y[et]=H.getString(W)||C.EntityId,g[et]=Z.stringEquals(W,"HETATM")?1:0,b[et]=W,_[et]=it,w[et]=nt,x[et]=rt,et++,W=it),o[it]!==o[Q]&&(I[nt]=L.getString(Q)||C.AsymId,A[nt]=X.getString(Q)||I[nt],S[nt]=H.getString(Q)||C.EntityId,P[nt]=tt,T[nt]=et,k[nt]=Q,E[nt]=it,F[nt]=rt,nt++,Q=it,tt=et),s[it]!==s[J]&&(D[rt]=H.getString(J)||C.EntityId,M[rt]="unknown",N[rt]=J,R[rt]=it,q[rt]=$,O[rt]=et,z[rt]=K,U[rt]=nt,rt++,J=it,K=nt,$=et);return D[rt]=H.getString(J)||C.EntityId,M[rt]="unknown",N[rt]=J,R[rt]=it,q[rt]=$,O[rt]=et+1,z[rt]=K,U[rt]=nt+1,I[nt]=L.getString(Q)||C.AsymId,A[nt]=X.getString(Q)||I[nt],S[nt]=H.getString(Q)||C.EntityId,P[nt]=tt,T[nt]=et+1,k[nt]=Q,E[nt]=it,F[nt]=rt,h[et]=B.getString(W)||C.ResidueName,f[et]=j.getInteger(W),l[et]=L.getString(W)||C.AsymId,d[et]=V.getString(W)||h[et],p[et]=Y.getInteger(W),m[et]=X.getString(W)||l[et],v[et]=G.getString(W),b[et]=W,_[et]=it,w[et]=nt,x[et]=rt,g[et]=Z.stringEquals(W,"HETATM")?1:0,{residues:a,chains:u,entities:c}}function a(t,e){var n;if(t){var r={},i=t.getColumn("type"),o=t.getColumn("id");for(n=0;n<t.rowCount;n++){var s=(i.getString(n)||"").toLowerCase(),a=o.getString(n)||C.EntityId;switch(s){case"polymer":case"non-polymer":case"water":r[a]=s;break;default:r[a]="unknown"}}for(n=0;n<e.count;n++){var u=r[e.entityId[n]];void 0!==u&&(e.type[n]=u)}}}function u(e,n,r,i){return new t.Structure.PolyResidueIdentifier(n.getString(e)||C.AsymId,r.getInteger(e),i.getString(e))}function c(t,e,n,r){if("polymer"!==n.type[e.entityIndex[r]])return!1;for(var i=!1,o=!1,s=t.name,a=0,u=e.atomStartIndex[r],c=e.atomEndIndex[r];u<c;u++){var h=s[u];if(i||"CA"!==h?o||"O"!==h||(o=!0,a++):(i=!0,a++),2===a)break}return i&&o||i&&!e.isHet[r]}function h(t,e,n,r){if(S[e.name[r]]||"polymer"!==n.type[e.entityIndex[r]])return!1;var i=!1,o=!1,s=!1,a=!1,u=t.name,c=0,h=e.atomStartIndex[r],f=e.atomEndIndex[r];if(f-h===1&&!e.isHet[h]&&"P"===u[h])return!0;for(var l=h;l<f;l++){var d=u[l];if(i||"O5'"!==d?o||"C3'"!==d?s||"N3"!==d?a||"P"!==d||(a=!0,c++):(s=!0,c++):(o=!0,c++):(i=!0,c++),4===c)break}return i&&o&&s&&a}function f(e,n,r,i,o,s){for(var a=n.asymId,u=n.entityIndex,f=0,l=i,d=i,p=o;l<p;){if(h(e,n,r,l)){for(d=l+1;d<p&&a[l]===a[d]&&u[l]===u[d]&&h(e,n,r,d);)d++;f=5}else if(c(e,n,r,l)){for(d=l+1;d<p&&a[l]===a[d]&&u[l]===u[d]&&c(e,n,r,d);)d++;f=4}else{for(d=l+1;d<p&&a[l]===a[d]&&u[l]===u[d]&&!h(e,n,r,d)&&!c(e,n,r,d);)d++;f=0}var m=new t.Structure.SecondaryStructureElement(f,new t.Structure.PolyResidueIdentifier(n.asymId[l],n.seqNumber[l],n.insCode[l]),new t.Structure.PolyResidueIdentifier(n.asymId[d-1],n.seqNumber[d-1],n.insCode[d-1]));m.startResidueIndex=l,m.endResidueIndex=d,s[s.length]=m,l=d}}function l(e,n){for(var r=[],i=e.authSeqNumber,o=0,s=n;o<s.length;o++){for(var a=s[o],u=a.startResidueIndex,c=a.endResidueIndex-1,h=a.startResidueIndex;h<c;h++)if(i[h+1]-i[h]!==1){var f=new t.Structure.SecondaryStructureElement(a.type,a.startResidueId,a.endResidueId,a.info);f.startResidueIndex=u,f.endResidueIndex=h+1,r[r.length]=f,u=h+1}if(u===a.startResidueIndex)r[r.length]=a;else{var f=new t.Structure.SecondaryStructureElement(a.type,a.startResidueId,a.endResidueId,a.info);f.startResidueIndex=u,f.endResidueIndex=a.endResidueIndex,r[r.length]=f}}return r}function d(e,n){for(var r=n.residues,i=r.count,o=r.asymId,s=r.seqNumber,a=r.insCode,u=void 0,c="",h=t.Utils.FastMap.create(),f=t.Utils.FastMap.create(),l=0,d=e;l<d.length;l++){var m=d[l];c=m.startResidueId.asymId+" "+m.startResidueId.seqNumber,m.startResidueId.insCode&&(c+=" "+m.startResidueId.insCode),h.set(c,m),c=m.endResidueId.asymId+" "+m.endResidueId.seqNumber,m.endResidueId.insCode&&(c+=" "+m.endResidueId.insCode),f.set(c,m)}for(var v=0;v<i;v++)c=o[v]+" "+s[v],a[v]&&(c+=" "+a[v]),u=h.get(c),u&&(u.startResidueIndex=v,u.endResidueIndex=v+1),u=f.get(c),u&&(u.startResidueIndex<0&&(u.startResidueIndex=v),u.endResidueIndex=v+1);u&&(u.endResidueIndex=i);for(var y=[],g=0,b=e;g<b.length;g++){var m=b[g];m.startResidueIndex<0||m.endResidueIndex<0||3===m.type&&m.length<3||m.endResidueIndex>=0&&m.startResidueIndex>=0&&(y[y.length]=m)}y.sort(function(t,e){return t.startResidueIndex-e.startResidueIndex});for(var v=0;v<y.length-1;v++)y[v+1].startResidueIndex-y[v].endResidueIndex===-1&&y[v+1].startResidueIndex++;if(!y.length)return y;for(var _=[y[0]],v=1;v<y.length;v++){var w=_[_.length-1],x=y[v];x.startResidueIndex<w.endResidueIndex?p(w,x):_[_.length]=x}return _}function p(t,e){e.endResidueIndex>t.endResidueIndex&&(t.endResidueIndex=e.endResidueIndex)}function m(e,n,r){var i,o=[],s=[],a=e.getCategory("_struct_conf"),c=e.getCategory("_struct_sheet_range");if(a){var h=a.getColumn("conf_type_id");if(h){var p=a.getColumn("beg_label_asym_id"),m=a.getColumn("beg_label_seq_id"),v=a.getColumn("pdbx_beg_PDB_ins_code"),y=a.getColumn("end_label_asym_id"),g=a.getColumn("end_label_seq_id"),b=a.getColumn("pdbx_end_PDB_ins_code"),_=a.getColumn("pdbx_PDB_helix_class");for(i=0;i<a.rowCount;i++){var w=void 0;switch((h.getString(i)||"").toUpperCase()){case"HELX_P":w=1;break;case"TURN_P":w=2}w&&(o[o.length]=new t.Structure.SecondaryStructureElement(w,u(i,p,m,v),u(i,y,g,b),{helixClass:_.getString(i)}))}}}if(c){var p=c.getColumn("beg_label_asym_id"),m=c.getColumn("beg_label_seq_id"),v=c.getColumn("pdbx_beg_PDB_ins_code"),y=c.getColumn("end_label_asym_id"),g=c.getColumn("end_label_seq_id"),b=c.getColumn("pdbx_end_PDB_ins_code"),x=c.getColumn("symmetry"),C=c.getColumn("sheet_id");for(i=0;i<c.rowCount;i++)o[o.length]=new t.Structure.SecondaryStructureElement(3,u(i,p,m,v),u(i,y,g,b),{symmetry:x.getString(i),sheetId:C.getString(i),id:C.getString(i)})}var I=o.length>0?d(o,r):[],S=r.residues,A=S.count;if(0===I.length)return f(n,S,r.entities,0,A,s),l(S,s);var k=I.length-1;for(I[0].startResidueIndex>0&&f(n,S,r.entities,0,I[0].startResidueIndex,s),i=0;i<k;i++)s[s.length]=I[i],I[i+1].startResidueIndex-I[i].endResidueIndex>0&&f(n,S,r.entities,I[i].endResidueIndex,I[i+1].startResidueIndex,s);return s[s.length]=I[k],I[k].endResidueIndex<A&&f(n,S,r.entities,I[k].endResidueIndex,A,s),l(S,s)}function v(t,e){for(var n=t.secondaryStructureIndex,r=0,i=0,o=e;i<o.length;i++){for(var s=o[i],a=s.startResidueIndex;a<s.endResidueIndex;a++)n[a]=r;r++}return n}function y(t){for(var e,n=/\(?([^\(\)]+)\)?]*/g,r=[],i=[];e=n.exec(t);)r[r.length]=e[1];return r.forEach(function(t){var e=[];t.split(",").forEach(function(t){var n=t.indexOf("-");if(n>0)for(var r=parseInt(t.substring(0,n)),i=parseInt(t.substr(n+1)),o=r;o<=i;o++)e[e.length]=o.toString();else e[e.length]=t.trim()}),i[i.length]=e}),i}function g(e){var r=e.getCategory("_pdbx_struct_assembly"),i=e.getCategory("_pdbx_struct_assembly_gen"),o=e.getCategory("_pdbx_struct_oper_list");if(r&&i&&o){var s,a={},u=[],c=t.Utils.FastMap.create(),h=i.getColumn("assembly_id"),f=i.getColumn("oper_expression"),l=i.getColumn("asym_id_list");for(s=0;s<i.rowCount;s++){var d=h.getString(s);if(!d)return;var p=c.get(d);p||(p=new t.Structure.AssemblyGen(d),c.set(d,p),u.push(p)),p.gens.push(new t.Structure.AssemblyGenEntry(y(f.getString(s)),l.getString(s).split(",")))}var m=o.getColumn("id"),v=o.getColumn("name");for(s=0;s<o.rowCount;s++){var g=n(o,"matrix","vector",s);if(!g)return;var b=new t.Structure.AssemblyOperator(m.getString(s),v.getString(s),g);a[b.id]=b}return new t.Structure.AssemblyInfo(a,u)}}function b(e){var r=e.getCategory("_cell"),i=e.getCategory("_symmetry"),o=e.getCategory("_atom_sites"),s="",a=[1,1,1],u=[90,90,90],c=t.Geometry.LinearAlgebra.Matrix4.identity(),h=!1;if(r&&i&&(s=i.getColumn("space_group_name_H-M").getString(0),a=[r.getColumn("length_a").getFloat(0),r.getColumn("length_b").getFloat(0),r.getColumn("length_c").getFloat(0)],u=[r.getColumn("angle_alpha").getFloat(0),r.getColumn("angle_beta").getFloat(0),r.getColumn("angle_gamma").getFloat(0)],s&&!a.every(function(t){return isNaN(t)||0===t})&&!a.every(function(t){return isNaN(t)||0===t}))){var f=function(t){return t*t},l=function(t){return t*Math.PI/180},d=a[0],p=a[1],m=a[2],v=l(u[0]),y=l(u[1]),g=l(u[2]),b=d*p*m*Math.sqrt(1-f(Math.cos(v))-f(Math.cos(y))-f(Math.cos(g))+2*Math.cos(v)*Math.cos(y)*Math.cos(g)),_=t.Geometry.LinearAlgebra.Matrix4.ofRows([[d,p*Math.cos(g),m*Math.cos(y),0],[0,p*Math.sin(g),m*(Math.cos(v)-Math.cos(y)*Math.cos(g))/Math.sin(g),0],[0,0,b/(d*p*Math.sin(g)),0],[0,0,0,1]]),w=t.Geometry.LinearAlgebra.Matrix4.identity();if(t.Geometry.LinearAlgebra.Matrix4.invert(w,_),o){var x=n(o,"fract_transf_matrix","fract_transf_vector",0);x&&(c=x,t.Geometry.LinearAlgebra.Matrix4.areEqual(w,x,1e-4)||(h=!0))}else c=w;return new t.Structure.SymmetryInfo(s,a,u,c,h)}}function _(e){if(e&&e.rowCount){for(var n=new t.Structure.ComponentBondInfo,r=e.getColumn("comp_id"),i=e.getColumn("atom_id_1"),o=e.getColumn("atom_id_2"),s=e.getColumn("value_order"),a=e.rowCount,u=n.newEntry(r.getString(0)),c=0;c<a;c++){var h=r.getString(c),f=i.getString(c),l=o.getString(c),d=s.getString(c);u.id!==h&&(u=n.newEntry(h));var p=void 0;switch(d.toLowerCase()){case"sing":p=1;break;case"doub":case"delo":p=2;break;case"trip":p=3;break;case"quad":p=4;break;default:p=0}u.add(f,l,p)}return n}}function w(e,n,r){var i,u=o(e,n.getCategory("_atom_site").rowCount,r),c=u.atoms,h=u.positions,f=u.modelId,l=u.endRow,d=s(r,c),p=n.getCategory("_entry");i=p&&p.getColumn("id").isDefined?p.getColumn("id").getString(0):n.header,a(n.getCategory("_entity"),d.entities);var y=m(n,c,d);return v(d.residues,y),{model:t.Structure.Molecule.Model.create({id:i,modelId:f,data:{atoms:c,residues:d.residues,chains:d.chains,entities:d.entities,bonds:{component:_(n.getCategory("_chem_comp_bond"))},secondaryStructure:y,symmetryInfo:b(n),assemblyInfo:g(n)},positions:h,source:t.Structure.Molecule.Model.Source.File}),endRow:l}}function x(e){var n=[],r=e.getCategory("_atom_site"),o=0;if(!r)throw"'_atom_site' category is missing in the input.";var s,a=e.getCategory("_entry"),u=i(r);for(s=a&&a.getColumn("id").isDefined?a.getColumn("id").getString(0):e.header;o<r.rowCount;){var c=w(o,e,u),h=c.model,f=c.endRow;n.push(h),o=f}var l=void 0,d=e.getCategory("_exptl");return d&&(l=d.getColumn("method").getString(0)||void 0),t.Structure.Molecule.create(s,n,{experimentMethod:l})}var C;!function(t){t.ElementSymbol="X",t.ResidueName="UNK",t.AsymId="",t.EntityId="1",t.ModelId="1"}(C||(C={}));var I=["id","Cartn_x","Cartn_y","Cartn_z","label_atom_id","type_symbol","occupancy","B_iso_or_equiv","auth_atom_id","label_alt_id","label_comp_id","label_seq_id","label_asym_id","auth_comp_id","auth_seq_id","auth_asym_id","group_PDB","label_entity_id","pdbx_PDB_ins_code","pdbx_PDB_model_num"],S={
ALA:!0,ARG:!0,ASP:!0,CYS:!0,GLN:!0,GLU:!0,GLY:!0,HIS:!0,ILE:!0,LEU:!0,LYS:!0,MET:!0,PHE:!0,PRO:!0,SER:!0,THR:!0,TRP:!0,TYR:!0,VAL:!0,ASN:!0,PYL:!0,SEC:!0};e.ofDataBlock=x}(n=e.mmCIF||(e.mmCIF={}))}(n=e.Molecule||(e.Molecule={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=function(){function t(t,e,n,r){this.header=t,this.crystInfo=e,this.models=n,this.data=r}return t.prototype.makeEntities=function(){var t=["data_ent","loop_","_entity.id","_entity.type","_entity.src_method","_entity.pdbx_description","_entity.formula_weight","_entity.pdbx_number_of_molecules","_entity.details","_entity.pdbx_mutation","_entity.pdbx_fragment","_entity.pdbx_ec","1 polymer man polymer 0.0 0 ? ? ? ?","2 non-polymer syn non-polymer 0.0 0 ? ? ? ?","3 water nat water 0.0 0 ? ? ? ?"].join("\n"),n=e.CIF.Text.parse(t);if(n.isError)throw n.toString();return n.result.dataBlocks[0].getCategory("_entity")},t.prototype.toCifFile=function(){var t={dot:n.Parser.getDotRange(this.data.length),question:n.Parser.getQuestionmarkRange(this.data.length),numberTokens:n.Parser.getNumberRanges(this.data.length),data:this.data},r=new e.CIF.Text.File(this.data),i=new e.CIF.Text.DataBlock(this.data,this.header.id);if(r.dataBlocks.push(i),i.addCategory(this.makeEntities()),this.crystInfo){var o=this.crystInfo.toCifCategory(this.header.id),s=o.cell,a=o.symm;i.addCategory(s),i.addCategory(a)}return i.addCategory(this.models.toCifCategory(i,t)),r},t}();n.MoleculeData=r;var i=function(){function t(t){this.id=t}return t}();n.Header=i;var o=function(){function t(t){this.record=t}return t.prototype.getValue=function(t,e){var n=this.record.substr(6,9).trim();return n.length?n:"."},t.prototype.toCifCategory=function(t){var n=["_cell.entry_id           '"+t+"'","_cell.length_a           "+this.getValue(6,9),"_cell.length_b           "+this.getValue(15,9),"_cell.length_c           "+this.getValue(24,9),"_cell.angle_alpha        "+this.getValue(33,7),"_cell.angle_beta         "+this.getValue(40,7),"_cell.angle_gamma        "+this.getValue(48,7),"_cell.Z_PDB              "+this.getValue(66,4),"_cell.pdbx_unique_axis   ?","_symmetry.entry_id                         '"+t+"'","_symmetry.space_group_name_H-M             '"+this.getValue(55,11)+"'","_symmetry.pdbx_full_space_group_name_H-M   ?","_symmetry.cell_setting                     ?","_symmetry.Int_Tables_number                ?","_symmetry.space_group_name_Hall            ?"].join("\n"),r=e.CIF.Text.parse(n);if(r.isError)throw new Error(r.toString());return{cell:r.result.dataBlocks[0].getCategory("_cell"),symm:r.result.dataBlocks[0].getCategory("_symmetry")}},t}();n.CrystStructureInfo=o;var s=function(){function t(t,e){this.helixTokens=t,this.sheetTokens=e}return t.prototype.toCifCategory=function(t){},t}();n.SecondaryStructure=s;var a=function(){function e(t,e,n){this.idToken=t,this.atomTokens=e,this.atomCount=n}return e.prototype.writeToken=function(e,n){t.Utils.ArrayBuilder.add2(n,this.atomTokens[2*e],this.atomTokens[2*e+1])},e.prototype.writeTokenCond=function(e,n,r){var i=this.atomTokens[2*e],o=this.atomTokens[2*e+1];i===o?t.Utils.ArrayBuilder.add2(n,r.start,r.end):t.Utils.ArrayBuilder.add2(n,i,o)},e.prototype.writeRange=function(e,n){t.Utils.ArrayBuilder.add2(n,e.start,e.end)},e.prototype.tokenEquals=function(t,e,n,r){var i=n.length;if(i!==e-t)return!1;for(var o=n.length-1;o>=0;o--)if(r.charCodeAt(o+t)!==n.charCodeAt(o))return!1;return!0},e.prototype.getEntityType=function(t,e){var n=14*t;if(this.tokenEquals(this.atomTokens[2*n],this.atomTokens[2*n+1],"HETATM",e)){var r=this.atomTokens[2*(n+4)],i=this.atomTokens[2*(n+4)+1];return this.tokenEquals(r,i,"HOH",e)||this.tokenEquals(r,i,"WTR",e)||this.tokenEquals(r,i,"SOL",e)?3:2}return 1},e.prototype.writeCifTokens=function(t,e,n){for(var r={RECORD:0,SERIAL:1,ATOM_NAME:2,ALT_LOC:3,RES_NAME:4,CHAIN_ID:5,RES_SEQN:6,INS_CODE:7,X:8,Y:9,Z:10,OCCUPANCY:11,TEMP_FACTOR:12,ELEMENT:13},i=14,o=0;o<this.atomCount;o++){var s=o*i;this.writeToken(s+r.RECORD,e),this.writeToken(s+r.SERIAL,e),this.writeToken(s+r.ELEMENT,e),this.writeToken(s+r.ATOM_NAME,e),this.writeTokenCond(s+r.ALT_LOC,e,n.dot),this.writeToken(s+r.RES_NAME,e),this.writeToken(s+r.CHAIN_ID,e),this.writeRange(n.numberTokens.get(this.getEntityType(o,n.data)),e),this.writeToken(s+r.RES_SEQN,e),this.writeTokenCond(s+r.INS_CODE,e,n.dot),this.writeToken(s+r.X,e),this.writeToken(s+r.Y,e),this.writeToken(s+r.Z,e),this.writeToken(s+r.OCCUPANCY,e),this.writeToken(s+r.TEMP_FACTOR,e),this.writeRange(n.question,e),this.writeRange(n.question,e),this.writeRange(n.question,e),this.writeRange(n.question,e),this.writeRange(n.question,e),this.writeRange(n.question,e),this.writeToken(s+r.RES_SEQN,e),this.writeToken(s+r.RES_NAME,e),this.writeToken(s+r.CHAIN_ID,e),this.writeToken(s+r.ATOM_NAME,e),this.writeRange(t,e)}},e}();a.COLUMNS=["_atom_site.group_PDB","_atom_site.id","_atom_site.type_symbol","_atom_site.label_atom_id","_atom_site.label_alt_id","_atom_site.label_comp_id","_atom_site.label_asym_id","_atom_site.label_entity_id","_atom_site.label_seq_id","_atom_site.pdbx_PDB_ins_code","_atom_site.Cartn_x","_atom_site.Cartn_y","_atom_site.Cartn_z","_atom_site.occupancy","_atom_site.B_iso_or_equiv","_atom_site.Cartn_x_esd","_atom_site.Cartn_y_esd","_atom_site.Cartn_z_esd","_atom_site.occupancy_esd","_atom_site.B_iso_or_equiv_esd","_atom_site.pdbx_formal_charge","_atom_site.auth_seq_id","_atom_site.auth_comp_id","_atom_site.auth_asym_id","_atom_site.auth_atom_id","_atom_site.pdbx_PDB_model_num"],n.ModelData=a;var u=function(){function n(t){this.models=t}return n.prototype.toCifCategory=function(n,r){for(var i=0,o=0,s=this.models;o<s.length;o++){var u=s[o];i+=u.atomCount}for(var c=26,h=t.Utils.ArrayBuilder.forTokenIndices(i*c),f=0,l=this.models;f<l.length;f++){var u=l[f];u.writeCifTokens(u.idToken,h,r)}return new e.CIF.Text.Category(n.data,"_atom_site",0,0,a.COLUMNS,h.array,i*c)},n}();n.ModelsData=u}(r=n.PDB||(n.PDB={}))}(n=e.Molecule||(e.Molecule={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){function r(t,e){return o.parse(t,e)}var i=function(){function t(t){this.data=t,this.trimmedToken={start:0,end:0},this.line=0,this.position=0,this.length=t.length}return t.prototype.moveToNextLine=function(){for(;this.position<this.length&&10!==this.data.charCodeAt(this.position);)this.position++;return this.position++,this.line++,this.position},t.prototype.moveToEndOfLine=function(){for(;this.position<this.length;){var t=this.data.charCodeAt(this.position);if(10===t||13===t)return this.position;this.position++}return this.position},t.prototype.startsWith=function(t,e){for(var n=e.length-1;n>=0;n--)if(this.data.charCodeAt(n+t)!==e.charCodeAt(n))return!1;return!0},t.prototype.trim=function(t,e){for(;t<e&&32===this.data.charCodeAt(t);)t++;for(;e>t&&32===this.data.charCodeAt(e-1);)e--;this.trimmedToken.start=t,this.trimmedToken.end=e},t.prototype.tokenizeAtomRecord=function(t){var n=this.position,r=this.position,i=this.moveToEndOfLine(),o=i-r;return!(o<66)&&(this.trim(r,r+6),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),r=n+6,this.trim(r,r+5),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),r=n+12,this.trim(r,r+4),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),32===this.data.charCodeAt(n+16)?e.TokenIndexBuilder.addToken(t,0,0):e.TokenIndexBuilder.addToken(t,n+16,n+17),r=n+17,this.trim(r,r+3),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),e.TokenIndexBuilder.addToken(t,n+21,n+22),r=n+22,this.trim(r,r+4),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),32===this.data.charCodeAt(n+26)?e.TokenIndexBuilder.addToken(t,0,0):e.TokenIndexBuilder.addToken(t,n+26,n+27),r=n+30,this.trim(r,r+8),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),r=n+38,this.trim(r,r+8),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),r=n+46,this.trim(r,r+8),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),r=n+54,this.trim(r,r+6),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),r=n+60,this.trim(r,r+6),e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end),o>=78?(r=n+76,this.trim(r,r+2),this.trimmedToken.start<this.trimmedToken.end?e.TokenIndexBuilder.addToken(t,this.trimmedToken.start,this.trimmedToken.end):e.TokenIndexBuilder.addToken(t,n+12,n+13)):e.TokenIndexBuilder.addToken(t,n+12,n+13),!0)},t}(),o=function(){function r(){}return r.tokenizeAtom=function(t,n){if(!n.tokenizeAtomRecord(t))return new e.ParserError("Invalid ATOM/HETATM record.",n.line)},r.tokenize=function(t,o){for(var s=new i(o),a=o.length,u=e.TokenIndexBuilder.create(4096),c=0,h=[],f=void 0,l={start:0,end:0};s.position<a;){var d=!0;switch(o.charCodeAt(s.position)){case 65:if(s.startsWith(s.position,"ATOM")){u||(u=e.TokenIndexBuilder.create(4096));var p=r.tokenizeAtom(u,s);if(c++,p)return p}break;case 67:if(s.startsWith(s.position,"CRYST1")){var m=s.position,v=s.moveToEndOfLine();f=new n.CrystStructureInfo(o.substring(m,v))}break;case 69:if(s.startsWith(s.position,"ENDMDL")&&c>0)0===h.length&&(l={start:o.length+3,end:o.length+4}),u&&h.push(new n.ModelData(l,u.tokens,c)),c=0,u=null;else if(s.startsWith(s.position,"END")){var m=s.position,v=s.moveToEndOfLine();s.trim(m,v),s.trimmedToken.end-s.trimmedToken.start===3&&(d=!1)}break;case 72:if(s.startsWith(s.position,"HETATM")){u||(u=e.TokenIndexBuilder.create(4096));var p=r.tokenizeAtom(u,s);if(c++,p)return p}break;case 77:if(s.startsWith(s.position,"MODEL")){c>0&&(0===h.length&&(l={start:o.length+3,end:o.length+4}),u&&h.push(new n.ModelData(l,u.tokens,c)));var m=s.position+6,v=s.moveToEndOfLine();s.trim(m,v),l={start:s.trimmedToken.start,end:s.trimmedToken.end},(c>0||!u)&&(u=e.TokenIndexBuilder.create(4096)),c=0}}if(s.moveToNextLine(),!d)break}var y=o+".?0123";return c>0&&(0===h.length&&(l={start:o.length+3,end:o.length+4}),u&&h.push(new n.ModelData(l,u.tokens,c))),new n.MoleculeData(new n.Header(t),f,new n.ModelsData(h),y)},r.getDotRange=function(t){return{start:t-6,end:t-5}},r.getNumberRanges=function(e){for(var n=t.Utils.FastMap.create(),r=0;r<4;r++)n.set(r,{start:e-4+r,end:e-3+r});return n},r.getQuestionmarkRange=function(t){return{start:t-5,end:t-4}},r.parse=function(t,n){var i=r.tokenize(t,n);return i instanceof e.ParserError?e.ParserResult.error(i.message,i.line):e.ParserResult.success(i.toCifFile())},r}();n.Parser=o,n.toCifFile=r}(r=n.PDB||(n.PDB={}))}(n=e.Molecule||(e.Molecule={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){function r(n,r){var i=n.split(/\r?\n/g),o=i[0].trim();o.length||(o="SDF");var s=i[3],a=+s.substr(0,3),u=+s.substr(3,3);return{id:r?r:o,atomCount:a,bondCount:u,atoms:t.Utils.DataTable.ofDefinition(t.Structure.Tables.Atoms,a),positions:t.Utils.DataTable.ofDefinition(t.Structure.Tables.Positions,a),bonds:t.Utils.DataTable.ofDefinition(t.Structure.Tables.Bonds,u),lines:i,currentLine:4,error:void 0,stringPool:e.ShortStringPool.create()}}function i(n,r){var i=r.lines[r.currentLine],o=r.atoms,s=r.positions,a=e.ShortStringPool.get(r.stringPool,i.substr(31,3).trim());o.id[n]=n,o.elementSymbol[n]=a,o.name[n]=a,o.authName[n]=a,o.occupancy[n]=1,o.rowIndex[n]=r.currentLine,s.x[n]=t.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(i,0,10),s.y[n]=t.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(i,10,20),s.z[n]=t.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(i,20,30)}function o(t){for(var e=0;e<t.atomCount;e++)i(e,t),t.currentLine++}function s(e,n){var r=n.lines[n.currentLine],i=n.bonds;switch(i.atomAIndex[e]=t.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(r,0,3)-1,i.atomBIndex[e]=t.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(r,3,6)-1,t.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(r,6,9)){case 1:i.type[e]=1;break;case 2:i.type[e]=2;break;case 3:i.type[e]=3;break;case 4:i.type[e]=4;break;default:i.type[e]=0}}function a(t){for(var e=0;e<t.bondCount;e++)s(e,t),t.currentLine++}function u(e){var n=t.Utils.DataTable.ofDefinition(t.Structure.Tables.Residues,1),r=t.Utils.DataTable.ofDefinition(t.Structure.Tables.Chains,1),i=t.Utils.DataTable.ofDefinition(t.Structure.Tables.Entities,1);n.isHet[0]=1,n.insCode[0]=null,n.name[0]=n.authName[0]="UNK",n.atomEndIndex[0]=r.atomEndIndex[0]=i.atomEndIndex[0]=e.atomCount,n.asymId[0]=n.authAsymId[0]=r.asymId[0]=r.authAsymId[0]="X",n.entityId[0]=r.entityId[0]=i.entityId[0]="1",r.residueEndIndex[0]=i.residueEndIndex[0]=0,i.chainEndIndex[0]=1,i.type[0]="non-polymer";var o=new t.Structure.PolyResidueIdentifier("X",0,null),s=[new t.Structure.SecondaryStructureElement(0,o,o)];return s[0].startResidueIndex=0,s[0].endResidueIndex=1,t.Structure.Molecule.Model.create({id:e.id,modelId:"1",data:{atoms:e.atoms,residues:n,chains:r,entities:i,bonds:{covalent:e.bonds},secondaryStructure:s,symmetryInfo:void 0,assemblyInfo:void 0},positions:e.positions,source:t.Structure.Molecule.Model.Source.File})}function c(n,i){try{var s=r(n,i);o(s),a(s);var c=u(s);if(s.error)return e.ParserResult.error(s.error,s.currentLine+1);var h=t.Structure.Molecule.create(i?i:s.id,[c]);return e.ParserResult.success(h)}catch(t){return e.ParserResult.error(""+t)}}n.parse=c}(r=n.SDF||(n.SDF={}))}(n=e.Molecule||(e.Molecule={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){function r(r,i){var o=this;return function(s,c){return t.computation(function(t){return a(o,void 0,void 0,function(){var o,a,h;return u(this,function(u){switch(u.label){case 0:return[4,t.updateProgress("Parsing...")];case 1:if(u.sent(),o=i(s,c),o.isError)throw o.toString();if(a=o.result,!a.dataBlocks.length)throw"The "+r+" data does not contain a data block.";return[4,t.updateProgress("Creating representation...")];case 2:return u.sent(),h=n.mmCIF.ofDataBlock(a.dataBlocks[0]),[2,e.ParserResult.success(h,a.dataBlocks.length>1?["The input data contains multiple data blocks, only the first one was parsed. To parse all data blocks, use the function 'mmCIF.ofDataBlock' separately for each block."]:void 0)]}})})})}}var i;!function(i){var o=this;i.mmCIF={name:"mmCIF",shortcuts:["mmcif","cif"],extensions:[".cif"],parse:r("CIF",e.CIF.Text.parse)},i.mmBCIF={name:"mmCIF (Binary)",shortcuts:["mmbcif","bcif","binarycif"],extensions:[".bcif"],isBinary:!0,parse:r("BinaryCIF",e.CIF.Binary.parse)},i.PDB={name:"PDB",shortcuts:["pdb","ent"],extensions:[".pdb",".ent"],parse:r("PDB",function(t,e){return n.PDB.toCifFile(e&&e.id||"PDB",t)})},i.SDF={name:"SDF",shortcuts:["sdf","mol"],extensions:[".sdf",".mol"],parse:function(r,i){return t.computation(function(t){return a(o,void 0,void 0,function(){var o;return u(this,function(s){switch(s.label){case 0:return[4,t.updateProgress("Parsing...")];case 1:if(s.sent(),o=n.SDF.parse(r,i&&i.id||void 0),o.isError)throw o.toString();return[2,e.ParserResult.success(o.result)]}})})})}},i.All=[i.mmCIF,i.mmBCIF,i.PDB,i.SDF]}(i=n.SupportedFormats||(n.SupportedFormats={}))}(n=e.Molecule||(e.Molecule={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){for(var n=t.length,r=0;r<n;r++)t[r]=e}var n=function(){function t(t,e){this.data=t,this.dimensions=e,this.len=this.dimensions[0]*this.dimensions[1]*this.dimensions[2],this.nX=this.dimensions[0],this.nY=this.dimensions[1]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.getAt=function(t){return this.data[t]},t.prototype.setAt=function(t,e){this.data[t]=e},t.prototype.get=function(t,e,n){return this.data[this.nX*(n*this.nY+e)+t|0]},t.prototype.set=function(t,e,n,r){this.data[this.nX*(n*this.nY+e)+t|0]=r},t.prototype.fill=function(t){e(this.data,t)},t}();t.Field3DZYX=n;var r;!function(t){function e(t,e,n,r,i,o,s,a,u,c){return{cellSize:t,cellAngles:e,origin:n,hasSkewMatrix:r,skewMatrix:i,data:o,basis:a,dataDimensions:s,valuesInfo:u,attributes:c?c:{},isNormalized:!1}}function n(t){if(!t.isNormalized){for(var e=t.data,n=t.valuesInfo,r=n.mean,i=n.sigma,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=0,u=e.length;a<u;a++){var c=(e.getAt(a)-r)/i;e.setAt(a,c),c<o&&(o=c),c>s&&(s=c)}t.valuesInfo.min=o,t.valuesInfo.max=s,t.isNormalized=!0}}function r(t){if(t.isNormalized){for(var e=t.data,n=t.valuesInfo,r=n.mean,i=n.sigma,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=0,u=e.length;a<u;a++){var c=i*e.getAt(a)+r;e.setAt(a,c),c<o&&(o=c),c>s&&(s=c)}t.valuesInfo.min=o,t.valuesInfo.max=s,t.isNormalized=!1}}t.create=e,t.normalize=n,t.denormalize=r}(r=t.Data||(t.Data={}))}(e=t.Density||(t.Density={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){function r(t){return i.parse(t)}n.parse=r;var i;!function(n){function r(t,e,n){for(var r=[],i=0;i<n;i++)r[i]=t(e+i);return r}function i(n){var i=1024,a=!1,u=new DataView(n,0,i),c=[],h=u.getInt32(12,!1);if(2!==h&&(a=!0,h=u.getInt32(12,!0),2!==h))return t.ParserResult.error("Only CCP4 modes 0 and 2 are supported.");var f=function(t){return u.getInt32(4*t,a)},l=function(t){return u.getFloat32(4*t,a)},d={extent:r(f,0,3),mode:h,nxyzStart:r(f,4,3),grid:r(f,7,3),cellDimensions:r(l,10,3),cellAngles:r(l,13,3),crs2xyz:r(f,16,3),min:l(19),max:l(20),mean:l(21),spacegroupNumber:f(22),symBytes:f(23),skewFlag:f(24),skewMatrix:r(l,25,9),skewTranslation:r(l,34,3),origin2k:r(l,49,3)},p=n.byteLength-4*d.extent[0]*d.extent[1]*d.extent[2];if(p!==i+d.symBytes)if(p===i)c.push("File contains bogus symmetry record.");else{if(p<i)return t.ParserResult.error("File appears truncated and doesn't match header.");if(!(p>i&&p<1048576))return t.ParserResult.error("File is MUCH larger than expected and doesn't match header.");p=i+d.symBytes,c.push("File is larger than expected and doesn't match header. Continuing file load, good luck!")}0===d.grid[0]&&d.extent[0]>0&&(d.grid[0]=d.extent[0]-1,c.push("Fixed X interval count.")),0===d.grid[1]&&d.extent[1]>0&&(d.grid[1]=d.extent[1]-1,c.push("Fixed Y interval count.")),0===d.grid[2]&&d.extent[2]>0&&(d.grid[2]=d.extent[2]-1,c.push("Fixed Z interval count.")),0===d.crs2xyz[0]&&0===d.crs2xyz[1]&&0===d.crs2xyz[2]&&(c.push("All crs2xyz records are zero. Setting crs2xyz to 1, 2, 3."),d.crs2xyz=[1,2,3]),0===d.cellDimensions[0]&&0===d.cellDimensions[1]&&0===d.cellDimensions[2]&&(c.push("Cell dimensions are all zero. Setting to 1.0, 1.0, 1.0. Map file will not align with other structures."),d.cellDimensions[0]=1,d.cellDimensions[1]=1,d.cellDimensions[2]=1);var m=Math.PI/180*d.cellAngles[0],v=Math.PI/180*d.cellAngles[1],y=Math.PI/180*d.cellAngles[2],g=d.cellDimensions[0]/d.grid[0],b=d.cellDimensions[1]/d.grid[1],_=d.cellDimensions[2]/d.grid[2],w=Math.cos(v),x=(Math.cos(m)-Math.cos(v)*Math.cos(y))/Math.sin(y),C=Math.sqrt(1-w*w-x*x),I=[g,0,0],S=[Math.cos(y)*b,Math.sin(y)*b,0],A=[w*_,x*_,C*_],k=[0,0,0];k[d.crs2xyz[0]-1]=0,k[d.crs2xyz[1]-1]=1,k[d.crs2xyz[2]-1]=2;var E;E=0===d.origin2k[0]&&0===d.origin2k[1]&&0===d.origin2k[2]?[I[0]*d.nxyzStart[k[0]]+S[0]*d.nxyzStart[k[1]]+A[0]*d.nxyzStart[k[2]],S[1]*d.nxyzStart[k[1]]+A[1]*d.nxyzStart[k[2]],A[2]*d.nxyzStart[k[2]]]:[d.origin2k[k[0]],d.origin2k[k[1]],d.origin2k[k[2]]];var P,T,F=[d.extent[k[0]],d.extent[k[1]],d.extent[k[2]]],D=new Float32Array(16);for(P=0;P<3;P++){for(T=0;T<3;T++)D[4*T+P]=d.skewMatrix[3*P+T];D[12+P]=d.skewTranslation[P]}var M=13330===new Uint16Array(new Uint8Array([18,52]).buffer)[0],N=a===M?o(new Float32Array(n,i+d.symBytes,F[0]*F[1]*F[2]),a,F,d.extent,k,d.mean):s(new DataView(n,i+d.symBytes),a,F,d.extent,k,d.mean),R=new e.Field3DZYX(N.data,F),q=e.Data.create(d.cellDimensions,d.cellAngles,E,0!==d.skewFlag,D,R,F,{x:I,y:S,z:A},{min:d.min,max:d.max,mean:d.mean,sigma:N.sigma},{spacegroupIndex:d.spacegroupNumber-1});return t.ParserResult.success(q,c)}function o(t,e,n,r,i,o){var s,a,u,c,h,f,l,d,p=new Float32Array(n[0]*n[1]*n[2]),m=[0,0,0],v=0,y=.1,g=0,b=.1,_=i[0],w=i[1],x=i[2];for(s=r[0],a=r[1],u=r[2],l=n[0],d=n[0]*n[1],f=0;f<u;f++)for(m[2]=f,h=0;h<a;h++)for(m[1]=h,c=0;c<s;c++)m[0]=c,y=t[v],b=y-o,g+=b*b,p[m[_]+m[w]*l+m[x]*d]=y,v+=1;return g/=s*a*u,g=Math.sqrt(g),{data:p,sigma:g}}function s(t,e,n,r,i,o){var s,a,u,c,h,f,l,d,p=new Float32Array(n[0]*n[1]*n[2]),m=[0,0,0],v=0,y=.1,g=0,b=.1,_=i[0],w=i[1],x=i[2];for(s=r[0],a=r[1],u=r[2],l=n[0],d=n[0]*n[1],f=0;f<u;f++)for(m[2]=f,h=0;h<a;h++)for(m[1]=h,c=0;c<s;c++)m[0]=c,y=t.getFloat32(v,e),b=y-o,g+=b*b,p[m[_]+m[w]*l+m[x]*d]=y,v+=4;return g/=s*a*u,g=Math.sqrt(g),{data:p,sigma:g}}n.parse=i}(i||(i={}))}(n=e.CCP4||(e.CCP4={}))}(e=t.Density||(t.Density={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){function r(t){return i.parse(t)}n.parse=r;var i;!function(n){function r(n){function r(t){for(var e=[],n=0;n<3;n++)e[n]=s.getColumn(t+"["+n+"]").getFloat(0);return e}function o(t){return s.getColumn(t).getFloat(0)}var s=n.getCategory("_density_info");if(!s)return t.ParserResult.error("_density_info category is missing.");if(!n.getCategory("_density_data"))return t.ParserResult.error("_density_data category is missing.");var a={name:s.getColumn("name").getString(0),grid:r("grid"),axisOrder:r("axis_order"),extent:r("extent"),origin:r("origin"),cellSize:r("cell_size"),cellAngles:r("cell_angles"),mean:o("mean"),sigma:o("sigma"),spacegroupNumber:0|o("spacegroup_number")},u=Math.PI/180*a.cellAngles[0],c=Math.PI/180*a.cellAngles[1],h=Math.PI/180*a.cellAngles[2],f=a.cellSize[0]/a.grid[0],l=a.cellSize[1]/a.grid[1],d=a.cellSize[2]/a.grid[2],p=Math.cos(c),m=(Math.cos(u)-Math.cos(c)*Math.cos(h))/Math.sin(h),v=Math.sqrt(1-p*p-m*m),y=[f,0,0],g=[Math.cos(h)*l,Math.sin(h)*l,0],b=[p*d,m*d,v*d],_=[0,0,0];_[a.axisOrder[0]]=0,_[a.axisOrder[1]]=1,_[a.axisOrder[2]]=2;var w=[a.origin[_[0]],a.origin[_[1]],a.origin[_[2]]],x=[y[0]*w[0]+g[0]*w[1]+b[0]*w[2],g[1]*w[1]+b[1]*w[2],b[2]*w[2]],C=[a.extent[_[0]],a.extent[_[1]],a.extent[_[2]]],I=i(n.getCategory("_density_data").getColumn("values"),C,a.extent,_,a.mean),S=new e.Field3DZYX(I.data,C),A=e.Data.create(a.cellSize,a.cellAngles,x,!1,void 0,S,C,{x:y,y:g,z:b},{min:I.min,max:I.max,mean:a.mean,sigma:a.sigma},{spacegroupIndex:a.spacegroupNumber-1,name:a.name});return t.ParserResult.success(A)}function i(t,e,n,r,i){var o,s,a,u,c,h,f,l,d=new Float32Array(e[0]*e[1]*e[2]),p=[0,0,0],m=0,v=.1,y=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,b=r[0],_=r[1],w=r[2];for(o=n[0],s=n[1],a=n[2],f=e[0],l=e[0]*e[1],h=0;h<a;h++)for(p[2]=h,c=0;c<s;c++)for(p[1]=c,u=0;u<o;u++)p[0]=u,v=t.getFloat(m),v<y?y=v:v>g&&(g=v),d[p[b]+p[_]*f+p[w]*l]=v,m+=1;return{data:d,min:y,max:g}}n.parse=r}(i||(i={}))}(n=e.CIF||(e.CIF={}))}(e=t.Density||(t.Density={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){function r(t){return o.parse(t)}function i(t,e){return t.filter(function(t){return t!==e})}n.parse=r;var o;!function(n){function r(n){var r=512,s=!1,a=new Uint8Array(n,0,r),u=String.fromCharCode.apply(null,a),c=u.search("origin"),h=u.search("extent"),f=u.search("grid"),l=u.search("cell"),d=u.search("prod"),p=u.search("plus"),m=u.search("sigma"),v=u.substring(c+"origin".length,h).replace(" ","").split(" "),y=i(v,""),g=u.substring(h+"extent".length,f).split(" "),b=i(g,""),_=u.substring(f+"grid".length,l).split(" "),w=i(_,""),x=u.substring(l+"cell".length,d).split(" "),C=i(x,""),I=u.substring(d+"prod".length,p).split(" "),S=i(I,""),A=u.substring(p+"plus".length,m).split(" "),k=i(A,""),E=[],P=0,T={extent:b.map(function(t){return parseInt(t)}),mode:P,nxyzStart:[0,0,0],grid:w.map(function(t){return parseInt(t)}),cellDimensions:C.slice(0,3).map(function(t){return parseFloat(t)}),cellAngles:C.slice(3,6).map(function(t){return parseFloat(t)}),crs2xyz:[1,2,3],min:0,max:0,mean:0,symBytes:0,skewFlag:0,skewMatrix:0,skewTranslation:0,origin2k:y.map(function(t){return parseFloat(t)}),prod:S.map(function(t){return parseFloat(t)})[0],plus:k.map(function(t){return parseFloat(t)})[0]},F=512;if(F!==r+T.symBytes)if(F===r)E.push("File contains bogus symmetry record.");else{if(F<r)return t.ParserResult.error("File appears truncated and doesn't match header.");if(!(F>r&&F<1048576))return t.ParserResult.error("File is MUCH larger than expected and doesn't match header.");F=r+T.symBytes,E.push("File is larger than expected and doesn't match header. Continuing file load, good luck!")}0===T.grid[0]&&T.extent[0]>0&&(T.grid[0]=T.extent[0]-1,E.push("Fixed X interval count.")),0===T.grid[1]&&T.extent[1]>0&&(T.grid[1]=T.extent[1]-1,E.push("Fixed Y interval count.")),0===T.grid[2]&&T.extent[2]>0&&(T.grid[2]=T.extent[2]-1,E.push("Fixed Z interval count.")),0===T.crs2xyz[0]&&0===T.crs2xyz[1]&&0===T.crs2xyz[2]&&(E.push("All crs2xyz records are zero. Setting crs2xyz to 1, 2, 3."),T.crs2xyz=[1,2,3]),0===T.cellDimensions[0]&&0===T.cellDimensions[1]&&0===T.cellDimensions[2]&&(E.push("Cell dimensions are all zero. Setting to 1.0, 1.0, 1.0. Map file will not align with other structures."),T.cellDimensions[0]=1,T.cellDimensions[1]=1,T.cellDimensions[2]=1);var D=Math.PI/180*T.cellAngles[0],M=Math.PI/180*T.cellAngles[1],N=Math.PI/180*T.cellAngles[2],R=T.cellDimensions[0]/T.grid[0],q=T.cellDimensions[1]/T.grid[1],O=T.cellDimensions[2]/T.grid[2],z=Math.cos(M),U=(Math.cos(D)-Math.cos(M)*Math.cos(N))/Math.sin(N),B=Math.sqrt(1-z*z-U*U),j=[R,0,0],L=[Math.cos(N)*q,Math.sin(N)*q,0],V=[z*O,U*O,B*O],Y=[0,0,0];Y[T.crs2xyz[0]-1]=0,Y[T.crs2xyz[1]-1]=1,Y[T.crs2xyz[2]-1]=2;var X;X=0===T.origin2k[0]&&0===T.origin2k[1]&&0===T.origin2k[2]?[j[0]*T.nxyzStart[Y[0]]+L[0]*T.nxyzStart[Y[1]]+V[0]*T.nxyzStart[Y[2]],L[1]*T.nxyzStart[Y[1]]+V[1]*T.nxyzStart[Y[2]],V[2]*T.nxyzStart[Y[2]]]:[T.origin2k[Y[0]],T.origin2k[Y[1]],T.origin2k[Y[2]]];var Z,H,G=[T.extent[Y[0]],T.extent[Y[1]],T.extent[Y[2]]],W=new Float32Array(16);for(Z=0;Z<3;Z++){for(H=0;H<3;H++)W[4*H+Z]=0;W[12+Z]=0}var Q=13330===new Uint16Array(new Uint8Array([18,52]).buffer)[0];s=Q;var J=o(new Uint8Array(n,r+T.symBytes),s,G,T.extent,Y,T.mean,T.prod,T.plus),K=new e.Field3DZYX(J.data,G),$=e.Data.create(T.cellDimensions,T.cellAngles,X,0!==T.skewFlag,W,K,G,{x:j,y:L,z:V},{min:J.minj,max:J.maxj,mean:J.meanj,sigma:J.sigma},{prod:T.prod,plus:T.plus});return t.ParserResult.success($,E)}function o(t,e,n,r,i,o,s,a){var u,c,h,f,l,d,p,m,v,y,g,b,_,w,x=0,C=.1,I=0,S=.1,A=0,k=0,E=0,P=8,T=8,F=8,D=8,M=P*P*P;u=r[0]/8,c=r[1]/8,h=r[2]/8;var N=new Float32Array(8*u*8*c*8*h);for(p=8*u,m=64*u*c,A=0,k=0,E=0,v=0;v<M*u*c*h;v++)C=(t[v]-a)/s,E+=C,C<A&&(A=C),C>k&&(k=C);for(E/=M*u*c*h,d=0;d<h;d++)for(l=0;l<c;l++)for(f=0;f<u;f++){for(g=0;g<T;g++)for(y=0;y<F;y++)for(v=0;v<D;v++)C=(t[x+v+8*y+64*g]-a)/s,b=D*f+v,_=F*l+y,w=T*d+g,N[b+p*_+m*w]=C,S=C-E,I+=S*S;x+=M}return I/=M*u*c*h,I=Math.sqrt(I),{data:N,sigma:I,minj:A,maxj:k,meanj:E}}n.parse=r}(o||(o={}))}(n=e.DSN6||(e.DSN6={}))}(e=t.Density||(t.Density={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,r){var i=this;return t.computation(function(t){return a(i,void 0,void 0,function(){return u(this,function(i){switch(i.label){case 0:return[4,t.updateProgress("Parsing "+n+"...")];case 1:return i.sent(),[2,r(e)]}})})})}var r;!function(t){t.CCP4={name:"CCP4",shortcuts:["ccp4","map"],extensions:[".ccp4",".map"],isBinary:!0,parse:function(t){return n(t,"CCP4",function(t){return e.CCP4.parse(t)})}},t.DSN6={name:"DSN6",shortcuts:["dsn6"],extensions:[".dsn6"],isBinary:!0,parse:function(t){return n(t,"DSN6",function(t){return e.DSN6.parse(t)})}},t.All=[t.CCP4,t.DSN6]}(r=e.SupportedFormats||(e.SupportedFormats={}))}(n=e.Density||(e.Density={}))}(e=t.Formats||(t.Formats={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e,n="undefined"!=typeof Float64Array?function(t){return new Float64Array(t)}:function(t){return[]};!function(t){function e(){return n(16)}function r(){var t=n(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function i(t){var e,r,i,o=n(16);for(e=0;e<4;e++)for(i=t[e],r=0;r<4;r++)o[4*r+e]=i[r];return o}function o(t,e,n){for(var r=0;r<16;r++)if(Math.abs(t[r]-e[r])>n)return!1;return!0}function s(t,e,n,r){t[4*n+e]=r}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(e){return t.copy(t.empty(),e)}function c(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],p=e[12],m=e[13],v=e[14],y=e[15],g=n*a-r*s,b=n*u-i*s,_=n*c-o*s,w=r*u-i*a,x=r*c-o*a,C=i*c-o*u,I=h*m-f*p,S=h*v-l*p,A=h*y-d*p,k=f*v-l*m,E=f*y-d*m,P=l*y-d*v,T=g*P-b*E+_*k+w*A-x*S+C*I;return T?(T=1/T,t[0]=(a*P-u*E+c*k)*T,t[1]=(i*E-r*P-o*k)*T,t[2]=(m*C-v*x+y*w)*T,t[3]=(l*x-f*C-d*w)*T,t[4]=(u*A-s*P-c*S)*T,t[5]=(n*P-i*A+o*S)*T,t[6]=(v*_-p*C-y*b)*T,t[7]=(h*C-l*_+d*b)*T,t[8]=(s*E-a*A+c*I)*T,t[9]=(r*A-n*E-o*I)*T,t[10]=(p*x-m*_+y*g)*T,t[11]=(f*_-h*x-d*g)*T,t[12]=(a*S-s*k-u*I)*T,t[13]=(n*k-r*S+i*I)*T,t[14]=(m*b-p*w-v*g)*T,t[15]=(h*w-f*b+l*g)*T,t):null}function h(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=e[9],d=e[10],p=e[11],m=e[12],v=e[13],y=e[14],g=e[15],b=n[0],_=n[1],w=n[2],x=n[3];return t[0]=b*r+_*a+w*f+x*m,t[1]=b*i+_*u+w*l+x*v,t[2]=b*o+_*c+w*d+x*y,t[3]=b*s+_*h+w*p+x*g,b=n[4],_=n[5],w=n[6],x=n[7],t[4]=b*r+_*a+w*f+x*m,t[5]=b*i+_*u+w*l+x*v,t[6]=b*o+_*c+w*d+x*y,t[7]=b*s+_*h+w*p+x*g,b=n[8],_=n[9],w=n[10],x=n[11],t[8]=b*r+_*a+w*f+x*m,t[9]=b*i+_*u+w*l+x*v,t[10]=b*o+_*c+w*d+x*y,t[11]=b*s+_*h+w*p+x*g,b=n[12],_=n[13],w=n[14],x=n[15],t[12]=b*r+_*a+w*f+x*m,t[13]=b*i+_*u+w*l+x*v,t[14]=b*o+_*c+w*d+x*y,t[15]=b*s+_*h+w*p+x*g,t}function f(t,e,n){var r,i,o,s,a,u,c,h,f,l,d,p,m=n[0],v=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*y+e[12],t[13]=e[1]*m+e[5]*v+e[9]*y+e[13],t[14]=e[2]*m+e[6]*v+e[10]*y+e[14],t[15]=e[3]*m+e[7]*v+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=c,t[7]=h,t[8]=f,t[9]=l,t[10]=d,t[11]=p,t[12]=r*m+a*v+f*y+e[12],t[13]=i*m+u*v+l*y+e[13],t[14]=o*m+c*v+d*y+e[14],t[15]=s*m+h*v+p*y+e[15]),t}function l(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function d(t,e,n){var r=e.x,i=e.y,o=e.z;return t.x=n[0]*r+n[4]*i+n[8]*o+n[12],t.y=n[1]*r+n[5]*i+n[9]*o+n[13],t.z=n[2]*r+n[6]*i+n[10]*o+n[14],t}function p(t){for(var e="",n=0;n<4;n++){for(var r=0;r<4;r++)e+=t[4*r+n].toString(),r<3&&(e+=" ");n<3&&(e+="\n")}return e}function m(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=t[9],f=t[10],l=t[11],d=t[12],p=t[13],m=t[14],v=t[15],y=e*s-n*o,g=e*a-r*o,b=e*u-i*o,_=n*a-r*s,w=n*u-i*s,x=r*u-i*a,C=c*p-h*d,I=c*m-f*d,S=c*v-l*d,A=h*m-f*p,k=h*v-l*p,E=f*v-l*m;return y*E-g*k+b*A+_*S-w*I+x*C}t.empty=e,t.identity=r,t.ofRows=i,t.areEqual=o,t.setValue=s,t.copy=a,t.clone=u,t.invert=c,t.mul=h,t.translate=f,t.fromTranslation=l,t.transformVector3=d,t.makeTable=p,t.determinant=m}(e=t.Matrix4||(t.Matrix4={}));var r;!function(t){function e(){var t=n(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function r(t){var e=n(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function i(t,e,r,i){var o=n(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o}function o(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function s(t,e){
var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function a(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function u(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function c(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function h(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}t.create=e,t.clone=r,t.fromValues=i,t.set=o,t.distance=s,t.squaredDistance=a,t.norm=u,t.squaredNorm=c,t.transform=h}(r=t.Vector4||(t.Vector4={}))}(e=t.LinearAlgebra||(t.LinearAlgebra={}))}(e=t.Geometry||(t.Geometry={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t){var e,n=2*t.capacity+1,r=new Int32Array(n);if(t.count<32)for(e=0;e<t.count;e++)r[e]=t.indices[e];else r.set(t.indices);t.indices=r,t.capacity=n}function n(t,n){this.count+1>=this.capacity&&e(this),this.indices[this.count++]=n}function r(){this.count=0}function i(t){return t<1&&(t=1),{indices:new Int32Array(t),count:0,capacity:t,hasPriorities:!1,priorities:void 0,add:n,reset:r}}t.create=i}(e=t.SubdivisionTree3DResultIndexBuffer||(t.SubdivisionTree3DResultIndexBuffer={}));var n;!function(t){function e(t){var e,n=2*t.capacity+1,r=new Int32Array(n),i=new Float32Array(n);if(t.count<32)for(e=0;e<t.count;e++)r[e]=t.indices[e],i[e]=t.priorities[e];else r.set(t.indices),i.set(t.priorities);t.indices=r,t.priorities=i,t.capacity=n}function n(t,n){this.count+1>=this.capacity&&e(this),this.priorities[this.count]=t,this.indices[this.count++]=n}function r(){this.count=0}function i(t){return t<1&&(t=1),{indices:new Int32Array(t),count:0,capacity:t,hasPriorities:!0,priorities:new Float32Array(t),add:n,reset:r}}t.create=i}(n=t.SubdivisionTree3DResultPriorityBuffer||(t.SubdivisionTree3DResultPriorityBuffer={}));var r;!function(t){function e(t,e,n,r){this.pivot[0]=t,this.pivot[1]=e,this.pivot[2]=n,this.radius=r,this.radiusSq=r*r,this.buffer.reset(),s.nearest(this.tree.root,this,0)}function n(t,n){return{tree:t,indices:t.indices,positions:t.positions,buffer:n,pivot:[.1,.1,.1],radius:1.1,radiusSq:1.1*1.1,nearest:e}}t.create=n}(r=t.SubdivisionTree3DQueryContext||(t.SubdivisionTree3DQueryContext={}));var i;!function(t){function i(t,i,o){return void 0===o&&(o=!1),r.create(t,o?n.create(Math.max(i*i|0,8)):e.create(Math.max(i*i|0,8)))}function o(t,e,n){void 0===n&&(n=32);var r=u.build(t,e,n),i=r.root,o=r.indices,s=r.positions;return{data:t,root:i,indices:o,positions:s}}t.createContextRadius=i,t.create=o}(i=t.SubdivisionTree3D||(t.SubdivisionTree3D={}));var o;!function(t){function e(t,e,n,r){t.data[t._count++]=e,t.data[t._count++]=n,t.data[t._count++]=r,t.boundsMin[0]=Math.min(e,t.boundsMin[0]),t.boundsMin[1]=Math.min(n,t.boundsMin[1]),t.boundsMin[2]=Math.min(r,t.boundsMin[2]),t.boundsMax[0]=Math.max(e,t.boundsMax[0]),t.boundsMax[1]=Math.max(n,t.boundsMax[1]),t.boundsMax[2]=Math.max(r,t.boundsMax[2])}function n(t){var e=new Float32Array(3*t|0),n=a.createInfinite(),r=n.min,i=n.max;return{_count:0,data:e,bounds:n,boundsMin:r,boundsMax:i}}t.add=e,t.create=n}(o||(o={}));var s;!function(t){function e(t,e){var n,r,i,o,s,a,u=e.pivot,c=e.indices,h=e.positions,f=e.radiusSq;for(a=t.startIndex;a<t.endIndex;a++)o=3*c[a],n=u[0]-h[o],r=u[1]-h[o+1],i=u[2]-h[o+2],s=n*n+r*r+i*i,s<=f&&e.buffer.add(s,c[a])}function n(t,e,n){var i=e.pivot[n],o=i<t.splitValue;(o?i+e.radius>t.splitValue:i-e.radius<t.splitValue)?(r(t.left,e,(n+1)%3),r(t.right,e,(n+1)%3)):o?r(t.left,e,(n+1)%3):r(t.right,e,(n+1)%3)}function r(t,r,i){t.startIndex!==t.endIndex&&(isNaN(t.splitValue)?e(t,r):n(t,r,i))}function i(t,e,n,r,i){return{splitValue:t,startIndex:e,endIndex:n,left:r,right:i}}t.nearest=r,t.create=i}(s=t.SubdivisionTree3DNode||(t.SubdivisionTree3DNode={}));var a;!function(t){function e(){return{min:[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],max:[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]}}t.createInfinite=e}(a=t.Box3D||(t.Box3D={}));var u;!function(t){function e(t,n,r,i){var o=r-n+1;if(o<=0)return t.emptyNode;if(o<=t.leafSize)return s.create(NaN,n,r+1,t.emptyNode,t.emptyNode);for(var a,u,c,h=t.bounds.min[i],f=t.bounds.max[i],l=.5*(h+f),d=0,p=n,m=r;p<m;){for(a=t.indices[m],t.indices[m]=t.indices[p],t.indices[p]=a;p<=r&&t.positions[3*t.indices[p]+i]<=l;)p++;for(;m>=n&&t.positions[3*t.indices[m]+i]>l;)m--}return d=p-1,t.bounds.max[i]=l,u=e(t,n,d,(i+1)%3),t.bounds.max[i]=f,t.bounds.min[i]=l,c=e(t,d+1,r,(i+1)%3),t.bounds.min[i]=h,s.create(l,n,r+1,u,c)}function n(t){var e=o.add;return function(n,r,i){e(t,n,r,i)}}function r(t,r,i){for(var a=o.create(t.length),u=new Int32Array(t.length),c=n(a),h=0;h<t.length;h++)u[h]=h,r(t[h],c);c=void 0;var f={bounds:a.bounds,positions:a.data,leafSize:i,indices:u,emptyNode:s.create(NaN,-1,-1,void 0,void 0)},l=e(f,0,u.length-1,0);return f=void 0,{root:l,indices:u,positions:a.data}}t.build=r}(u||(u={}))}(e=t.Geometry||(t.Geometry={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){function r(t){if(!t.normals){var e,n,r=new Float32Array(t.vertices.length),i=t.vertices,o=t.triangleIndices;for(n=0;n<o.length;n+=3){var s=3*o[n],a=3*o[n+1],u=3*o[n+2],c=i[s+2]*(i[a+1]-i[u+1])+i[a+2]*i[u+1]-i[a+1]*i[u+2]+i[s+1]*(-i[a+2]+i[u+2]),h=-(i[a+2]*i[u])+i[s+2]*(-i[a]+i[u])+i[s]*(i[a+2]-i[u+2])+i[a]*i[u+2],f=i[s+1]*(i[a]-i[u])+i[a+1]*i[u]-i[a]*i[u+1]+i[s]*(-i[a+1]+i[a+1]);r[s]+=c,r[s+1]+=h,r[s+2]+=f,r[a]+=c,r[a+1]+=h,r[a+2]+=f,r[u]+=c,r[u+1]+=h,r[u+2]+=f}for(n=0;n<r.length;n+=3){var c=r[n],h=r[n+1],f=r[n+2];e=1/Math.sqrt(c*c+h*h+f*f),r[n]*=e,r[n+1]*=e,r[n+2]*=e}t.normals=r}}function i(e){var n=this;return t.computation(function(t){return a(n,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return e.normals?[2,e]:[4,t.updateProgress("Computing normals...")];case 1:return n.sent(),r(e),[2,e]}})})})}function o(t,e,n,r){n[3*r]+=t[3*e],n[3*r+1]+=t[3*e+1],n[3*r+2]+=t[3*e+2]}function s(t,e,n,r){for(var i=t.triangleIndices.length,s=t.vertices,a=t.triangleIndices,u=0;u<i;u+=3){var c=a[u],h=a[u+1],f=a[u+2];o(s,h,n,c),o(s,f,n,c),o(s,c,n,h),o(s,f,n,h),o(s,c,n,f),o(s,h,n,f)}for(var l=2*r,u=0,d=t.vertexCount;u<d;u++){var p=e[u]+l;n[3*u]=(n[3*u]+l*s[3*u])/p,n[3*u+1]=(n[3*u+1]+l*s[3*u+1])/p,n[3*u+2]=(n[3*u+2]+l*s[3*u+2])/p}}function c(e,n,r,i){return a(this,void 0,void 0,function(){var o,a,c,h,f,l,h,d,p,m,v;return u(this,function(u){switch(u.label){case 0:return[4,e.updateProgress("Smoothing surface...",!0)];case 1:for(u.sent(),o=new Int32Array(n.vertexCount),a=n.triangleIndices.length,c=n.triangleIndices,h=0;h<a;h++)o[c[h]]+=2;return f=new Float32Array(n.vertices.length),l=t.Utils.PerformanceMonitor.currentTime(),[4,e.updateProgress("Smoothing surface...",!0)];case 2:u.sent(),h=0,u.label=3;case 3:if(!(h<r))return[3,6];if(h>0)for(d=0,p=f.length;d<p;d++)f[d]=0;return n.normals=void 0,s(n,o,f,i),m=n.vertices,n.vertices=f,f=m,v=t.Utils.PerformanceMonitor.currentTime(),v-l>t.Computation.UpdateProgressDelta?(l=v,[4,e.updateProgress("Smoothing surface...",!0,h+1,r)]):[3,5];case 4:u.sent(),u.label=5;case 5:return h++,[3,3];case 6:return[2,n]}})})}function h(e,n,r){var i=this;return void 0===n&&(n=1),void 0===r&&(r=1),n<1&&(n=0),0===n?t.Computation.resolve(e):t.computation(function(t){return a(i,void 0,void 0,function(){return u(this,function(i){switch(i.label){case 0:return[4,c(t,e,n,1.1*r/1.1)];case 1:return[2,i.sent()]}})})})}function f(e){var n=this;return t.computation(function(t){return a(n,void 0,void 0,function(){var n,r,i,o,s,a,c,s,a,h,f,l;return u(this,function(u){switch(u.label){case 0:return e.boundingSphere?[2,e]:[4,t.updateProgress("Computing bounding sphere...")];case 1:for(u.sent(),n=e.vertices,r=0,i=0,o=0,s=0,a=e.vertices.length;s<a;s+=3)r+=n[s],i+=n[s+1],o+=n[s+2];for(r/=e.vertexCount,i/=e.vertexCount,o/=e.vertexCount,c=0,s=0,a=n.length;s<a;s+=3)h=r-n[s],f=i-n[s+1],l=o-n[s+2],c=Math.max(c,h*h+f*f+l*l);return e.boundingSphere={center:{x:r,y:i,z:o},radius:Math.sqrt(c)},[2,e]}})})})}function l(t,n){for(var r={x:.1,y:.1,z:.1},i=e.LinearAlgebra.Matrix4.transformVector3,o=t.vertices,s=0,a=t.vertices.length;s<a;s+=3)r.x=o[s],r.y=o[s+1],r.z=o[s+2],i(r,r,n),o[s]=r.x,o[s+1]=r.y,o[s+2]=r.z;t.normals=void 0,t.boundingSphere=void 0}function d(e,n){var r=this;return t.computation(function(t){return a(r,void 0,void 0,function(){return u(this,function(r){return t.updateProgress("Updating surface..."),l(e,n),[2,e]})})})}n.computeNormalsImmediate=r,n.computeNormals=i,n.laplacianSmooth=h,n.computeBoundingSphere=f,n.transformImmediate=l,n.transform=d}(n=e.Surface||(e.Surface={}))}(e=t.Geometry||(t.Geometry={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e){var n=this;return t.computation(function(t){return a(n,void 0,void 0,function(){var n;return u(this,function(i){switch(i.label){case 0:return n=new r(e,t),[4,n.run()];case 1:return[2,i.sent()]}})})})}e.compute=n;var r=function(){function e(e,n){this.ctx=n,this.minX=0,this.minY=0,this.minZ=0,this.maxX=0,this.maxY=0,this.maxZ=0;var r=t.Utils.extend({},e);r.bottomLeft||(r.bottomLeft=[0,0,0]),r.topRight||(r.topRight=r.scalarField.dimensions),this.state=new i(r),this.minX=r.bottomLeft[0],this.minY=r.bottomLeft[1],this.minZ=r.bottomLeft[2],this.maxX=r.topRight[0]-1,this.maxY=r.topRight[1]-1,this.maxZ=r.topRight[2]-1,this.size=(this.maxX-this.minX)*(this.maxY-this.minY)*(this.maxZ-this.minZ),this.sliceSize=(this.maxX-this.minX)*(this.maxY-this.minY)}return e.prototype.doSlices=function(){return a(this,void 0,void 0,function(){var e,n,r,i;return u(this,function(o){switch(o.label){case 0:e=0,n=t.Utils.PerformanceMonitor.currentTime(),r=this.minZ,o.label=1;case 1:return r<this.maxZ?(this.slice(r),e+=this.sliceSize,i=t.Utils.PerformanceMonitor.currentTime(),i-n>t.Computation.UpdateProgressDelta?[4,this.ctx.updateProgress("Computing surface...",!0,e,this.size)]:[3,3]):[3,4];case 2:o.sent(),n=i,o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.slice=function(t){for(var e=this.minY;e<this.maxY;e++)for(var n=this.minX;n<this.maxX;n++)this.state.processCell(n,e,t);this.state.clearEdgeVertexIndexSlice(t)},e.prototype.finish=function(){var e=t.Utils.ChunkedArray.compact(this.state.vertexBuffer),n=t.Utils.ChunkedArray.compact(this.state.triangleBuffer);this.state.vertexBuffer=void 0,this.state.verticesOnEdges=void 0;var r={vertexCount:e.length/3|0,triangleCount:n.length/3|0,vertices:e,triangleIndices:n,annotation:this.state.annotate?t.Utils.ChunkedArray.compact(this.state.annotationBuffer):void 0};return r},e.prototype.run=function(){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.ctx.updateProgress("Computing surface...",!0,0,this.size)];case 1:return t.sent(),[4,this.doSlices()];case 2:return t.sent(),[4,this.ctx.updateProgress("Finalizing...")];case 3:return t.sent(),[2,this.finish()]}})})},e}(),i=function(){function n(e){this.vertList=[0,0,0,0,0,0,0,0,0,0,0,0],this.i=0,this.j=0,this.k=0,this.nX=e.scalarField.dimensions[0],this.nY=e.scalarField.dimensions[1],this.nZ=e.scalarField.dimensions[2],this.isoLevel=e.isoLevel,this.scalarField=e.scalarField,this.annotationField=e.annotationField;var n=e.topRight[0]-e.bottomLeft[0],r=e.topRight[1]-e.bottomLeft[1],i=e.topRight[2]-e.bottomLeft[2],o=Math.min(262144,0|Math.max(n*r*i/16,1024)),s=Math.min(65536,4*o);this.vertexBuffer=t.Utils.ChunkedArray.forVertex3D(o),this.triangleBuffer=t.Utils.ChunkedArray.create(function(t){return new Uint32Array(t)},s,3),this.annotate=!!e.annotationField,this.annotate&&(this.annotationBuffer=t.Utils.ChunkedArray.forInt32(o)),this.verticesOnEdges=new Int32Array(3*this.nX*this.nY*2)}return n.prototype.get3dOffsetFromEdgeInfo=function(t){return this.nX*((this.k+t.k)%2*this.nY+this.j+t.j)+this.i+t.i|0},n.prototype.clearEdgeVertexIndexSlice=function(t){for(var e=3*(this.nX*(t%2*this.nY))|0,n=3*(this.nX*(t%2*this.nY+this.nY-1)+this.nX-1)|0,r=e;r<n;r++)this.verticesOnEdges[r]=0},n.prototype.interpolate=function(n){var r=e.EdgeIdInfo[n],i=3*this.get3dOffsetFromEdgeInfo(r)+r.e,o=this.verticesOnEdges[i];if(o>0)return o-1|0;var s=e.CubeEdges[n],a=s.a,u=s.b,c=a.i+this.i,h=a.j+this.j,f=a.k+this.k,l=u.i+this.i,d=u.j+this.j,p=u.k+this.k,m=this.scalarField.get(c,h,f),v=this.scalarField.get(l,d,p),y=(this.isoLevel-m)/(m-v),g=0|t.Utils.ChunkedArray.add3(this.vertexBuffer,c+y*(c-l),h+y*(h-d),f+y*(f-p));return this.verticesOnEdges[i]=g+1,this.annotate&&t.Utils.ChunkedArray.add(this.annotationBuffer,this.annotationField.get(this.i,this.j,this.k)),g},n.prototype.processCell=function(n,r,i){var o=0;if(this.scalarField.get(n,r,i)<this.isoLevel&&(o|=1),this.scalarField.get(n+1,r,i)<this.isoLevel&&(o|=2),this.scalarField.get(n+1,r+1,i)<this.isoLevel&&(o|=4),this.scalarField.get(n,r+1,i)<this.isoLevel&&(o|=8),this.scalarField.get(n,r,i+1)<this.isoLevel&&(o|=16),this.scalarField.get(n+1,r,i+1)<this.isoLevel&&(o|=32),this.scalarField.get(n+1,r+1,i+1)<this.isoLevel&&(o|=64),this.scalarField.get(n,r+1,i+1)<this.isoLevel&&(o|=128),0!==o&&255!==o){this.i=n,this.j=r,this.k=i;var s=e.EdgeTable[o];(1&s)>0&&(this.vertList[0]=this.interpolate(0)),(2&s)>0&&(this.vertList[1]=this.interpolate(1)),(4&s)>0&&(this.vertList[2]=this.interpolate(2)),(8&s)>0&&(this.vertList[3]=this.interpolate(3)),(16&s)>0&&(this.vertList[4]=this.interpolate(4)),(32&s)>0&&(this.vertList[5]=this.interpolate(5)),(64&s)>0&&(this.vertList[6]=this.interpolate(6)),(128&s)>0&&(this.vertList[7]=this.interpolate(7)),(256&s)>0&&(this.vertList[8]=this.interpolate(8)),(512&s)>0&&(this.vertList[9]=this.interpolate(9)),(1024&s)>0&&(this.vertList[10]=this.interpolate(10)),(2048&s)>0&&(this.vertList[11]=this.interpolate(11));for(var a=e.TriTable[o],u=0;u<a.length;u+=3)t.Utils.ChunkedArray.add3(this.triangleBuffer,this.vertList[a[u]],this.vertList[a[u+1]],this.vertList[a[u+2]])}},n}()}(n=e.MarchingCubes||(e.MarchingCubes={}))}(e=t.Geometry||(t.Geometry={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e,n){this.i=0|t,this.j=0|e,this.k=0|n}return t}();t.Index=e;var n=function(){function t(t,e){this.a=t,this.b=e}return t}();t.IndexPair=n,t.EdgesXY=[[],[0,3],[0,1],[1,3],[1,2],[0,1,1,2,2,3,0,3],[0,2],[2,3],[2,3],[0,2],[0,1,1,2,2,3,0,3],[1,2],[1,3],[0,1],[0,3],[]],t.EdgesXZ=[[],[0,8],[0,9],[9,8],[9,4],[0,9,9,4,4,8,0,8],[0,4],[4,8],[4,8],[0,4],[0,9,9,4,4,8,0,8],[9,4],[9,8],[0,9],[0,8],[]],t.EdgesYZ=[[],[3,8],[3,11],[11,8],[11,7],[3,11,11,7,7,8,3,8],[3,7],[7,8],[7,8],[3,7],[3,11,11,7,7,8,3,8],[11,7],[11,8],[3,11],[3,8],[]],t.CubeVertices=[new e(0,0,0),new e(1,0,0),new e(1,1,0),new e(0,1,0),new e(0,0,1),new e(1,0,1),new e(1,1,1),new e(0,1,1)],t.CubeEdges=[new n(t.CubeVertices[0],t.CubeVertices[1]),new n(t.CubeVertices[1],t.CubeVertices[2]),new n(t.CubeVertices[2],t.CubeVertices[3]),new n(t.CubeVertices[3],t.CubeVertices[0]),new n(t.CubeVertices[4],t.CubeVertices[5]),new n(t.CubeVertices[5],t.CubeVertices[6]),new n(t.CubeVertices[6],t.CubeVertices[7]),new n(t.CubeVertices[7],t.CubeVertices[4]),new n(t.CubeVertices[0],t.CubeVertices[4]),new n(t.CubeVertices[1],t.CubeVertices[5]),new n(t.CubeVertices[2],t.CubeVertices[6]),new n(t.CubeVertices[3],t.CubeVertices[7])],t.EdgeIdInfo=[{i:0,j:0,k:0,e:0},{i:1,j:0,k:0,e:1},{i:0,j:1,k:0,e:0},{i:0,j:0,k:0,e:1},{i:0,j:0,k:1,e:0},{i:1,j:0,k:1,e:1},{i:0,j:1,k:1,e:0},{i:0,j:0,k:1,e:1},{i:0,j:0,k:0,e:2},{i:1,j:0,k:0,e:2},{i:1,j:1,k:0,e:2},{i:0,j:1,k:0,e:2}],t.EdgeTable=[0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0],t.TriTable=[[],[0,8,3],[0,1,9],[1,8,3,9,8,1],[1,2,10],[0,8,3,1,2,10],[9,2,10,0,2,9],[2,8,3,2,10,8,10,9,8],[3,11,2],[0,11,2,8,11,0],[1,9,0,2,3,11],[1,11,2,1,9,11,9,8,11],[3,10,1,11,10,3],[0,10,1,0,8,10,8,11,10],[3,9,0,3,11,9,11,10,9],[9,8,10,10,8,11],[4,7,8],[4,3,0,7,3,4],[0,1,9,8,4,7],[4,1,9,4,7,1,7,3,1],[1,2,10,8,4,7],[3,4,7,3,0,4,1,2,10],[9,2,10,9,0,2,8,4,7],[2,10,9,2,9,7,2,7,3,7,9,4],[8,4,7,3,11,2],[11,4,7,11,2,4,2,0,4],[9,0,1,8,4,7,2,3,11],[4,7,11,9,4,11,9,11,2,9,2,1],[3,10,1,3,11,10,7,8,4],[1,11,10,1,4,11,1,0,4,7,11,4],[4,7,8,9,0,11,9,11,10,11,0,3],[4,7,11,4,11,9,9,11,10],[9,5,4],[9,5,4,0,8,3],[0,5,4,1,5,0],[8,5,4,8,3,5,3,1,5],[1,2,10,9,5,4],[3,0,8,1,2,10,4,9,5],[5,2,10,5,4,2,4,0,2],[2,10,5,3,2,5,3,5,4,3,4,8],[9,5,4,2,3,11],[0,11,2,0,8,11,4,9,5],[0,5,4,0,1,5,2,3,11],[2,1,5,2,5,8,2,8,11,4,8,5],[10,3,11,10,1,3,9,5,4],[4,9,5,0,8,1,8,10,1,8,11,10],[5,4,0,5,0,11,5,11,10,11,0,3],[5,4,8,5,8,10,10,8,11],[9,7,8,5,7,9],[9,3,0,9,5,3,5,7,3],[0,7,8,0,1,7,1,5,7],[1,5,3,3,5,7],[9,7,8,9,5,7,10,1,2],[10,1,2,9,5,0,5,3,0,5,7,3],[8,0,2,8,2,5,8,5,7,10,5,2],[2,10,5,2,5,3,3,5,7],[7,9,5,7,8,9,3,11,2],[9,5,7,9,7,2,9,2,0,2,7,11],[2,3,11,0,1,8,1,7,8,1,5,7],[11,2,1,11,1,7,7,1,5],[9,5,8,8,5,7,10,1,3,10,3,11],[5,7,0,5,0,9,7,11,0,1,0,10,11,10,0],[11,10,0,11,0,3,10,5,0,8,0,7,5,7,0],[11,10,5,7,11,5],[10,6,5],[0,8,3,5,10,6],[9,0,1,5,10,6],[1,8,3,1,9,8,5,10,6],[1,6,5,2,6,1],[1,6,5,1,2,6,3,0,8],[9,6,5,9,0,6,0,2,6],[5,9,8,5,8,2,5,2,6,3,2,8],[2,3,11,10,6,5],[11,0,8,11,2,0,10,6,5],[0,1,9,2,3,11,5,10,6],[5,10,6,1,9,2,9,11,2,9,8,11],[6,3,11,6,5,3,5,1,3],[0,8,11,0,11,5,0,5,1,5,11,6],[3,11,6,0,3,6,0,6,5,0,5,9],[6,5,9,6,9,11,11,9,8],[5,10,6,4,7,8],[4,3,0,4,7,3,6,5,10],[1,9,0,5,10,6,8,4,7],[10,6,5,1,9,7,1,7,3,7,9,4],[6,1,2,6,5,1,4,7,8],[1,2,5,5,2,6,3,0,4,3,4,7],[8,4,7,9,0,5,0,6,5,0,2,6],[7,3,9,7,9,4,3,2,9,5,9,6,2,6,9],[3,11,2,7,8,4,10,6,5],[5,10,6,4,7,2,4,2,0,2,7,11],[0,1,9,4,7,8,2,3,11,5,10,6],[9,2,1,9,11,2,9,4,11,7,11,4,5,10,6],[8,4,7,3,11,5,3,5,1,5,11,6],[5,1,11,5,11,6,1,0,11,7,11,4,0,4,11],[0,5,9,0,6,5,0,3,6,11,6,3,8,4,7],[6,5,9,6,9,11,4,7,9,7,11,9],[10,4,9,6,4,10],[4,10,6,4,9,10,0,8,3],[10,0,1,10,6,0,6,4,0],[8,3,1,8,1,6,8,6,4,6,1,10],[1,4,9,1,2,4,2,6,4],[3,0,8,1,2,9,2,4,9,2,6,4],[0,2,4,4,2,6],[8,3,2,8,2,4,4,2,6],[10,4,9,10,6,4,11,2,3],[0,8,2,2,8,11,4,9,10,4,10,6],[3,11,2,0,1,6,0,6,4,6,1,10],[6,4,1,6,1,10,4,8,1,2,1,11,8,11,1],[9,6,4,9,3,6,9,1,3,11,6,3],[8,11,1,8,1,0,11,6,1,9,1,4,6,4,1],[3,11,6,3,6,0,0,6,4],[6,4,8,11,6,8],[7,10,6,7,8,10,8,9,10],[0,7,3,0,10,7,0,9,10,6,7,10],[10,6,7,1,10,7,1,7,8,1,8,0],[10,6,7,10,7,1,1,7,3],[1,2,6,1,6,8,1,8,9,8,6,7],[2,6,9,2,9,1,6,7,9,0,9,3,7,3,9],[7,8,0,7,0,6,6,0,2],[7,3,2,6,7,2],[2,3,11,10,6,8,10,8,9,8,6,7],[2,0,7,2,7,11,0,9,7,6,7,10,9,10,7],[1,8,0,1,7,8,1,10,7,6,7,10,2,3,11],[11,2,1,11,1,7,10,6,1,6,7,1],[8,9,6,8,6,7,9,1,6,11,6,3,1,3,6],[0,9,1,11,6,7],[7,8,0,7,0,6,3,11,0,11,6,0],[7,11,6],[7,6,11],[3,0,8,11,7,6],[0,1,9,11,7,6],[8,1,9,8,3,1,11,7,6],[10,1,2,6,11,7],[1,2,10,3,0,8,6,11,7],[2,9,0,2,10,9,6,11,7],[6,11,7,2,10,3,10,8,3,10,9,8],[7,2,3,6,2,7],[7,0,8,7,6,0,6,2,0],[2,7,6,2,3,7,0,1,9],[1,6,2,1,8,6,1,9,8,8,7,6],[10,7,6,10,1,7,1,3,7],[10,7,6,1,7,10,1,8,7,1,0,8],[0,3,7,0,7,10,0,10,9,6,10,7],[7,6,10,7,10,8,8,10,9],[6,8,4,11,8,6],[3,6,11,3,0,6,0,4,6],[8,6,11,8,4,6,9,0,1],[9,4,6,9,6,3,9,3,1,11,3,6],[6,8,4,6,11,8,2,10,1],[1,2,10,3,0,11,0,6,11,0,4,6],[4,11,8,4,6,11,0,2,9,2,10,9],[10,9,3,10,3,2,9,4,3,11,3,6,4,6,3],[8,2,3,8,4,2,4,6,2],[0,4,2,4,6,2],[1,9,0,2,3,4,2,4,6,4,3,8],[1,9,4,1,4,2,2,4,6],[8,1,3,8,6,1,8,4,6,6,10,1],[10,1,0,10,0,6,6,0,4],[4,6,3,4,3,8,6,10,3,0,3,9,10,9,3],[10,9,4,6,10,4],[4,9,5,7,6,11],[0,8,3,4,9,5,11,7,6],[5,0,1,5,4,0,7,6,11],[11,7,6,8,3,4,3,5,4,3,1,5],[9,5,4,10,1,2,7,6,11],[6,11,7,1,2,10,0,8,3,4,9,5],[7,6,11,5,4,10,4,2,10,4,0,2],[3,4,8,3,5,4,3,2,5,10,5,2,11,7,6],[7,2,3,7,6,2,5,4,9],[9,5,4,0,8,6,0,6,2,6,8,7],[3,6,2,3,7,6,1,5,0,5,4,0],[6,2,8,6,8,7,2,1,8,4,8,5,1,5,8],[9,5,4,10,1,6,1,7,6,1,3,7],[1,6,10,1,7,6,1,0,7,8,7,0,9,5,4],[4,0,10,4,10,5,0,3,10,6,10,7,3,7,10],[7,6,10,7,10,8,5,4,10,4,8,10],[6,9,5,6,11,9,11,8,9],[3,6,11,0,6,3,0,5,6,0,9,5],[0,11,8,0,5,11,0,1,5,5,6,11],[6,11,3,6,3,5,5,3,1],[1,2,10,9,5,11,9,11,8,11,5,6],[0,11,3,0,6,11,0,9,6,5,6,9,1,2,10],[11,8,5,11,5,6,8,0,5,10,5,2,0,2,5],[6,11,3,6,3,5,2,10,3,10,5,3],[5,8,9,5,2,8,5,6,2,3,8,2],[9,5,6,9,6,0,0,6,2],[1,5,8,1,8,0,5,6,8,3,8,2,6,2,8],[1,5,6,2,1,6],[1,3,6,1,6,10,3,8,6,5,6,9,8,9,6],[10,1,0,10,0,6,9,5,0,5,6,0],[0,3,8,5,6,10],[10,5,6],[11,5,10,7,5,11],[11,5,10,11,7,5,8,3,0],[5,11,7,5,10,11,1,9,0],[10,7,5,10,11,7,9,8,1,8,3,1],[11,1,2,11,7,1,7,5,1],[0,8,3,1,2,7,1,7,5,7,2,11],[9,7,5,9,2,7,9,0,2,2,11,7],[7,5,2,7,2,11,5,9,2,3,2,8,9,8,2],[2,5,10,2,3,5,3,7,5],[8,2,0,8,5,2,8,7,5,10,2,5],[9,0,1,5,10,3,5,3,7,3,10,2],[9,8,2,9,2,1,8,7,2,10,2,5,7,5,2],[1,3,5,3,7,5],[0,8,7,0,7,1,1,7,5],[9,0,3,9,3,5,5,3,7],[9,8,7,5,9,7],[5,8,4,5,10,8,10,11,8],[5,0,4,5,11,0,5,10,11,11,3,0],[0,1,9,8,4,10,8,10,11,10,4,5],[10,11,4,10,4,5,11,3,4,9,4,1,3,1,4],[2,5,1,2,8,5,2,11,8,4,5,8],[0,4,11,0,11,3,4,5,11,2,11,1,5,1,11],[0,2,5,0,5,9,2,11,5,4,5,8,11,8,5],[9,4,5,2,11,3],[2,5,10,3,5,2,3,4,5,3,8,4],[5,10,2,5,2,4,4,2,0],[3,10,2,3,5,10,3,8,5,4,5,8,0,1,9],[5,10,2,5,2,4,1,9,2,9,4,2],[8,4,5,8,5,3,3,5,1],[0,4,5,1,0,5],[8,4,5,8,5,3,9,0,5,0,3,5],[9,4,5],[4,11,7,4,9,11,9,10,11],[0,8,3,4,9,7,9,11,7,9,10,11],[1,10,11,1,11,4,1,4,0,7,4,11],[3,1,4,3,4,8,1,10,4,7,4,11,10,11,4],[4,11,7,9,11,4,9,2,11,9,1,2],[9,7,4,9,11,7,9,1,11,2,11,1,0,8,3],[11,7,4,11,4,2,2,4,0],[11,7,4,11,4,2,8,3,4,3,2,4],[2,9,10,2,7,9,2,3,7,7,4,9],[9,10,7,9,7,4,10,2,7,8,7,0,2,0,7],[3,7,10,3,10,2,7,4,10,1,10,0,4,0,10],[1,10,2,8,7,4],[4,9,1,4,1,7,7,1,3],[4,9,1,4,1,7,0,8,1,8,7,1],[4,0,3,7,4,3],[4,8,7],[9,10,8,10,11,8],[3,0,9,3,9,11,11,9,10],[0,1,10,0,10,8,8,10,11],[3,1,10,11,3,10],[1,2,11,1,11,9,9,11,8],[3,0,9,3,9,11,1,2,9,2,11,9],[0,2,11,8,0,11],[3,2,11],[2,3,8,2,8,10,10,8,9],[9,10,2,0,9,2],[2,3,8,2,8,10,0,1,8,1,10,8],[1,10,2],[1,3,8,9,1,8],[0,9,1],[0,3,8],[]]}(e=t.MarchingCubes||(t.MarchingCubes={}))}(e=t.Geometry||(t.Geometry={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){function r(e){var n=this;return t.computation(function(t){return a(n,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return n=new s(e,t),[4,n.run()];case 1:return[2,r.sent()]}})})})}function i(n){var i=this;return t.computation(function(t){return a(i,void 0,void 0,function(){var i,o,s,a;return u(this,function(u){switch(u.label){case 0:return[4,r(n).run(t)];case 1:return i=u.sent(),[4,e.MarchingCubes.compute(i.data).run(t)];case 2:return o=u.sent(),[4,e.Surface.transform(o,i.transform).run(t)];case 3:return o=u.sent(),s=n.parameters&&n.parameters.smoothingIterations||1,a=1,n.parameters&&n.parameters.density<1&&(a=2/n.parameters.density),[4,e.Surface.laplacianSmooth(o,s,a).run(t)];case 4:return o=u.sent(),[2,{surface:o,usedParameters:i.parameters}]}})})})}var o=function(){function e(e){t.Utils.extend(this,e,{exactBoundary:!1,boundaryDelta:{dx:1.5,dy:1.5,dz:1.5},probeRadius:1.4,atomRadii:function(){return 1},density:1.1,interactive:!1,smoothingIterations:1}),this.exactBoundary&&(this.boundaryDelta={dx:0,dy:0,dz:0}),this.density<.05&&(this.density=.05)}return e}(),s=function(){function n(t,e){this.inputParameters=t,this.ctx=e,this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.minZ=Number.MAX_VALUE,this.maxX=-Number.MAX_VALUE,this.maxY=-Number.MAX_VALUE,this.maxZ=-Number.MAX_VALUE,this.nX=0,this.nY=0,this.nZ=0,this.dX=.1,this.dY=.1,this.dZ=.1,this.field=new Float32Array(0),this.distanceField=new Float32Array(0),this.proximityMap=new Int32Array(0),this.minIndex={i:0,j:0,k:0},this.maxIndex={i:0,j:0,k:0},this.parameters=new o(t.parameters);var n=t.positions;this.x=n.x,this.y=n.y,this.z=n.z,this.atomIndices=t.atomIndices,this.parameters.density>=.99?this.vdwScaleFactor=1.000000001:this.vdwScaleFactor=1+(1-this.parameters.density*this.parameters.density)}return n.prototype.findBounds=function(){for(var t=0,e=this.atomIndices;t<e.length;t++){var n=e[t],r=this.parameters.exactBoundary?0:this.vdwScaleFactor*this.parameters.atomRadius(n)+this.parameters.probeRadius,i=this.x[n],o=this.y[n],s=this.z[n];r<0||(this.minX=Math.min(this.minX,i-r),this.minY=Math.min(this.minY,o-r),this.minZ=Math.min(this.minZ,s-r),this.maxX=Math.max(this.maxX,i+r),this.maxY=Math.max(this.maxY,o+r),this.maxZ=Math.max(this.maxZ,s+r))}this.minX===Number.MAX_VALUE&&(this.minX=this.minY=this.minZ=-1,this.maxX=this.maxY=this.maxZ=1),this.minX-=this.parameters.boundaryDelta.dx,this.minY-=this.parameters.boundaryDelta.dy,this.minZ-=this.parameters.boundaryDelta.dz,this.maxX+=this.parameters.boundaryDelta.dx,this.maxY+=this.parameters.boundaryDelta.dy,this.maxZ+=this.parameters.boundaryDelta.dz,this.nX=Math.floor((this.maxX-this.minX)*this.parameters.density),this.nY=Math.floor((this.maxY-this.minY)*this.parameters.density),this.nZ=Math.floor((this.maxZ-this.minZ)*this.parameters.density),this.nX=Math.min(this.nX,333),this.nY=Math.min(this.nY,333),this.nZ=Math.min(this.nZ,333),this.dX=(this.maxX-this.minX)/(this.nX-1),this.dY=(this.maxY-this.minY)/(this.nY-1),this.dZ=(this.maxZ-this.minZ)/(this.nZ-1)},n.prototype.initData=function(){var t=this.nX*this.nY*this.nZ;this.field=new Float32Array(t),this.distanceField=new Float32Array(t),this.proximityMap=new Int32Array(t);for(var e=Number.POSITIVE_INFINITY,n=0,r=this.proximityMap.length;n<r;n++)this.distanceField[n]=e,this.proximityMap[n]=-1},n.prototype.updateMinIndex=function(t,e,n){this.minIndex.i=Math.max(0|Math.floor((t-this.minX)/this.dX),0),this.minIndex.j=Math.max(0|Math.floor((e-this.minY)/this.dY),0),this.minIndex.k=Math.max(0|Math.floor((n-this.minZ)/this.dZ),0)},n.prototype.updateMaxIndex=function(t,e,n){this.maxIndex.i=Math.min(0|Math.ceil((t-this.minX)/this.dX),this.nX),this.maxIndex.j=Math.min(0|Math.ceil((e-this.minY)/this.dY),this.nY),this.maxIndex.k=Math.min(0|Math.ceil((n-this.minZ)/this.dZ),this.nZ)},n.prototype.addBall=function(t,e){var n=e*e,r=this.x[t],i=this.y[t],o=this.z[t];this.updateMinIndex(r-e,i-e,o-e),this.updateMaxIndex(r+e,i+e,o+e);var s=this.minIndex.i,a=this.minIndex.j,u=this.minIndex.k,c=this.maxIndex.i,h=this.maxIndex.j,f=this.maxIndex.k;r=this.minX-r,i=this.minY-i,o=this.minZ-o;for(var l=u;l<f;l++)for(var d=o+l*this.dZ,p=d*d,m=l*this.nY,v=a;v<h;v++)for(var y=i+v*this.dY,g=p+y*y,b=this.nX*(m+v),_=s;_<c;_++){var w=r+_*this.dX,x=g+w*w,C=b+_,I=n/(1e-6+x)-1;x<this.distanceField[C]&&(this.proximityMap[C]=t,this.distanceField[C]=x),I>0&&(this.field[C]+=I)}},n.prototype.processChunks=function(){return a(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return u(this,function(u){switch(u.label){case 0:return e=1e4,n=t.Utils.PerformanceMonitor.currentTime(),[4,this.ctx.updateProgress("Creating field...",!0)];case 1:u.sent(),r=0,i=this.atomIndices.length,u.label=2;case 2:return r<i?(o=this.atomIndices[r],s=this.vdwScaleFactor*this.parameters.atomRadius(o)+this.parameters.probeRadius,s>=0&&this.addBall(o,s),(r+1)%e!==0?[3,4]:(a=t.Utils.PerformanceMonitor.currentTime(),a-n>t.Computation.UpdateProgressDelta?(n=a,[4,this.ctx.updateProgress("Creating field...",!0,r,i)]):[3,4])):[3,5];case 3:u.sent(),u.label=4;case 4:return r++,[3,2];case 5:return[2]}})})},n.prototype.finish=function(){var n=e.LinearAlgebra.Matrix4.empty();e.LinearAlgebra.Matrix4.fromTranslation(n,[this.minX,this.minY,this.minZ]),n[0]=this.dX,n[5]=this.dY,n[10]=this.dZ;var r={data:{scalarField:new t.Formats.Density.Field3DZYX(this.field,[this.nX,this.nY,this.nZ]),annotationField:this.parameters.interactive?new t.Formats.Density.Field3DZYX(this.proximityMap,[this.nX,this.nY,this.nZ]):void 0,isoLevel:.05},bottomLeft:{x:this.minX,y:this.minY,z:this.minZ},topRight:{x:this.maxX,y:this.maxY,z:this.maxZ},transform:n,inputParameters:this.inputParameters,parameters:this.parameters};return this.distanceField=null,this.proximityMap=null,r},n.prototype.run=function(){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.ctx.updateProgress("Initializing...")];case 1:return t.sent(),this.findBounds(),this.initData(),[4,this.processChunks()];case 2:return t.sent(),[4,this.ctx.updateProgress("Finalizing...",void 0,this.atomIndices.length,this.atomIndices.length)];case 3:return t.sent(),[2,this.finish()]}})})},n}();n.createMolecularIsoFieldAsync=r,n.computeMolecularSurfaceAsync=i}(n=e.MolecularSurface||(e.MolecularSurface={}))}(e=t.Geometry||(t.Geometry={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n=t.Utils.DataTable,r=function(){function e(e){this.id=e,this.map=t.Utils.FastMap.create()}return e.prototype.add=function(e,n,r,i){void 0===i&&(i=!0);var o=this.map.get(e);if(void 0!==o){var s=o.get(n);void 0===s&&o.set(n,r)}else{var a=t.Utils.FastMap.create();a.set(n,r),this.map.set(e,a)}i&&this.add(n,e,r,!1)},e}();e.ComponentBondInfoEntry=r;var i=function(){function e(){this.entries=t.Utils.FastMap.create()}return e.prototype.newEntry=function(t){var e=new r(t);return this.entries.set(t,e),e},e}();e.ComponentBondInfo=i;var o=function(){function t(t,e,n){this.asymId=t,this.seqNumber=e,this.insCode=n}return t.areEqual=function(t,e,n,r,i){return t.asymId===n[e]&&t.seqNumber===r[e]&&t.insCode===i[e]},t.compare=function(t,e){return t.asymId===e.asymId?t.seqNumber===e.seqNumber?t.insCode===e.insCode?0:void 0===t.insCode?-1:void 0===e.insCode?1:t.insCode<e.insCode?-1:1:t.seqNumber<e.seqNumber?-1:1:t.asymId<e.asymId?-1:1},t.compareResidue=function(t,e,n,r,i){return t.asymId===n[e]?t.seqNumber===r[e]?t.insCode===i[e]?0:void 0===t.insCode?-1:void 0===i[e]?1:t.insCode<i[e]?-1:1:t.seqNumber<r[e]?-1:1:t.asymId<n[e]?-1:1},t}();e.PolyResidueIdentifier=o;var s=function(){function t(t,e,n,r){void 0===r&&(r={}),this.type=t,this.startResidueId=e,this.endResidueId=n,this.info=r,this.startResidueIndex=-1,this.endResidueIndex=-1}return Object.defineProperty(t.prototype,"length",{get:function(){return this.endResidueIndex-this.startResidueIndex},enumerable:!0,configurable:!0}),t}();e.SecondaryStructureElement=s;var a=function(){function t(t,e,n,r,i){this.spacegroupName=t,this.cellSize=e,this.cellAngles=n,this.toFracTransform=r,this.isNonStandardCrytalFrame=i}return t}();e.SymmetryInfo=a;var u=function(){function t(t,e,n){this.id=t,this.name=e,this.operator=n}return t}();e.AssemblyOperator=u;var c=function(){function t(t,e){this.operators=t,this.asymIds=e}return t}();e.AssemblyGenEntry=c;var h=function(){function t(t){this.name=t,this.gens=[]}return t}();e.AssemblyGen=h;var f=function(){function t(t,e){this.operators=t,this.assemblies=e}return t}();e.AssemblyInfo=f;var l;!function(t){var e=n.typedColumn(Int32Array),r=n.typedColumn(Float32Array),i=n.stringColumn,o=n.stringNullColumn;t.Positions={x:r,y:r,z:r},t.Atoms={id:e,altLoc:i,residueIndex:e,chainIndex:e,entityIndex:e,name:i,elementSymbol:i,occupancy:r,tempFactor:r,authName:i,rowIndex:e},t.Residues={name:i,seqNumber:e,asymId:i,authName:i,authSeqNumber:e,authAsymId:i,insCode:o,entityId:i,isHet:n.typedColumn(Int8Array),atomStartIndex:e,atomEndIndex:e,chainIndex:e,entityIndex:e,secondaryStructureIndex:e},t.Chains={asymId:i,entityId:i,authAsymId:i,atomStartIndex:e,atomEndIndex:e,residueStartIndex:e,residueEndIndex:e,
entityIndex:e,sourceChainIndex:void 0,operatorIndex:void 0},t.Entities={entityId:i,type:n.customColumn(),atomStartIndex:e,atomEndIndex:e,residueStartIndex:e,residueEndIndex:e,chainStartIndex:e,chainEndIndex:e},t.Bonds={atomAIndex:e,atomBIndex:e,type:n.typedColumn(Int8Array)}}(l=e.Tables||(e.Tables={}));var d=function(){function e(t,e,n){this.matrix=t,this.id=e,this.isIdentity=n}return e.prototype.apply=function(e){t.Geometry.LinearAlgebra.Matrix4.transformVector3(e,e,this.matrix)},e.applyToModelUnsafe=function(e,n){for(var r={x:.1,y:.1,z:.1},i=n.positions,o=i.x,s=i.y,a=i.z,u=0,c=n.positions.count;u<c;u++)r.x=o[u],r.y=s[u],r.z=a[u],t.Geometry.LinearAlgebra.Matrix4.transformVector3(r,r,e),o[u]=r.x,s[u]=r.y,a[u]=r.z},e}();e.Operator=d;var p;!function(n){function r(t,e,n){return void 0===n&&(n={}),{id:t,models:e,properties:n}}n.create=r;var i;!function(n){function r(n){var r=t.Utils.extend({},n),i=void 0;return Object.defineProperty(r,"queryContext",{enumerable:!0,configurable:!1,get:function(){return i?i:i=e.Query.Context.ofStructure(r)}}),r}function i(t,e,n){for(var i=t.positions,o=i.x,s=i.y,a=i.z,u=t.positions.getBuilder(t.positions.count).seal(),c=u.x,h=u.y,f=u.z,l={x:0,y:0,z:0},d=0,p=t.positions.count;d<p;d++)n(e,o[d],s[d],a[d],l),c[d]=l.x,h[d]=l.y,f[d]=l.z;return r({id:t.id,modelId:t.modelId,data:t.data,positions:u,parent:t.parent,source:t.source,operators:t.operators})}n.create=r;var o;!function(t){t[t.File=0]="File",t[t.Computed=1]="Computed"}(o=n.Source||(n.Source={})),n.withTransformedXYZ=i}(i=n.Model||(n.Model={}))}(p=e.Molecule||(e.Molecule={}))}(e=t.Structure||(t.Structure={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n=t.Geometry.LinearAlgebra.Matrix4,r=t.Geometry.LinearAlgebra.Vector4,i=function(){function t(t){if(this.info=t,this.temp=n.empty(),this.tempV=new Float64Array(4),void 0===o.Spacegroup[t.spacegroupName])throw"'"+t.spacegroupName+"' is not a spacegroup recognized by the library.";this.space=this.getSpace(),this.operators=this.getOperators()}return Object.defineProperty(t.prototype,"operatorCount",{get:function(){return this.operators.length},enumerable:!0,configurable:!0}),t.prototype.getOperatorMatrix=function(t,e,r,i,o){return this.tempV[0]=e,this.tempV[1]=r,this.tempV[2]=i,n.fromTranslation(this.temp,this.tempV),n.mul(o,n.mul(o,n.mul(o,this.space.fromFrac,this.temp),this.operators[t]),this.space.toFrac),o},t.prototype.getSpace=function(){var t=this.info.toFracTransform,e=n.empty();return n.invert(e,t),{toFrac:t,fromFrac:e,baseX:r.transform(r.create(),r.fromValues(1,0,0,1),t),baseY:r.transform(r.create(),r.fromValues(0,1,0,1),t),baseZ:r.transform(r.create(),r.fromValues(0,0,1,1),t)}},t.getOperator=function(t){var e=o.Transform[t[0]],r=o.Transform[t[1]],i=o.Transform[t[2]];return n.ofRows([e,r,i,[0,0,0,1]])},t.prototype.getOperators=function(){var e=o.Group[o.Spacegroup[this.info.spacegroupName]];return e.map(function(e){return t.getOperator(o.Operator[e])})},t}();e.Spacegroup=i;var o;!function(t){t.Transform=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[-1,0,0,0],[0,-1,0,0],[0,0,-1,0],[0,1,0,.5],[1,0,0,.5],[-1,0,0,.5],[0,0,1,.5],[0,-1,0,.5],[0,0,-1,.5],[1,0,0,.25],[0,-1,0,.25],[0,0,1,.25],[-1,0,0,.25],[0,1,0,.25],[0,-1,0,.75],[0,0,1,.75],[0,1,0,.75],[1,0,0,.75],[-1,0,0,.75],[0,0,-1,.25],[0,0,-1,.75],[1,-1,0,0],[-1,1,0,0],[0,0,1,.333333333333333],[0,0,1,.666666666666667],[1,0,0,.666666666666667],[0,1,0,.333333333333333],[0,-1,0,.666666666666667],[1,-1,0,.333333333333333],[-1,1,0,.666666666666667],[-1,0,0,.333333333333333],[1,0,0,.333333333333333],[0,1,0,.666666666666667],[0,-1,0,.333333333333333],[1,-1,0,.666666666666667],[-1,1,0,.333333333333333],[-1,0,0,.666666666666667],[0,0,-1,.333333333333333],[0,0,-1,.666666666666667],[0,0,1,.833333333333333],[0,0,1,.166666666666667],[0,0,-1,.833333333333333],[0,0,-1,.166666666666667]],t.Operator=[[0,1,2],[3,4,5],[3,1,5],[3,6,5],[7,6,2],[8,6,5],[0,4,2],[0,4,9],[7,10,2],[7,10,9],[0,10,2],[8,10,5],[3,1,11],[3,6,11],[0,10,9],[8,6,11],[3,4,2],[0,4,5],[3,4,9],[7,10,5],[8,4,9],[8,10,9],[8,10,2],[0,6,9],[3,10,9],[0,10,11],[7,1,9],[8,1,11],[7,4,11],[7,6,9],[7,10,11],[3,10,2],[8,1,5],[0,4,11],[3,1,2],[3,1,9],[7,4,2],[8,1,2],[8,1,9],[3,6,9],[7,4,9],[8,6,2],[8,6,9],[3,6,2],[12,13,14],[15,16,14],[12,17,18],[15,19,18],[20,13,18],[21,16,18],[20,17,14],[21,19,14],[0,1,5],[8,10,11],[7,6,11],[7,6,5],[8,4,2],[7,4,5],[7,1,5],[7,1,11],[0,10,5],[0,1,11],[0,6,11],[0,6,5],[3,10,11],[8,4,11],[15,13,22],[12,16,22],[15,17,23],[12,19,23],[21,13,23],[20,16,23],[21,17,22],[20,19,22],[4,0,2],[1,3,2],[4,0,14],[1,3,18],[4,0,9],[1,3,9],[4,0,18],[1,3,14],[10,7,9],[6,8,9],[4,7,14],[6,3,18],[10,0,18],[1,8,14],[1,3,5],[4,0,5],[6,8,11],[10,7,11],[1,3,11],[4,0,11],[10,7,2],[6,8,2],[3,10,22],[7,1,23],[8,4,23],[0,6,22],[1,0,5],[4,3,5],[1,0,23],[4,3,22],[10,7,14],[6,8,18],[8,6,22],[7,10,23],[4,3,11],[1,0,11],[1,0,22],[4,3,23],[10,7,18],[6,8,14],[8,6,23],[7,10,22],[6,7,11],[10,8,11],[8,1,23],[0,10,22],[3,6,22],[7,4,23],[4,3,2],[1,0,2],[10,8,2],[6,7,2],[4,3,9],[1,0,9],[10,8,9],[6,7,9],[4,8,14],[6,0,18],[10,3,18],[1,7,14],[4,8,18],[6,0,14],[10,3,14],[1,7,18],[6,7,5],[10,8,5],[6,8,5],[10,7,5],[8,1,22],[0,10,23],[3,6,23],[7,4,22],[4,24,2],[25,3,2],[4,24,26],[25,3,27],[4,24,27],[25,3,26],[28,29,26],[30,31,26],[32,33,26],[34,35,27],[36,37,27],[38,39,27],[2,0,1],[1,2,0],[1,25,5],[24,0,5],[39,36,40],[35,38,40],[37,34,40],[33,30,41],[29,32,41],[31,28,41],[5,3,4],[4,5,3],[25,1,5],[0,24,5],[24,4,5],[3,25,5],[4,3,41],[25,1,40],[24,4,41],[3,25,40],[4,3,40],[25,1,41],[24,4,40],[3,25,41],[35,34,40],[37,36,40],[39,38,40],[29,28,41],[31,30,41],[33,32,41],[3,5,4],[5,4,3],[25,1,2],[0,24,2],[24,4,2],[3,25,2],[25,1,9],[0,24,9],[24,4,9],[3,25,9],[30,33,26],[32,29,26],[28,31,26],[36,39,27],[38,35,27],[34,37,27],[0,2,1],[2,1,0],[30,33,42],[32,29,42],[28,31,42],[36,39,43],[38,35,43],[34,37,43],[7,9,6],[9,6,7],[25,1,11],[0,24,11],[24,4,11],[3,25,11],[35,34,44],[37,36,44],[39,38,44],[29,28,45],[31,30,45],[33,32,45],[8,11,10],[11,10,8],[1,25,2],[24,0,2],[1,25,42],[24,0,43],[1,25,43],[24,0,42],[1,25,27],[24,0,26],[1,25,26],[24,0,27],[1,25,9],[24,0,9],[4,24,5],[25,3,5],[4,24,11],[25,3,11],[1,0,40],[4,3,44],[0,24,45],[1,0,41],[4,3,45],[0,24,44],[0,24,40],[0,24,41],[2,3,4],[5,3,1],[5,0,4],[4,2,3],[1,5,3],[4,5,0],[2,7,6],[2,8,10],[5,8,6],[5,7,10],[1,9,7],[4,9,8],[1,11,8],[4,11,7],[9,0,6],[9,3,10],[11,3,6],[11,0,10],[6,2,7],[10,2,8],[6,5,8],[10,5,7],[9,7,1],[9,8,4],[11,8,1],[11,7,4],[6,9,0],[10,9,3],[6,11,3],[10,11,0],[9,7,6],[9,8,10],[11,8,6],[11,7,10],[6,9,7],[10,9,8],[6,11,8],[10,11,7],[2,3,10],[5,8,1],[11,0,4],[10,2,3],[1,5,8],[4,11,0],[5,0,1],[2,0,4],[2,3,1],[1,5,0],[4,2,0],[1,2,3],[11,8,10],[11,7,6],[9,7,10],[9,8,6],[10,11,8],[6,11,7],[10,9,7],[6,9,8],[5,8,10],[5,7,6],[2,7,10],[2,8,6],[4,11,8],[1,11,7],[4,9,7],[1,9,8],[11,3,10],[11,0,6],[9,0,10],[9,3,6],[10,5,8],[6,5,7],[10,2,7],[6,2,8],[11,8,4],[11,7,1],[9,7,4],[9,8,1],[10,11,3],[6,11,0],[10,9,0],[6,9,3],[22,15,13],[22,12,16],[14,12,13],[14,15,16],[13,22,15],[16,22,12],[13,14,12],[16,14,15],[22,21,17],[22,20,19],[14,20,17],[14,21,19],[13,23,21],[16,23,20],[13,18,20],[16,18,21],[23,15,17],[23,12,19],[18,12,17],[18,15,19],[17,22,21],[19,22,20],[17,14,20],[19,14,21],[23,21,13],[23,20,16],[18,20,13],[18,21,16],[17,23,15],[19,23,12],[17,18,12],[19,18,15],[5,0,6],[2,7,4],[9,3,1],[6,5,0],[4,2,7],[1,9,3],[0,2,4],[3,2,1],[0,5,1],[2,1,3],[2,4,0],[5,1,0],[7,9,10],[8,9,6],[7,11,6],[9,6,8],[9,10,7],[11,6,7],[1,7,11],[4,8,11],[1,8,9],[4,7,9],[0,9,10],[3,9,6],[3,11,10],[0,11,6],[2,6,8],[2,10,7],[5,6,7],[5,10,8],[6,0,11],[10,3,11],[6,3,9],[10,0,9],[7,2,10],[8,2,6],[8,5,10],[7,5,6],[9,1,8],[9,4,7],[11,1,7],[11,4,8],[7,9,4],[8,9,1],[8,11,4],[7,11,1],[9,6,3],[9,10,0],[11,6,0],[11,10,3],[19,12,23],[13,15,22],[16,21,18],[17,20,14],[20,14,17],[21,18,16],[15,22,13],[12,23,19],[18,16,21],[14,17,20],[23,19,12],[22,13,15],[19,20,22],[13,21,23],[16,15,14],[17,12,18],[20,18,13],[21,14,19],[15,23,17],[12,22,16],[18,19,15],[14,13,12],[23,16,20],[22,17,21],[16,12,22],[17,15,23],[19,21,14],[13,20,18],[12,14,13],[15,18,19],[21,22,17],[20,23,16],[14,16,15],[18,17,12],[22,19,20],[23,13,21],[16,20,23],[17,21,22],[19,15,18],[13,12,14],[12,18,17],[15,14,16],[21,23,13],[20,22,19],[14,19,21],[18,13,20],[22,16,12],[23,17,15],[19,12,22],[17,21,23],[16,15,18],[13,20,14],[20,14,13],[15,18,16],[21,23,17],[12,22,19],[18,16,15],[14,13,20],[22,19,12],[23,17,21],[3,2,4],[3,5,1],[0,5,4],[2,4,3],[5,1,3],[5,4,0],[1,7,9],[4,8,9],[1,8,11],[4,7,11],[0,9,6],[3,9,10],[3,11,6],[0,11,10],[2,6,7],[2,10,8],[5,6,8],[5,10,7],[6,0,9],[10,3,9],[6,3,11],[10,0,11],[7,2,6],[8,2,10],[8,5,6],[7,5,10],[9,1,7],[9,4,8],[11,1,8],[11,4,7],[7,9,1],[8,9,4],[8,11,1],[7,11,4],[9,6,0],[9,10,3],[11,6,3],[11,10,0],[8,9,10],[8,11,6],[7,11,10],[9,10,8],[11,6,8],[11,10,7],[6,0,2],[10,3,2],[6,3,5],[10,0,5],[7,2,1],[8,2,4],[8,5,1],[7,5,4],[9,1,0],[9,4,3],[11,1,3],[11,4,0],[1,7,2],[4,8,2],[1,8,5],[4,7,5],[0,9,1],[3,9,4],[3,11,1],[0,11,4],[2,6,0],[2,10,3],[5,6,3],[5,10,0],[0,2,6],[3,2,10],[3,5,6],[0,5,10],[2,1,7],[2,4,8],[5,1,8],[5,4,7],[16,12,14],[13,21,18],[19,15,23],[17,20,22],[12,14,16],[21,18,13],[15,23,19],[20,22,17],[14,16,12],[18,13,21],[23,19,15],[22,17,20],[19,20,18],[17,15,14],[16,21,22],[13,12,23],[20,18,19],[15,14,17],[21,22,16],[12,23,13],[18,19,20],[14,17,15],[22,16,21],[23,13,12],[6,0,5],[10,3,5],[6,3,2],[10,0,2],[7,2,4],[8,2,1],[8,5,4],[7,5,1],[9,1,3],[9,4,0],[11,1,0],[11,4,3],[1,7,5],[4,8,5],[1,8,2],[4,7,2],[0,9,4],[3,9,1],[3,11,4],[0,11,1],[2,6,3],[2,10,0],[5,6,0],[5,10,3],[0,2,10],[3,2,6],[3,5,10],[0,5,6],[2,1,8],[2,4,7],[5,1,7],[5,4,8],[21,17,23],[20,16,22],[12,13,18],[15,19,14],[23,21,17],[22,20,16],[18,12,13],[14,15,19],[17,23,21],[16,22,20],[13,18,12],[19,14,15],[21,13,22],[20,19,23],[12,17,14],[15,16,18],[23,15,13],[22,12,19],[18,20,17],[14,21,16],[17,22,15],[16,23,12],[13,14,20],[19,18,21],[15,17,22],[12,16,23],[20,13,14],[21,19,18],[22,21,13],[23,20,19],[14,12,17],[18,15,16],[13,23,15],[19,22,12],[17,18,20],[16,14,21],[15,13,23],[12,19,22],[20,17,18],[21,16,14],[22,15,17],[23,12,16],[14,20,13],[18,21,19],[13,22,21],[19,23,20],[17,14,12],[16,18,15],[6,5,3],[4,9,3],[9,3,4],[5,7,4],[4,5,7],[5,3,6]],t.Group=[[0],[0,1],[0,2],[0,3],[0,2,4,5],[0,6],[0,7],[0,6,4,8],[0,7,4,9],[0,6,2,1],[0,3,1,10],[0,6,2,1,4,8,5,11],[0,12,1,7],[0,1,13,14],[0,12,1,7,4,15,11,9],[0,16,2,17],[0,18,12,17],[0,16,5,19],[0,20,13,19],[0,18,12,17,4,21,15,19],[0,16,2,17,4,22,5,19],[0,16,2,17,23,24,13,25,26,20,27,28,4,22,5,19],[0,16,17,2,29,21,30,15],[0,20,13,19,29,31,32,33],[0,16,6,34],[0,18,7,34],[0,16,7,35],[0,16,36,37],[0,18,36,38],[0,16,14,39],[0,20,40,34],[0,16,8,41],[0,18,8,42],[0,16,9,42],[0,16,6,34,4,22,8,41],[0,18,7,34,4,21,9,41],[0,16,7,35,4,22,9,42],[0,16,6,34,23,24,14,39],[0,16,10,43,23,24,7,35],[0,16,36,37,23,24,9,42],[0,16,8,41,23,24,40,38],[0,16,6,34,23,24,14,39,26,20,40,38,4,22,8,41],[0,16,44,45,23,24,46,47,26,20,48,49,4,22,50,51],[0,16,6,34,29,21,9,42],[0,16,8,41,29,21,7,35],[0,16,36,37,29,21,14,39],[0,16,2,17,1,52,6,34],[0,16,2,17,53,54,9,42],[0,16,12,33,1,52,7,35],[0,16,2,17,11,55,8,41],[0,56,2,57,1,58,6,37],[0,56,15,25,1,58,9,39],[0,20,27,17,1,59,40,34],[0,56,12,28,1,58,7,38],[0,16,5,19,1,52,8,41],[0,22,13,28,1,55,14,38],[0,18,13,60,1,61,14,43],[0,16,15,30,1,52,9,42],[0,16,5,19,11,55,6,34],[0,21,12,19,1,54,7,41],[0,20,13,19,1,59,14,41],[0,20,3,30,1,59,10,42],[0,18,12,17,1,61,7,34,4,21,15,19,11,54,9,41],[0,24,13,17,1,62,14,34,4,20,27,19,11,59,40,41],[0,16,2,17,1,52,6,34,4,22,5,19,11,55,8,41],[0,16,12,33,1,52,7,35,4,22,15,30,11,55,9,42],[0,31,3,17,1,63,10,34,4,56,32,19,11,58,36,41],[0,22,2,19,64,59,14,38,4,16,5,17,65,62,40,39],[0,16,2,17,1,52,6,34,23,24,13,25,64,62,14,39,26,20,27,28,65,59,40,38,4,22,5,19,11,55,8,41],[0,16,2,17,66,67,44,45,23,24,13,25,68,69,46,47,26,20,27,28,70,71,48,49,4,22,5,19,72,73,50,51],[0,16,2,17,1,52,6,34,29,21,15,30,53,54,9,42],[0,16,5,19,1,52,8,41,29,21,12,33,53,54,7,35],[0,20,13,19,1,59,14,41,29,31,32,33,53,63,36,35],[0,31,3,17,1,63,10,34,29,20,27,30,53,59,40,42],[0,16,74,75],[0,18,76,77],[0,16,78,79],[0,18,80,81],[0,16,74,75,29,21,82,83],[0,21,84,85,29,16,86,87],[0,16,88,89],[0,16,88,89,29,21,90,91],[0,16,74,75,1,52,88,89],[0,16,78,79,1,52,92,93],[0,16,94,95,11,55,88,89],[0,16,82,83,53,54,88,89],[0,16,74,75,1,52,88,89,29,21,82,83,53,54,90,91],[0,21,84,85,96,97,88,91,29,16,86,87,98,99,90,89],[0,16,74,75,2,17,100,101],[0,16,94,95,5,19,100,101],[0,18,76,77,2,33,102,103],[0,18,104,105,106,107,100,108],[0,16,78,79,2,17,109,108],[0,16,82,83,15,30,100,101],[0,18,80,81,2,33,110,111],[0,18,112,113,114,115,100,108],[0,16,74,75,2,17,100,101,29,21,82,83,15,30,116,117],[0,21,84,85,118,119,116,101,29,16,86,87,120,121,100,117],[0,16,74,75,6,34,122,123],[0,16,74,75,8,41,124,125],[0,16,78,79,7,35,122,123],[0,16,82,83,9,42,122,123],[0,16,74,75,7,35,126,127],[0,16,74,75,9,42,128,129],[0,16,78,79,6,34,126,127],[0,16,78,79,8,41,128,129],[0,16,74,75,6,34,122,123,29,21,82,83,9,42,128,129],[0,16,74,75,7,35,126,127,29,21,82,83,8,41,124,125],[0,21,84,85,6,42,130,131,29,16,86,87,9,34,132,133],[0,21,84,85,7,41,134,135,29,16,86,87,8,35,136,137],[0,16,89,88,2,17,122,123],[0,16,89,88,12,33,126,127],[0,16,89,88,5,19,124,125],[0,16,89,88,15,30,128,129],[0,16,88,89,6,34,100,101],[0,16,89,88,7,35,109,108],[0,16,89,88,8,41,138,139],[0,16,89,88,9,42,116,117],[0,16,89,88,6,34,100,101,29,21,91,90,9,42,116,117],[0,16,89,88,7,35,109,108,29,21,91,90,8,41,138,139],[0,16,89,88,2,17,122,123,29,21,91,90,15,30,128,129],[0,16,89,88,118,121,132,131,29,21,91,90,120,119,130,133],[0,16,74,75,2,17,100,101,1,52,88,89,6,34,122,123],[0,16,74,75,12,33,109,108,1,52,88,89,7,35,126,127],[0,16,74,75,2,17,100,101,11,55,140,141,8,41,124,125],[0,16,74,75,2,17,100,101,53,54,90,91,9,42,128,129],[0,16,74,75,5,19,138,139,1,52,88,89,8,41,124,125],[0,16,74,75,15,30,116,117,1,52,88,89,9,42,128,129],[0,16,94,95,5,19,100,101,11,55,88,89,6,34,124,125],[0,16,94,95,15,30,109,108,11,55,88,89,7,35,128,129],[0,16,78,79,2,17,109,108,1,52,92,93,6,34,126,127],[0,16,78,79,12,33,100,101,1,52,92,93,7,35,122,123],[0,16,82,83,12,33,138,139,53,54,88,89,8,41,126,127],[0,16,82,83,2,17,116,117,53,54,88,89,9,42,122,123],[0,16,78,79,5,19,116,117,1,52,92,93,8,41,128,129],[0,16,82,83,15,30,100,101,1,52,90,91,9,42,122,123],[0,16,82,83,15,30,100,101,53,54,88,89,6,34,128,129],[0,16,82,83,5,19,109,108,53,54,88,89,7,35,124,125],[0,16,74,75,2,17,100,101,1,52,88,89,6,34,122,123,29,21,82,83,15,30,116,117,53,54,90,91,9,42,128,129],[0,16,74,75,12,33,109,108,1,52,88,89,7,35,126,127,29,21,82,83,5,19,138,139,53,54,90,91,8,41,124,125],[0,21,84,85,118,119,116,101,96,97,88,91,9,34,132,133,29,16,86,87,120,121,100,117,98,99,90,89,6,42,130,131],[0,21,84,85,142,143,138,108,96,97,88,91,8,35,136,137,29,16,86,87,144,145,109,139,98,99,90,89,7,41,134,135],[0,146,147],[0,148,149],[0,150,151],[0,146,147,152,153,154,155,156,157],[0,158,159],[0,146,147,1,160,161],[0,146,147,1,160,161,152,153,154,162,163,164,155,156,157,165,166,167],[0,158,159,1,168,169],[0,146,147,101,170,171],[0,146,147,100,172,173],[0,148,149,174,175,171],[0,148,149,100,176,177],[0,150,151,178,179,171],[0,150,151,100,180,181],[0,146,147,100,172,173,152,153,154,182,183,184,155,156,157,185,186,187],[0,158,159,101,188,189],[0,146,147,122,190,191],[0,146,147,123,192,193],[0,146,147,126,194,195],[0,146,147,127,196,197],[0,146,147,122,190,191,152,153,154,198,199,200,155,156,157,201,202,203],[0,158,159,123,204,205],[0,146,147,126,194,195,152,153,154,206,207,208,155,156,157,209,210,211],[0,158,159,129,212,213],[0,146,147,101,170,171,1,160,161,123,192,193],[0,146,147,108,214,215,1,160,161,127,196,197],[0,146,147,100,172,173,1,160,161,122,190,191],[0,146,147,109,216,217,1,160,161,126,194,195],[0,146,147,100,172,173,1,160,161,122,190,191,152,153,154,182,183,184,162,163,164,198,199,200,155,156,157,185,186,187,165,166,167,201,202,203],[0,158,159,101,188,189,1,168,169,123,204,205],[0,146,147,109,216,217,1,160,161,126,194,195,152,153,154,218,219,220,162,163,164,206,207,208,155,156,157,221,222,223,165,166,167,209,210,211],[0,158,159,117,224,225,1,168,169,129,212,213],[0,146,147,16,226,227],[0,148,149,18,228,229],[0,150,151,18,230,231],[0,150,151,16,232,233],[0,148,149,16,234,235],[0,146,147,18,236,237],[0,146,147,52,238,239],[0,146,147,16,226,227,1,160,161,52,238,239],[0,146,147,18,236,237,1,160,161,61,240,241],[0,146,147,16,226,227,100,172,173,101,170,171],[0,148,149,18,228,229,242,172,181,243,214,244],[0,150,151,18,230,231,245,172,177,246,214,247],[0,150,151,16,232,233,245,172,177,174,170,248],[0,148,149,16,234,235,242,172,181,178,170,249],[0,146,147,18,236,237,100,172,173,108,214,215],[0,146,147,16,226,227,122,190,191,123,192,193],[0,146,147,16,226,227,126,194,195,127,196,197],[0,146,147,18,236,237,126,194,195,123,192,193],[0,146,147,18,236,237,122,190,191,127,196,197],[0,146,147,52,238,239,122,190,191,101,170,171],[0,146,147,61,240,241,126,194,195,101,170,171],[0,146,147,52,238,239,100,172,173,123,192,193],[0,146,147,61,240,241,100,172,173,127,196,197],[0,146,147,16,226,227,100,172,173,101,170,171,1,160,161,52,239,238,122,190,191,123,192,193],[0,146,147,16,226,227,109,216,217,108,214,215,1,160,161,52,239,238,126,194,195,127,196,197],[0,146,147,18,236,237,109,216,217,101,170,171,1,160,161,61,241,240,126,194,195,123,192,193],[0,146,147,18,236,237,100,172,173,108,214,215,1,160,161,61,241,240,122,190,191,127,196,197],[0,16,2,17,158,250,251,252,159,253,254,255],[0,16,2,17,158,250,251,252,159,253,254,255,23,24,13,25,256,257,258,259,260,261,262,263,26,20,27,28,264,265,266,267,268,269,270,271,4,22,5,19,272,273,274,275,276,277,278,279],[0,16,2,17,158,250,251,252,159,253,254,255,29,21,15,30,280,281,282,283,284,285,286,287],[0,20,13,19,158,273,266,259,159,261,278,271],[0,20,13,19,158,273,266,259,159,261,278,271,29,31,32,33,280,288,289,290,284,291,292,293],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299],[0,16,2,17,158,250,251,252,159,253,254,255,53,54,9,42,300,301,302,303,304,305,306,307],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299,23,24,13,25,256,257,258,259,260,261,262,263,64,62,14,39,308,309,310,311,312,313,314,315,26,20,27,28,264,265,266,267,268,269,270,271,65,59,40,38,316,317,318,319,320,321,322,323,4,22,5,19,272,273,274,275,276,277,278,279,11,55,8,41,324,325,326,327,328,329,330,331],[0,16,2,17,158,250,251,252,159,253,254,255,66,67,44,45,332,333,334,335,336,337,338,339,23,24,13,25,256,257,258,259,260,261,262,263,68,69,46,47,340,341,342,343,344,345,346,347,26,20,27,28,264,265,266,267,268,269,270,271,70,71,48,49,348,349,350,351,352,353,354,355,4,22,5,19,272,273,274,275,276,277,278,279,72,73,50,51,356,357,358,359,360,361,362,363],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299,29,21,15,30,280,281,282,283,284,285,286,287,53,54,9,42,300,301,302,303,304,305,306,307],[0,20,13,19,158,273,266,259,159,261,278,271,1,59,14,41,168,325,318,311,169,313,330,323],[0,20,13,19,158,273,266,259,159,261,278,271,1,59,14,41,168,325,318,311,169,313,330,323,29,31,32,33,280,288,289,290,284,291,292,293,53,63,36,35,300,364,365,366,304,367,368,369],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,23,24,13,25,256,257,258,259,260,261,262,263,382,383,384,385,386,387,388,389,390,391,392,393,26,20,27,28,264,265,266,267,268,269,270,271,394,395,396,397,398,399,400,401,402,403,404,405,4,22,5,19,272,273,274,275,276,277,278,279,138,139,95,94,406,407,408,409,410,411,412,413],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,29,21,15,30,280,281,282,283,284,285,286,287,116,117,83,82,376,377,224,378,379,380,381,225],[0,20,13,19,158,273,266,259,159,261,278,271,450,415,440,429,454,431,420,445,458,447,436,425],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473,29,31,32,33,280,288,289,290,284,291,292,293,450,415,440,429,454,431,420,445,458,447,436,425],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479,23,24,13,25,256,257,258,259,260,261,262,263,480,481,482,483,484,485,486,487,488,489,490,491,26,20,27,28,264,265,266,267,268,269,270,271,492,493,494,495,496,497,498,499,500,501,502,503,4,22,5,19,272,273,274,275,276,277,278,279,125,124,140,141,504,505,506,507,508,509,510,511],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479,29,21,15,30,280,281,282,283,284,285,286,287,129,128,90,91,212,512,513,514,213,515,516,517],[0,16,2,17,158,250,251,252,159,253,254,255,129,128,90,91,212,512,513,514,213,515,516,517],[0,16,2,17,158,250,251,252,159,253,254,255,129,128,90,91,212,512,513,514,213,515,516,517,23,24,13,25,256,257,258,259,260,261,262,263,518,519,520,521,522,523,524,525,526,527,528,529,26,20,27,28,264,265,266,267,268,269,270,271,530,531,532,533,534,535,536,537,538,539,540,541,4,22,5,19,272,273,274,275,276,277,278,279,127,126,92,93,542,543,544,545,546,547,548,549],[0,20,13,19,158,273,266,259,159,261,278,271,550,551,552,553,554,555,556,557,558,559,560,561,29,31,32,33,280,288,289,290,284,291,292,293,562,563,564,565,566,567,568,569,570,571,572,573],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,53,54,9,42,300,301,302,303,304,305,306,307,128,129,91,90,513,514,212,512,517,516,515,213],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,1,52,6,34,168,294,295,296,169,297,298,299,128,129,91,90,513,514,212,512,517,516,515,213],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,53,54,9,42,300,301,302,303,304,305,306,307,122,123,89,88,475,476,204,474,479,478,477,205],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205,23,24,13,25,256,257,258,259,260,261,262,263,382,383,384,385,386,387,388,389,390,391,392,393,64,62,14,39,308,309,310,311,312,313,314,315,481,480,483,482,486,487,484,485,491,490,489,488,26,20,27,28,264,265,266,267,268,269,270,271,394,395,396,397,398,399,400,401,402,403,404,405,65,59,40,38,316,317,318,319,320,321,322,323,493,492,495,494,498,499,496,497,503,502,501,500,4,22,5,19,272,273,274,275,276,277,278,279,138,139,95,94,406,407,408,409,410,411,412,413,11,55,8,41,324,325,326,327,328,329,330,331,124,125,141,140,506,507,504,505,511,510,509,508],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,1,52,6,34,168,294,295,296,169,297,298,299,128,129,91,90,513,514,212,512,517,516,515,213,23,24,13,25,256,257,258,259,260,261,262,263,574,575,576,577,578,579,580,581,582,583,584,585,64,62,14,39,308,309,310,311,312,313,314,315,519,518,521,520,524,525,522,523,529,528,527,526,26,20,27,28,264,265,266,267,268,269,270,271,586,587,588,589,590,591,592,593,594,595,596,597,65,59,40,38,316,317,318,319,320,321,322,323,531,530,533,532,536,537,534,535,541,540,539,538,4,22,5,19,272,273,274,275,276,277,278,279,109,108,79,78,598,599,600,601,602,603,604,605,11,55,8,41,324,325,326,327,328,329,330,331,126,127,93,92,544,545,542,543,549,548,547,546],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,66,69,50,49,332,349,342,359,336,361,354,347,493,123,483,140,498,507,204,485,503,490,509,205,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,68,67,48,51,340,357,334,351,344,353,362,339,124,480,89,494,506,499,484,474,511,478,501,488,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,70,73,46,45,348,333,358,343,352,345,338,363,122,492,141,482,475,487,496,505,479,510,489,500,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461,72,71,44,47,356,341,350,335,360,337,346,355,481,125,495,88,486,476,504,497,491,502,477,508],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,606,607,608,609,610,611,612,613,614,615,616,617,531,129,521,92,536,545,212,523,541,528,547,213,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,618,619,620,621,622,623,624,625,626,627,628,629,126,518,91,532,544,537,522,512,549,516,539,526,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,630,631,632,633,634,635,636,637,638,639,640,641,128,530,93,520,513,525,534,543,517,548,527,538,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461,642,643,644,645,646,647,648,649,650,651,652,653,519,127,533,90,524,514,542,535,529,540,515,546],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205,29,21,15,30,280,281,282,283,284,285,286,287,116,117,83,82,376,377,224,378,379,380,381,225,53,54,9,42,300,301,302,303,304,305,306,307,128,129,91,90,513,514,212,512,517,516,515,213],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473,1,59,14,41,168,325,318,311,169,313,330,323,551,550,553,552,556,557,554,555,561,560,559,558,29,31,32,33,280,288,289,290,284,291,292,293,450,415,440,429,454,431,420,445,458,447,436,425,53,63,36,35,300,364,365,366,304,367,368,369,563,562,565,564,568,569,566,567,573,572,571,570],[0,16],[0,18],[0,16,26,20],[0,2,23,13],[0,3,4,32],[0,2,29,15],[0,3,29,27],[0,52],[0,63],[0,52,26,59],[0,63,26,54],[0,52,16,1],[0,18,1,61],[0,52,16,1,26,59,20,65],[0,31,1,63],[0,1,24,62],[0,31,1,63,26,21,65,54],[0,2,57,56],[0,60,3,16],[0,22,57,3],[0,2,28,20],[0,17,13,24],[0,20,19,13,4,24,17,27],[0,22,57,3,4,16,60,32],[0,22,57,3,23,20,30,12,26,24,33,15,4,16,60,32],[0,22,57,3,29,18,27,25],[0,22,3,57,1,55,10,37],[0,22,385,396,3,57,109,117],[0,22,57,3,159,279,654,655,158,274,656,657,29,18,25,27,284,658,262,269,280,659,257,267]],t.Spacegroup={"P 1":0,"P -1":1,"P 1 2 1":2,"P 1 21 1":3,"C 1 2 1":4,"P 1 m 1":5,"P 1 c 1":6,"C 1 m 1":7,"C 1 c 1":8,"P 1 2/m 1":9,"P 1 21/m 1":10,"C 1 2/m 1":11,"P 1 2/c 1":12,"P 1 21/c 1":13,"C 1 2/c 1":14,"P 2 2 2":15,"P 2 2 21":16,"P 21 21 2":17,"P 21 21 21":18,"C 2 2 21":19,"C 2 2 2":20,"F 2 2 2":21,"I 2 2 2":22,"I 21 21 21":23,"P m m 2":24,"P m c 21":25,"P c c 2":26,"P m a 2":27,"P c a 21":28,"P n c 2":29,"P m n 21":30,"P b a 2":31,"P n a 21":32,"P n n 2":33,"C m m 2":34,"C m c 21":35,"C c c 2":36,"A m m 2":37,"A b m 2":38,"A m a 2":39,"A b a 2":40,"F m m 2":41,"F d d 2":42,"I m m 2":43,"I b a 2":44,"I m a 2":45,"P 2/m 2/m 2/m":46,"P m m m":46,"P 2/n 2/n 2/n":47,"P n n n":47,"P 2/c 2/c 2/m":48,"P c c m":48,"P 2/b 2/a 2/n":49,"P b a n":49,"P 21/m 2/m 2/a":50,"P m m a":50,"P 2/n 21/n 2/a":51,"P n n a":51,"P 2/m 2/n 21/a":52,"P m n a":52,"P 21/c 2/c 2/a":53,"P c c a":53,"P 21/b 21/a 2/m":54,"P b a m":54,"P 21/c 21/c 2/n":55,"P c c n":55,"P 2/b 21/c 21/m":56,"P b c m":56,"P 21/n 21/n 2/m":57,"P n n m":57,"P 21/m 21/m 2/n":58,"P m m n":58,"P 21/b 2/c 21/n":59,"P b c n":59,"P 21/b 21/c 21/a":60,"P b c a":60,"P 21/n 21/m 21/a":61,"P n m a":61,"C 2/m 2/c 21/m":62,"C m c m":62,"C 2/m 2/c 21/a":63,"C m c a":63,"C 2/m 2/m 2/m":64,"C m m m":64,"C 2/c 2/c 2/m":65,"C c c m":65,"C 2/m 2/m 2/a":66,"C m m a":66,"C 2/c 2/c 2/a":67,"C c c a":67,"F 2/m 2/m 2/m":68,"F m m m":68,"F 2/d 2/d 2/d":69,"F d d d":69,"I 2/m 2/m 2/m":70,"I m m m":70,"I 2/b 2/a 2/m":71,"I b a m":71,"I 21/b 21/c 21/a":72,"I b c a":72,"I 21/m 21/m 21/a":73,"I m m a":73,"P 4":74,"P 41":75,"P 42":76,"P 43":77,"I 4":78,"I 41":79,"P -4":80,"I -4":81,"P 4/m":82,"P 42/m":83,"P 4/n":84,"P 42/n":85,"I 4/m":86,"I 41/a":87,"P 4 2 2":88,"P 4 21 2":89,"P 41 2 2":90,"P 41 21 2":91,"P 42 2 2":92,"P 42 21 2":93,"P 43 2 2":94,"P 43 21 2":95,"I 4 2 2":96,"I 41 2 2":97,"P 4 m m":98,"P 4 b m":99,"P 42 c m":100,"P 42 n m":101,"P 4 c c":102,"P 4 n c":103,"P 42 m c":104,"P 42 b c":105,"I 4 m m":106,"I 4 c m":107,"I 41 m d":108,"I 41 c d":109,"P -4 2 m":110,"P -4 2 c":111,"P -4 21 m":112,"P -4 21 c":113,"P -4 m 2":114,"P -4 c 2":115,"P -4 b 2":116,"P -4 n 2":117,"I -4 m 2":118,"I -4 c 2":119,"I -4 2 m":120,"I -4 2 d":121,"P 4/m 2/m 2/m":122,"P4/m m m":122,"P 4/m 2/c 2/c":123,"P4/m c c":123,"P 4/n 2/b 2/m":124,"P4/n b m":124,"P 4/n 2/n 2/c":125,"P4/n n c":125,"P 4/m 21/b 2/m":126,"P4/m b m":126,"P 4/m 21/n 2/c":127,"P4/m n c":127,"P 4/n 21/m 2/m":128,"P4/n m m":128,"P 4/n 2/c 2/c":129,"P4/n c c":129,"P 42/m 2/m 2/c":130,"P42/m m c":130,"P 42/m 2/c 2/m":131,"P42/m c m":131,"P 42/n 2/b 2/c":132,"P42/n b c":132,"P 42/n 2/n 2/m":133,"P42/n n m":133,"P 42/m 21/b 2/c":134,"P42/m b c":134,"P 42/m 21/n 2/m":135,"P42/m n m":135,"P 42/n 21/m 2/c":136,"P42/n m c":136,"P 42/n 21/c 2/m":137,"P42/n c m":137,"I 4/m 2/m 2/m":138,"I4/m m m":138,"I 4/m 2/c 2/m":139,"I4/m c m":139,"I 41/a 2/m 2/d":140,"I41/a m d":140,"I 41/a 2/c 2/d":141,"I41/a c d":141,"P 3":142,"P 31":143,"P 32":144,"H 3":145,"R 3":146,"P -3":147,"H -3":148,"R -3":149,"P 3 1 2":150,"P 3 2 1":151,"P 31 1 2":152,"P 31 2 1":153,"P 32 1 2":154,"P 32 2 1":155,"H 3 2":156,"R 3 2":157,"P 3 m 1":158,"P 3 1 m":159,"P 3 c 1":160,"P 3 1 c":161,"H 3 m":162,"R 3 m":163,"H 3 c":164,"R 3 c":165,"P -3 1 2/m":166,"P -3 1 m":166,"P -3 1 2/c":167,"P -3 1 c":167,"P -3 2/m 1":168,"P -3 m 1":168,"P -3 2/c 1":169,"P -3 c 1":169,"H -3 2/m":170,"H -3 m":170,"R -3 2/m":171,"R -3 m":171,"H -3 2/c":172,"H -3 c":172,"R -3 2/c":173,"R -3 c":173,"P 6":174,"P 61":175,"P 65":176,"P 62":177,"P 64":178,"P 63":179,"P -6":180,"P 6/m":181,"P 63/m":182,"P 6 2 2":183,"P 61 2 2":184,"P 65 2 2":185,"P 62 2 2":186,"P 64 2 2":187,"P 63 2 2":188,"P 6 m m":189,"P 6 c c":190,"P 63 c m":191,"P 63 m c":192,"P -6 m 2":193,"P -6 c 2":194,"P -6 2 m":195,"P -6 2 c":196,"P 6/m 2/m 2/m":197,"P 6/m m m":197,"P 6/m 2/c 2/c":198,"P 6/m c c":198,"P 63/m 2/c 2/m":199,"P 63/m c m":199,"P 63/m 2/m 2/c":200,"P 63/m m c":200,"P 2 3":201,"F 2 3":202,"I 2 3":203,"P 21 3":204,"I 21 3":205,"P 2/m -3":206,"P m -3":206,"P 2/n -3":207,"P n -3":207,"F 2/m -3":208,"F m -3":208,"F 2/d -3":209,"F d -3":209,"I 2/m -3":210,"I m -3":210,"P 21/a -3":211,"P a -3":211,"I 21/a -3":212,"I a -3":212,"P 4 3 2":213,"P 42 3 2":214,"F 4 3 2":215,"F 41 3 2":216,"I 4 3 2":217,"P 43 3 2":218,"P 41 3 2":219,"I 41 3 2":220,"P -4 3 m":221,"F -4 3 m":222,"I -4 3 m":223,"P -4 3 n":224,"F -4 3 c":225,"I -4 3 d":226,"P 4/m -3 2/m":227,"P m -3 m":227,"P 4/n -3 2/n":228,"P n -3 n":228,"P 42/m -3 2/n":229,"P m -3 n":229,"P 42/n -3 2/m":230,"P n -3 m":230,"F 4/m -3 2/m":231,"F m -3 m":231,"F 4/m -3 2/c":232,"F m -3 c":232,"F 41/d -3 2/m":233,"F d -3 m":233,"F 41/d -3 2/c":234,"F d -3 c":234,"I 4/m -3 2/m":235,"I m -3 m":235,"I 41/a -3 2/d":236,"I a -3 d":236,"P 1 1 2":237,"P 1 1 21":238,"B 1 1 2":239,"B 2":239,"A 1 2 1":240,"C 1 21 1":241,"I 1 2 1":242,"I 2":242,"I 1 21 1":243,"P 1 1 m":244,"P 1 1 b":245,"B 1 1 m":246,"B 1 1 b":247,"P 1 1 2/m":248,"P 1 1 21/m":249,"B 1 1 2/m":250,"P 1 1 2/b":251,"P 1 1 21/b":252,"B 1 1 2/b":253,"P 21 2 2":254,"P 2 21 2":255,"P 21 21 2 (a)":256,"P 21 2 21":257,"P 2 21 21":258,"C 2 2 21a)":259,"C 2 2 2a":260,"F 2 2 2a":261,"I 2 2 2a":262,"P 21/m 21/m 2/n a":263,"P 42 21 2a":264,"I 2 3a":265}}(o=e.SpacegroupTables||(e.SpacegroupTables={}))}(e=t.Structure||(t.Structure={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){function n(t,e,n){return o.buildPivotGroupSymmetry(t,e,n);
}function r(t,e){return o.buildMates(t,e)}function i(t,e){return o.buildAssembly(t,e)}var o,s=t.Utils.DataTable;!function(n){function r(t,e){for(var n=t.x,r=t.y,i=t.z,o={x:0,y:0,z:0},s=0,a=e;s<a.length;s++){var u=a[s];o.x+=n[u],o.y+=r[u],o.z+=i[u]}var h=e.length>0?e.length:1;o.x/=h,o.y/=h,o.z/=h;for(var f=0,l=0,d=e;l<d.length;l++){var u=d[l];f=Math.max(c(u,o,t),f)}return{center:o,radius:Math.sqrt(f)}}function i(){return{x:0,y:0,z:0}}function o(t,e,n){var r=t.x-n.center.x,i=t.y-n.center.y,o=t.z-n.center.z;return Math.sqrt(r*r+i*i+o*o)-(e+n.radius)}function a(t,e,n,r,i,s){return s.x=n.x[e],s.y=n.y[e],s.z=n.z[e],T.transformVector3(s,s,r),o(s,n.r[e],t)<=i}function u(t,e,n){var r=n.x[t]-n.cX[e],i=n.y[t]-n.cY[e],o=n.z[t]-n.cZ[e];return r*r+i*i+o*o}function c(t,e,n){var r=n.x[t]-e.x,i=n.y[t]-e.y,o=n.z[t]-e.z;return r*r+i*i+o*o}function h(t,e,n,r){return{model:t,boundingInfo:e,spacegroup:n,radius:r,transform:T.empty(),transformed:{x:0,y:0,z:0},i:0,j:0,k:0,op:0}}function f(t,e){return T.transformVector3(t.transformed,e,t.transform)}function l(t){return d(t.i,t.j,t.k,t.op,T.clone(t.transform))}function d(t,e,n,r,i){return{isIdentity:!(t||e||n||r),id:r+1+"_"+(5+t)+(5+e)+(5+n),transform:i}}function p(t,e){for(var n=!0,r=0;r<4;r++){for(var i=0;i<4;i++){var o=e[4*i+r];if(r===i){if(Math.abs(o-1)>1e-7){n=!1;break}}else if(Math.abs(o)>1e-7){n=!1;break}}if(!n)break}return{isIdentity:n,id:t.toString(),transform:e}}function m(t,e){for(var n=t.data.atoms,r=t.data.residues,o=t.data.chains,a=t.data.entities,h=t.positions,f=h.x,l=h.y,d=h.z,p=s.builder(a.count),m=p.addColumn("x",function(t){return new Float64Array(t)}),v=p.addColumn("y",function(t){return new Float64Array(t)}),y=p.addColumn("z",function(t){return new Float64Array(t)}),g=p.addColumn("r",function(t){return new Float64Array(t)}),b=s.builder(o.count),_=b.addColumn("x",function(t){return new Float64Array(t)}),w=b.addColumn("y",function(t){return new Float64Array(t)}),x=b.addColumn("z",function(t){return new Float64Array(t)}),C=b.addColumn("r",function(t){return new Float64Array(t)}),I=s.builder(r.count),S=I.addColumn("x",function(t){return new Float64Array(t)}),A=I.addColumn("y",function(t){return new Float64Array(t)}),k=I.addColumn("z",function(t){return new Float64Array(t)}),E=I.addColumn("r",function(t){return new Float64Array(t)}),P=i(),T=0,F=i(),D=0,M=0,N=i(),R=0,q=i(),O=0,z=i(),U=0,B=0,j=a.count;B<j;B++){N.x=0,N.y=0,N.z=0;for(var L=a.chainStartIndex[B],V=a.chainEndIndex[B];L<V;L++){q.x=0,q.y=0,q.z=0;for(var Y=o.residueStartIndex[L],X=o.residueEndIndex[L];Y<X;Y++){z.x=0,z.y=0,z.z=0;for(var Z=r.atomStartIndex[Y],H=r.atomEndIndex[Y];Z<H;Z++)z.x+=f[Z],z.y+=l[Z],z.z+=d[Z];P.x+=z.x,P.y+=z.y,P.z+=z.z,M=r.atomEndIndex[Y]-r.atomStartIndex[Y],q.x+=z.x,q.y+=z.y,q.z+=z.z,S[Y]=z.x/M,A[Y]=z.y/M,k[Y]=z.z/M}N.x+=q.x,N.y+=q.y,N.z+=q.z,M=o.atomEndIndex[L]-o.atomStartIndex[L],_[L]=q.x/M,w[L]=q.y/M,x[L]=q.z/M}M=a.atomEndIndex[B]-a.atomStartIndex[B],m[B]=N.x/M,v[B]=N.y/M,y[B]=N.z/M}P.x/=n.count,P.y/=n.count,P.z/=n.count;for(var G=0,W=e;G<W.length;G++){var Z=W[G];F.x+=f[Z],F.y+=l[Z],F.z+=d[Z]}var Q=e.length>0?e.length:1;F.x/=Q,F.y/=Q,F.z/=Q;for(var J={x:f,y:l,z:d,cX:m,cY:v,cZ:y},K={x:f,y:l,z:d,cX:_,cY:w,cZ:x},$={x:f,y:l,z:d,cX:S,cY:A,cZ:k},B=0,j=a.count;B<j;B++){R=0;for(var L=a.chainStartIndex[B],V=a.chainEndIndex[B];L<V;L++){O=0;for(var Y=o.residueStartIndex[L],X=o.residueEndIndex[L];Y<X;Y++){U=0;for(var Z=r.atomStartIndex[Y],H=r.atomEndIndex[Y];Z<H;Z++)U=Math.max(U,u(Z,Y,$)),O=Math.max(O,u(Z,L,K)),R=Math.max(R,u(Z,B,J)),T=Math.max(T,c(Z,P,$));U=Math.sqrt(U),E[Y]=U}O=Math.sqrt(O),C[L]=O}R=Math.sqrt(R),g[B]=R}T=Math.sqrt(T);for(var tt=0,et=e;tt<et.length;tt++){var Z=et[tt];D=Math.max(D,c(Z,F,$))}return D=Math.sqrt(D),{entities:p.seal(),chains:b.seal(),residues:I.seal(),allAtoms:{center:P,radius:T},target:{center:F,radius:D}}}function v(t){var e=t.boundingInfo,n=t.spacegroup,r=[];t.transform=T.identity(),r[0]=l(t);for(var i=-3;i<=3;i++)for(var s=-3;s<=3;s++)for(var a=-3;a<=3;a++)for(var u=0===i&&0===s&&0===a?1:0,c=n.operatorCount;u<c;u++){n.getOperatorMatrix(u,i,s,a,t.transform),t.i=i,t.k=a,t.j=s,t.op=u;var h=f(t,e.allAtoms.center),d=o(h,e.allAtoms.radius,e.target);d<t.radius&&(r[r.length]=l(t))}return r}function y(e,n){for(var r=e.boundingInfo,i=e.radius,o=r.target,s=e.model,u=s.data.residues,c=s.data.chains,h=s.data.entities,f=t.Utils.ChunkedArray.create(function(t){return new Int32Array(t)},u.count,1),l=t.Utils.ChunkedArray.create(function(t){return new Int32Array(t)},u.count,1),d={x:0,y:0,z:0},p=0,m=0,v=0,y=0,g=0,b=h.count;g<b;g++){p=0;for(var _=!1,w=0,x=n;w<x.length;w++){for(var C=x[w],I=h.chainStartIndex[g],S=h.chainEndIndex[g];I<S;I++)if(a(o,I,r.chains,C.transform,i,d)){for(var A=!1,k=c.residueStartIndex[I],E=c.residueEndIndex[I];k<E;k++)a(o,k,r.residues,C.transform,i,d)&&(t.Utils.ChunkedArray.add(f,k),t.Utils.ChunkedArray.add(l,p),m+=u.atomEndIndex[k]-u.atomStartIndex[k],A=!0);A&&(v+=1,_=!0)}p++}_&&y++}return{residues:t.Utils.ChunkedArray.compact(f),operators:t.Utils.ChunkedArray.compact(l),atomCount:m,chainCount:v,entityCount:y}}function g(t,e,n,r,i){for(var o=0;o<i;o++)n[o][r]=t[o][e]}function b(t,n,r){for(var i,o,a,u,c=t.data.residues,h=c.chainIndex,f=c.entityIndex,l=c.atomStartIndex,d=c.atomEndIndex,p=t.data.atoms,m=t.positions,v=m.x,y=m.y,b=m.z,w=s.builder(n.atomCount),x=[],C=s.ofDefinition(e.Tables.Positions,n.atomCount),I=C.x,S=C.y,A=C.z,k=t.data.entities.getBuilder(n.entityCount),E=k,P=t.data.entities.getRawData(),F=E.getRawData(),D=E.chainStartIndex,M=E.chainEndIndex,N=E.residueStartIndex,R=E.residueEndIndex,q=E.atomStartIndex,O=E.atomEndIndex,z=0,U=t.data.chains.getBuilder(n.chainCount),B=U,j=t.data.chains.getRawData(),L=B.getRawData(),V=B.residueStartIndex,Y=B.residueEndIndex,X=B.atomStartIndex,Z=B.atomEndIndex,H=B.asymId,G=B.authAsymId,W=B.entityIndex,Q=U.addColumn("sourceChainIndex",function(t){return new Int32Array(t)}),J=U.addColumn("operatorIndex",function(t){return new Int32Array(t)}),K=0,$=t.data.residues.getBuilder(n.residues.length),tt=$,et=t.data.residues.getRawData(),nt=tt.getRawData(),rt=tt.atomStartIndex,it=tt.atomEndIndex,ot=tt.asymId,st=tt.authAsymId,at=tt.chainIndex,ut=tt.entityIndex,ct=0,ht=t.data.atoms.columns;ct<ht.length;ct++){var ft=ht[ct],lt=w.addColumn(ft.name,ft.creator);"residueIndex"===ft.name?o=lt:"chainIndex"===ft.name?a=lt:"entityIndex"===ft.name?u=lt:"id"===ft.name?i=lt:x[x.length]={src:p[ft.name],target:lt}}var dt,pt,mt=n.residues,vt=n.operators,yt={x:0,y:0,z:0},gt=0,bt=mt[0],_t=h[bt],wt=f[bt],xt=vt[0];g(P,f[bt],F,0,P.length),D[0]=0,N[0]=0,q[0]=0,g(j,h[bt],L,0,j.length),W[0]=0,V[0]=0,X[0]=0,dt=t.data.chains.asymId[h[bt]],pt=t.data.chains.authAsymId[h[bt]];var Ct=r[vt[0]];Ct&&!Ct.isIdentity&&(H[K]=t.data.chains.asymId[h[bt]]+"-"+Ct.id,G[K]=t.data.chains.authAsymId[h[bt]]+"-"+Ct.id,Q[K]=h[bt],J[K]=xt,dt=H[K],pt=G[K]);for(var It=0,St=mt.length;It<St;It++){bt=mt[It];var At=vt[It];Ct=r[At],g(et,bt,nt,It,nt.length);var kt=f[bt],Et=h[bt],Pt=!1;kt!==wt?(Y[K]=It,Z[K]=gt,K+=1,M[z]=K,R[z]=It,O[z]=gt,z+=1,g(P,kt,F,z,P.length),D[z]=K,N[z]=It,q[z]=gt,Pt=!0):Et!==_t?(Y[K]=It,Z[K]=gt,K+=1,Pt=!0):At!==xt&&(Y[K]=It,Z[K]=gt,K+=1,Pt=!0),Pt&&(g(j,Et,L,K,j.length),W[K]=z,V[K]=It,X[K]=gt,Ct.isIdentity||(H[K]=t.data.chains.asymId[Et]+"-"+Ct.id,G[K]=t.data.chains.authAsymId[Et]+"-"+Ct.id),Q[K]=Et,J[K]=At,dt=H[K],pt=G[K]),_t=Et,wt=kt,xt=At,at[It]=K,ut[It]=z,rt[It]=gt,ot[It]=dt,st[It]=pt;for(var Tt=l[bt],Ft=d[bt];Tt<Ft;Tt++){yt.x=v[Tt],yt.y=y[Tt],yt.z=b[Tt],T.transformVector3(yt,yt,Ct.transform),I[gt]=yt.x,S[gt]=yt.y,A[gt]=yt.z,i[gt]=gt+1,o[gt]=It,a[gt]=K,u[gt]=z;for(var Dt=0,Mt=x;Dt<Mt.length;Dt++){var lt=Mt[Dt];lt.target[gt]=lt.src[Tt]}gt++}it[It]=gt}M[z]=K+1,R[z]=mt.length,O[z]=gt,Y[K]=mt.length,Z[K]=gt;var Nt=w.seal(),Rt=$.seal(),qt=U.seal(),Ot=k.seal(),zt=_(t,n,Rt);return e.Molecule.Model.create({id:t.id,modelId:t.modelId,data:{atoms:Nt,residues:Rt,chains:qt,entities:Ot,bonds:{component:t.data.bonds.component},secondaryStructure:zt},positions:C,parent:t,source:e.Molecule.Model.Source.Computed,operators:r.map(function(t){return new e.Operator(t.transform,t.id,t.isIdentity)})})}function _(t,n,r){for(var i=t.data.residues.secondaryStructureIndex,o=t.data.secondaryStructure,s=r.asymId,a=r.seqNumber,u=r.insCode,c=r.secondaryStructureIndex,h=n.residues,f=n.operators,l=h.length,d=[],p=0;p<l;){for(var m=p,v=i[h[p]],y=f[p];m<l&&f[m]==y&&i[h[m]]==v;)m++;var g=o[v],b=new e.SecondaryStructureElement(g.type,new e.PolyResidueIdentifier(s[p],a[p],u[p]),new e.PolyResidueIdentifier(s[m-1],a[m-1],u[m-1]),g.info);b.startResidueIndex=p,b.endResidueIndex=m;for(var _=d.length,w=p;w<m;w++)c[w]=_;d[_]=b,p=m}return d}function w(t,n,r){var i=t.data.symmetryInfo;if(!i||i.cellSize[0]<1.1&&i.cellSize[1]<1.1&&i.cellSize[2]<1.1)return t;var o;o=r?e.Query.apply(r,t).unionAtomIndices():t.data.atoms.indices;var s=m(t,o),a=new e.Spacegroup(i),u=h(t,s,a,n),c=v(u),f=y(u,c);return b(t,f,c)}function x(t,n){for(var i=r(t.positions,t.positions.indices),s=new e.Spacegroup(t.data.symmetryInfo),a=T.empty(),u={x:0,y:0,z:0},c=[],h=-3;h<=3;h++)for(var f=-3;f<=3;f++)for(var l=-3;l<=3;l++)for(var p=0;p<s.operatorCount;p++)if(s.getOperatorMatrix(p,h,f,l,a),T.transformVector3(u,i.center,a),!(o(u,i.radius,i)>n)){var m=T.empty();T.copy(m,a),c.push(d(h,f,l,p,m))}return c}function C(e,n){for(var r=e.data,i=r.atoms,o=r.chains,s=r.entities,a=r.residues,u=t.Utils.ArrayBuilder.create(function(t){return new Int32Array(t)},a.count*n.length,1),c=t.Utils.ArrayBuilder.create(function(t){return new Int32Array(t)},a.count*n.length,1),h=n.length*i.count,f=n.length*o.count,l=s.count,d=0,p=s.count;d<p;d++)for(var m=0;m<n.length;m++)for(var v=s.chainStartIndex[d],y=s.chainEndIndex[d];v<y;v++)for(var g=o.residueStartIndex[v],b=o.residueEndIndex[v];g<b;g++)t.Utils.ArrayBuilder.add(u,g),t.Utils.ArrayBuilder.add(c,m);return{residues:u.array,operators:c.array,atomCount:h,chainCount:f,entityCount:l}}function I(t,e){var n=t.data.symmetryInfo;if(!n||n.cellSize[0]<1.1&&n.cellSize[1]<1.1&&n.cellSize[2]<1.1)return t;var r=x(t,e),i=C(t,r);return b(t,i,r)}function S(t,e,n,r){if(n<0)return void(e[e.length]=r.slice(0));for(var i=t[n],o=i.length,s=0;s<o;s++)r[n]=i[s],S(t,e,n-1,r)}function A(t,e){for(var n=t.data.assemblyInfo,r=[],i=0,o=0,s=e;o<s.length;o++){for(var a=s[o],u=T.identity(),c=0;c<a.length;c++)T.mul(u,u,n.operators[a[c]].operator);i++,r[r.length]=p(i,u)}return r}function k(e,n,r,i){for(var o=e.data,s=o.chains,a=o.entities,u=o.residues,c=i.residueIndices,h=i.operatorIndices,f=0,l=0,d=0,p=0,m=a.count;p<m;p++){for(var v=i.transformsOffset,y=!1,g=0,b=r;g<b.length;g++){for(var _=(b[g],a.chainStartIndex[p]),w=a.chainEndIndex[p];_<w;_++){for(var x=!1,C=s.residueStartIndex[_],I=s.residueEndIndex[_];C<I;C++)n[C]&&(t.Utils.ChunkedArray.add(c,C),t.Utils.ChunkedArray.add(h,v),f+=u.atomEndIndex[C]-u.atomStartIndex[C],x=!0);x&&(l+=1,y=!0)}v++}y&&d++}i.atomCount+=f,i.chainCount+=l,i.entityCount+=d}function E(e,n,r){for(var i=[],o=[],s=0;s<n.operators.length;s++)o[s]="";S(n.operators,i,n.operators.length-1,o);var a=A(e,i);r.transformsOffset+=r.transforms.length,(d=r.transforms).push.apply(d,a);var u=t.Utils.FastSet.create();n.asymIds.forEach(function(t){return u.add(t)});for(var c=e.data.residues.asymId,h=e.data.residues.count,f=r.mask,l=0;l<h;l++)f[l]=u.has(c[l]);k(e,f,a,r);var d}function P(e,n){for(var r={atomCount:0,chainCount:0,entityCount:0,transforms:[],transformsOffset:0,mask:new Int8Array(e.data.residues.count),residueIndices:t.Utils.ChunkedArray.create(function(t){return new Int32Array(t)},e.data.residues.count,1),operatorIndices:t.Utils.ChunkedArray.create(function(t){return new Int32Array(t)},e.data.residues.count,1)},i=0,o=n.gens;i<o.length;i++){var s=o[i];E(e,s,r)}var a={residues:t.Utils.ChunkedArray.compact(r.residueIndices),operators:t.Utils.ChunkedArray.compact(r.operatorIndices),atomCount:r.atomCount,chainCount:r.chainCount,entityCount:r.entityCount};return b(e,a,r.transforms)}var T=t.Geometry.LinearAlgebra.Matrix4;n.buildPivotGroupSymmetry=w,n.buildMates=I,n.buildAssemblyEntry=E,n.buildAssembly=P}(o||(o={})),e.buildPivotGroupSymmetry=n,e.buildSymmetryMates=r,e.buildAssembly=i}(e=t.Structure||(t.Structure={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(t,n){return e.Builder.toQuery(t)(n.queryContext)}e.apply=n;var r=function(){function e(t,e){this.structure=t,this.mask=e}return Object.defineProperty(e.prototype,"atomCount",{get:function(){return this.mask.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this.mask.size===this.structure.data.atoms.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tree",{get:function(){return this.lazyTree||this.makeTree(),this.lazyTree},enumerable:!0,configurable:!0}),e.prototype.hasAtom=function(t){return!!this.mask.has(t)},e.prototype.hasRange=function(t,e){for(var n=t;n<e;n++)if(this.mask.has(n))return!0;return!1},e.ofStructure=function(t){return new e(t,e.Mask.ofStructure(t))},e.ofFragments=function(t){return new e(t.context.structure,e.Mask.ofFragments(t))},e.ofAtomIndices=function(t,n){return new e(t,e.Mask.ofIndices(t,n))},e.prototype.makeTree=function(){for(var e=new Int32Array(this.mask.size),n=0,r=this.structure.positions,i=r.x,o=r.y,s=r.z,a=0,u=this.structure.positions.count;a<u;a++)this.mask.has(a)&&(e[n++]=a);this.lazyTree=t.Geometry.SubdivisionTree3D.create(e,function(t,e){return e(i[t],o[t],s[t])})},e}();e.Context=r,function(e){var n;!function(e){function n(t){return new s(t.data.atoms.count)}function r(e,n){var r=n.length/e.data.atoms.count;if(r<.25){for(var i=t.Utils.FastSet.create(),s=0,a=n;s<a.length;s++){var u=a[s];i.add(u)}return i}for(var c=new Int8Array(e.data.atoms.count),h=0,f=n;h<f.length;h++){var u=f[h];c[u]=1}return new o(c,n.length)}function i(e){for(var n=0,r=0,i=e.fragments;r<i.length;r++){var s=i[r];n+=s.atomCount}var a=e.context.structure.data.atoms.count;if(n/a<.25){for(var u=t.Utils.FastSet.create(),c=0,h=e.fragments;c<h.length;c++)for(var s=h[c],f=0,l=s.atomIndices;f<l.length;f++){var d=l[f];u.add(d)}return u}for(var u=new Int8Array(a),p=0,m=e.fragments;p<m.length;p++)for(var s=m[p],v=0,y=s.atomIndices;v<y.length;v++){var d=y[v];u[d]=1}for(var g=0,d=0;d<a;d++)0!==u[d]&&g++;return new o(u,g)}var o=function(){function t(t,e){this.mask=t,this.size=e}return t.prototype.has=function(t){return this.mask[t]},t}(),s=function(){function t(t){this.size=t}return t.prototype.has=function(t){return!0},t}();e.ofStructure=n,e.ofIndices=r,e.ofFragments=i}(n=e.Mask||(e.Mask={}))}(r=e.Context||(e.Context={}));var i=function(){function n(t,e,n){this._hashCode=0,this._hashComputed=!1,this.context=t,this.tag=e,this.atomIndices=n}return Object.defineProperty(n.prototype,"hashCode",{get:function(){if(this._hashComputed)return this._hashCode;for(var t=23,e=0,n=this.atomIndices;e<n.length;e++){var r=n[e];t=31*t+r|0}return this._hashCode=t,this._hashComputed=!0,t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.context.structure.id+"_"+this.tag},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"atomCount",{get:function(){return this.atomIndices.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isHet",{get:function(){var t=this.context.structure.data.atoms.residueIndex[this.tag];return this.context.structure.data.residues.isHet[t]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fingerprint",{get:function(){if(this._fingerprint)return this._fingerprint;for(var t=this.residueIndices,e=this.context.structure.data.residues,n=e.name,r=e.asymId,i=e.seqNumber,o=e.insCode,s=[],a=0,u=t;a<u.length;a++){var c=u[a],h=n[c]+" "+r[c]+" "+i[c];o[c]&&(h+=" i:"+o[c]),s[s.length]=h}return s.join("-")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"authFingerprint",{get:function(){if(this._authFingerprint)return this._authFingerprint;for(var t=this.residueIndices,e=this.context.structure.data.residues,n=e.authName,r=e.authAsymId,i=e.authSeqNumber,o=e.insCode,s=[],a=0,u=t;a<u.length;a++){var c=u[a],h=n[c]+" "+r[c]+" "+i[c];o[c]&&(h+=" i:"+o[c]),s[s.length]=h}return s.join("-")},enumerable:!0,configurable:!0}),n.prototype.find=function(t){var n=r.ofFragments(new o(this.context,[this]));return e.Builder.toQuery(t)(n)},n.prototype.computeIndices=function(){if(!this._residueIndices){for(var e=t.Utils.FastSet.create(),n=t.Utils.FastSet.create(),r=t.Utils.FastSet.create(),i=this.context.structure.data.atoms.residueIndex,o=this.context.structure.data.residues.chainIndex,s=this.context.structure.data.chains.entityIndex,a=0,u=this.atomIndices;a<u.length;a++){var c=u[a];e.add(i[c])}this._residueIndices=t.Utils.integerSetToSortedTypedArray(e);for(var h=0,f=this._residueIndices;h<f.length;h++){var c=f[h];n.add(o[c])}this._chainIndices=t.Utils.integerSetToSortedTypedArray(n);for(var l=0,d=this._chainIndices;l<d.length;l++){var c=d[l];r.add(s[c])}this._entityIndices=t.Utils.integerSetToSortedTypedArray(r)}},Object.defineProperty(n.prototype,"residueIndices",{get:function(){return this.computeIndices(),this._residueIndices},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chainIndices",{get:function(){return this.computeIndices(),this._chainIndices},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"entityIndices",{get:function(){return this.computeIndices(),this._entityIndices},enumerable:!0,configurable:!0}),n.areEqual=function(t,e){if(t.atomCount!==e.atomCount)return!1;for(var n=t.atomIndices,r=e.atomIndices,i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return t.tag===e.tag},n.ofSet=function(t,e){var r=new Int32Array(e.size);return e.forEach(function(t,e){e.array[e.index++]=t},{array:r,index:0}),Array.prototype.sort.call(r,function(t,e){return t-e}),new n(t,r[0],r)},n.ofArray=function(t,e,r){return new n(t,e,r)},n.ofIndex=function(t,e){var r=new Int32Array(1);return r[0]=e,new n(t,e,r)},n.ofIndexRange=function(t,e,r){for(var i=0,o=e;o<r;o++)t.hasAtom(o)&&i++;for(var s=new Int32Array(i),a=0,o=e;o<r;o++)t.hasAtom(o)&&(s[a++]=o);return new n(t,e,s)},n}();e.Fragment=i;var o=function(){function t(t,e){this.context=t,this.fragments=e}return t.empty=function(e){return new t(e,[])},Object.defineProperty(t.prototype,"length",{get:function(){return this.fragments.length},enumerable:!0,configurable:!0}),t.prototype.unionAtomIndices=function(){if(!this.length)return[];if(1===this.length)return this.fragments[0].atomIndices;for(var t=new Int8Array(this.context.structure.data.atoms.count),e=0,n=0,r=this.fragments;n<r.length;n++)for(var i=r[n],o=0,s=i.atomIndices;o<s.length;o++){var a=s[o];t[a]=1}for(var u=0,c=t;u<c.length;u++){var a=c[u];e+=a}for(var h=new Int32Array(e),f=0,a=0,l=t.length;a<l;a++)t[a]&&(h[f++]=a);return h},t.prototype.unionFragment=function(){if(!this.length)return new i(this.context,0,new Int32Array(0));if(1===this.length)return this.fragments[0];var t=this.unionAtomIndices();return new i(this.context,t[0],t)},t}();e.FragmentSeq=o;var s=function(){function t(t){this.ctx=t,this.fragments=[]}return t.prototype.add=function(t){this.fragments[this.fragments.length]=t},t.prototype.getSeq=function(){return new o(this.ctx,this.fragments)},t}();e.FragmentSeqBuilder=s;var a=function(){function e(e){this.ctx=e,this.fragments=[],this.byHash=t.Utils.FastMap.create()}return e.prototype.add=function(t){var e=t.hashCode;if(this.byHash.has(e)){for(var n=this.byHash.get(e),r=0,o=n;r<o.length;r++){var s=o[r];if(i.areEqual(t,s))return this}this.fragments[this.fragments.length]=t,n[n.length]=t}else this.fragments[this.fragments.length]=t,this.byHash.set(e,[t]);return this},e.prototype.getSeq=function(){return new o(this.ctx,this.fragments)},e}();e.HashFragmentSeqBuilder=a}(n=e.Query||(e.Query={}))}(e=t.Structure||(t.Structure={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compileAtoms(t,function(t){return t.data.atoms.elementSymbol})})}function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compileAtoms(t,function(t){return t.data.atoms.name})})}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compileAtoms(t,function(t){return t.data.atoms.id})})}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compileAtomRanges(!1,t,function(t){return t.data.residues})})}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compileAtomRanges(!1,t,function(t){return t.data.chains})})}function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compileAtomRanges(!1,t,function(t){return t.data.entities})})}function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compileAtomRanges(!0,t,function(t){return t.data.entities})})}function c(){return M.build(function(){return N.compileEverything()})}function h(t){return M.build(function(){return N.compileFromIndices(!1,t,function(t){return t.data.entities})})}function f(t){return M.build(function(){return N.compileFromIndices(!1,t,function(t){return t.data.chains})})}function l(t){return M.build(function(){return N.compileFromIndices(!1,t,function(t){return t.data.residues})})}function d(t){return M.build(function(){return N.compileAtomIndices(t)})}function p(t,e,n,r){return M.build(function(){return N.compileSequence(t,e,n,r)})}function m(){return M.build(function(){return N.compileHetGroups()})}function v(){return M.build(function(){return N.compileNonHetPolymer()})}function y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compilePolymerNames(t,!1)})}function g(){return x(M.build(function(){return N.compilePolymerNames(["CA","O","O5'","C3'","N3"],!1)}),m(),a({type:"water"}))}function b(){return M.build(function(){return N.compilePolymerNames(["N","CA","C","O","P","OP1","OP2","O3'","O5'","C3'","C5'","C4"],!1)})}function _(){return M.build(function(){return N.compilePolymerNames(["N","CA","C","O","P","OP1","OP2","O3'","O5'","C3'","C5'","C4"],!0)})}function w(t,e){return M.build(function(){return N.compileAtomsInBox(t,e)})}function x(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M.build(function(){return N.compileOr(t)})}function C(t){return M.build(function(){return N.compileComplement(t)})}function I(t,e){return M.build(function(){return N.compileAmbientResidues(t,e)})}function S(t){return M.build(function(){return N.compileWholeResidues(t)})}function A(t){return M.build(function(){return N.compileUnion(t)})}function k(t,e){return M.build(function(){return N.compileInside(t,e)})}function E(t,e){return M.build(function(){return N.compileIntersectWith(t,e)})}function P(t,e){return M.build(function(){return N.compileFlatten(t,e)})}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.apply(void 0,t.map(function(t){return{name:t}}))}function F(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.apply(void 0,t.map(function(t){return{authSeqNumber:t}}))}function D(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.apply(void 0,t.map(function(t){return{authAsymId:t}}))}var M;!function(t){function e(e,n){t.BuilderPrototype[e]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.call.apply(n,[void 0,this].concat(t))}}function n(e){return Object.create(t.BuilderPrototype,{compile:{writable:!1,configurable:!1,value:e}})}function r(t){return!!t.compile}function i(t){if("undefined"==typeof window)throw"parse can only be called from a browser.";(0,eval)("with (LiteMol.Core.Structure.Query) { window.__LiteMol_query = "+t+"; }");var e=window.__LiteMol_query;return window.__LiteMol_query=void 0,e.compile()}function o(t){var e;return e=r(t)?t.compile():"string"==typeof t||t instanceof String?i(t):t}t.BuilderPrototype={},t.registerModifier=e,t.build=n,t.parse=i,t.toQuery=o}(M=e.Builder||(e.Builder={})),e.atomsByElement=n,e.atomsByName=r,e.atomsById=i,e.residues=o,e.chains=s,e.entities=a,e.notEntities=u,e.everything=c,e.entitiesFromIndices=h,e.chainsFromIndices=f,e.residuesFromIndices=l,e.atomsFromIndices=d,e.sequence=p,e.hetGroups=m,e.nonHetPolymer=v,e.polymerTrace=y,e.cartoons=g,e.backbone=b,e.sidechain=_,e.atomsInBox=w,e.or=x,M.registerModifier("complement",C),e.complement=C,M.registerModifier("ambientResidues",I),e.ambientResidues=I,M.registerModifier("wholeResidues",S),e.wholeResidues=S,M.registerModifier("union",A),e.union=A,M.registerModifier("inside",k),e.inside=k,M.registerModifier("intersectWith",E),e.intersectWith=E,M.registerModifier("flatten",P),e.flatten=P,e.residuesByName=T,e.residuesById=F,e.chainsById=D;var N;!function(n){function r(){return function(t){if(t.isComplete){var n=t.structure.data.atoms.indices;return new e.FragmentSeq(t,[new e.Fragment(t,n[0],n)])}for(var r=new Int32Array(t.atomCount),i=0,o=0,s=t.structure.data.atoms.indices;o<s.length;o++){var a=s[o];t.hasAtom(a)&&(r[i++]=a)}return new e.FragmentSeq(t,[e.Fragment.ofArray(t,r[0],r)])}}function i(n,r){return function(i){for(var o=t.Utils.FastSet.ofArray(n),s=r(i.structure),a=new e.FragmentSeqBuilder(i),u=0,c=s.length;u<c;u++)i.hasAtom(u)&&o.has(s[u])&&a.add(e.Fragment.ofIndex(i,u));return a.getSeq()}}function o(t){return function(n){for(var r=0,i=0,o=t;i<o.length;i++){var s=o[i];n.hasAtom(s)&&r++}if(!r)return e.FragmentSeq.empty(n);for(var a=0,u=new Int32Array(r),c=0,h=t;c<h.length;c++){var s=h[c];n.hasAtom(s)&&(u[a++]=s)}return new e.FragmentSeq(n,[e.Fragment.ofArray(n,u[0],u)])}}function s(n,r,i){return function(o){var s=i(o.structure),a=s.atomStartIndex,u=s.atomEndIndex,c=new e.FragmentSeqBuilder(o);if(n)for(var h=t.Utils.FastSet.ofArray(r),f=s.count,l=0;l<f;l++)h.has(l)||o.hasRange(a[l],u[l])&&c.add(e.Fragment.ofIndexRange(o,a[l],u[l]));else for(var d=0,p=r;d<p.length;d++){var l=p[d];o.hasRange(a[l],u[l])&&c.add(e.Fragment.ofIndexRange(o,a[l],u[l]))}return c.getSeq()}}function a(t,n,r){return function(i){for(var o=r(i.structure),s=o.atomStartIndex,a=o.atomEndIndex,u=new e.FragmentSeqBuilder(i),c=o.count,h=!1,f=n.map(function(t){return new C(t,o)}),l=0===f.length,d=0;d<c;d++)if(i.hasRange(s[d],a[d])){h=l;for(var p=0,m=f;p<m.length;p++){var v=m[p];if(v.isSatisfied(d)){h=!0;break}}t&&(h=!h),h&&u.add(e.Fragment.ofIndexRange(i,s[d],a[d]))}return u.getSeq()}}function u(t,n,r,i){return function(o){for(var s=o.structure.data,a=s.residues,u=s.chains,c=a.seqNumber,h=a.atomStartIndex,f=a.atomEndIndex,l=u.entityId,d=u.count,p=u.residueStartIndex,m=u.residueEndIndex,v=new e.FragmentSeqBuilder(o),y=o.structure.parent,g=u.sourceChainIndex,b=y&&g,_="string"==typeof n?{asymId:n}:n,w=new C(_,b?y.data.chains:u),x=0;x<d;x++)if(l[x]===t&&w.isSatisfied(b?g[x]:x)){for(var I=p[x],S=m[x],A=-1,k=-1;I<S;I++)if(c[I]>=r.seqNumber){A=I;break}if(I!==S){for(I=A;I<S&&!(c[I]>=i.seqNumber);I++);k=I,o.hasRange(h[A],f[k])&&v.add(e.Fragment.ofIndexRange(o,h[A],f[k]))}}return v.getSeq()}}function c(){return function(t){for(var n=t.structure.data.residues,r=n.atomStartIndex,i=n.atomEndIndex,o=n.isHet,s=n.entityIndex,a=n.count,u=t.structure.data.entities.type,c="water",h=new e.FragmentSeqBuilder(t),f=0;f<a;f++)t.hasRange(r[f],i[f])&&u[s[f]]!==c&&o[f]&&h.add(e.Fragment.ofIndexRange(t,r[f],i[f]));return h.getSeq()}}function h(){return function(t){for(var n=t.structure.data.residues,r=n.atomStartIndex,i=n.atomEndIndex,o=t.structure.data.entities,s=o.type,a=o.count,u=o.residueStartIndex,c=o.residueEndIndex,h="polymer",f=0,l=0;l<a;l++)if(s[l]===h)for(var d=u[l],p=c[l];d<p;d++)for(var m=r[d],v=i[d];m<v;m++)t.hasAtom(m)&&f++;if(!f)return e.FragmentSeq.empty(t);for(var y=new Int32Array(f),g=0,l=0;l<a;l++)if(s[l]===h)for(var d=u[l],p=c[l];d<p;d++)for(var m=r[d],v=i[d];m<v;m++)t.hasAtom(m)&&(y[g++]=m);return new e.FragmentSeq(t,[e.Fragment.ofArray(t,y[0],y)])}}function f(t,n){return function(r){for(var i=r.structure.positions,o=i.x,s=i.y,a=i.z,u=i.count,c=[],h=0;h<u;h++)if(r.hasAtom(h)){var f=o[h],l=s[h],d=a[h];f>=t.x&&f<=n.x&&l>=t.y&&l<=n.y&&d>=t.z&&d<=n.z&&(c[c.length]=h)}return c.length?new e.FragmentSeq(r,[new e.Fragment(r,c[0],c)]):e.FragmentSeq.empty(r)}}function l(t,n){var r=M.toQuery(t),i=M.toQuery(n);return function(t){return new e.FragmentSeq(t,r(e.Context.ofFragments(i(t))).fragments)}}function d(t,n,r){for(var i=0,o=0,s=n.atomIndices;o<s.length;o++){var a=s[o];r.has(a)&&i++}if(i){for(var u=new Int32Array(i),c=0,h=0,f=n.atomIndices;h<f.length;h++){var a=f[h];r.has(a)&&(u[c++]=a)}return e.Fragment.ofArray(t,u[0],u)}}function p(t,n){var r=M.toQuery(t),i=M.toQuery(n);return function(t){for(var n=r(t),o=e.Context.Mask.ofFragments(i(t)),s=new e.FragmentSeqBuilder(t),a=0,u=n.fragments;a<u.length;a++){var c=u[a],h=d(t,c,o);h&&s.add(h)}return s.getSeq()}}function m(t,n){var r=M.toQuery(t);return function(t){for(var i,o=r(t).fragments,s=new e.FragmentSeqBuilder(t),a=0;a<o.length;a++)i=o[a],n(i)&&s.add(i);return s.getSeq()}}function v(t){var n=M.toQuery(t);return function(t){for(var r=e.Context.Mask.ofFragments(n(t)),i=0,o=0,s=0,a=t.structure.data.atoms.count;s<a;s++)t.hasAtom(s)&&!r.has(s)&&i++;if(!i)return e.FragmentSeq.empty(t);for(var u=new Int32Array(i),s=0,a=t.structure.data.atoms.count;s<a;s++)t.hasAtom(s)&&!r.has(s)&&(u[o++]=s);return new e.FragmentSeq(t,[e.Fragment.ofArray(t,u[0],u)])}}function y(t){var n=t.map(function(t){return M.toQuery(t)});return function(t){for(var r=new e.HashFragmentSeqBuilder(t),i=0,o=n;i<o.length;i++)for(var s=o[i],a=s(t),u=0,c=a.fragments;u<c.length;u++){var h=c[u];r.add(h)}return r.getSeq()}}function g(n){var r=M.toQuery(n);return function(n){for(var i,o=r(n).fragments,s=t.Utils.FastSet.create(),a=0,u=0;u<o.length;u++)for(i=o[u].atomIndices,a=0;a<i.length;a++)s.add(i[a]);return 0===s.size?e.FragmentSeq.empty(n):new e.FragmentSeq(n,[e.Fragment.ofSet(n,s)])}}function b(n,r){return function(i){var o=i.structure,s=o.data.entities,a=o.data.atoms.name,u=[],c=0,h=t.Utils.FastSet.ofArray(n);if(r){for(var f=0;f<o.data.entities.count;f++)if("polymer"===s.type[f])for(var l=s.atomStartIndex[f],d=s.atomEndIndex[f],p=l;p<d;p++)i.hasAtom(p)&&!h.has(a[p])&&(u[c++]=p)}else for(var f=0;f<s.count;f++)if("polymer"===s.type[f])for(var l=s.atomStartIndex[f],d=s.atomEndIndex[f],p=l;p<d;p++)i.hasAtom(p)&&h.has(a[p])&&(u[c++]=p);return u.length?new e.FragmentSeq(i,[e.Fragment.ofArray(i,u[0],new Int32Array(u))]):e.FragmentSeq.empty(i)}}function _(n,r){var i=M.toQuery(n);return function(n){for(var o=i(n),s=n.tree,a=t.Geometry.SubdivisionTree3D.createContextRadius(s,r,!1),u=a.buffer,c=new e.HashFragmentSeqBuilder(n),h=n.structure.positions,f=h.x,l=h.y,d=h.z,p=n.structure.data.atoms.residueIndex,m=n.structure.data.residues.atomStartIndex,v=n.structure.data.residues.atomEndIndex,y=s.data,g=0,b=o.fragments;g<b.length;g++){for(var _=b[g],w=t.Utils.FastSet.create(),x=0,C=_.atomIndices;x<C.length;x++){var I=C[x];w.add(p[I]),a.nearest(f[I],l[I],d[I],r);for(var S=0,A=u.count;S<A;S++)w.add(p[y[u.indices[S]]])}var k={count:0,start:m,end:v};w.forEach(function(t,e){e.count+=e.end[t]-e.start[t]},k);var E=new Int32Array(k.count),P={indices:E,offset:0,start:m,end:v};w.forEach(function(t,e){for(var n=e.start[t],r=e.end[t];n<r;n++)e.indices[e.offset++]=n},P),Array.prototype.sort.call(E,function(t,e){return t-e}),c.add(e.Fragment.ofArray(n,E[0],E))}return c.getSeq()}}function w(n){var r=M.toQuery(n);return function(n){for(var i=r(n),o=new e.HashFragmentSeqBuilder(n),s=n.structure.data.atoms.residueIndex,a=n.structure.data.residues.atomStartIndex,u=n.structure.data.residues.atomEndIndex,c=0,h=i.fragments;c<h.length;c++){for(var f=h[c],l=t.Utils.FastSet.create(),d=0,p=f.atomIndices;d<p.length;d++){var m=p[d];l.add(s[m])}var v={count:0,start:a,end:u};l.forEach(function(t,e){e.count+=e.end[t]-e.start[t]},v);var y=new Int32Array(v.count),g={
indices:y,offset:0,start:a,end:u};l.forEach(function(t,e){for(var n=e.start[t],r=e.end[t];n<r;n++)e.indices[e.offset++]=n},g),Array.prototype.sort.call(y,function(t,e){return t-e}),o.add(e.Fragment.ofArray(n,y[0],y))}return o.getSeq()}}function x(t,n){var r=M.toQuery(t);return function(t){for(var i=r(t),o=new e.HashFragmentSeqBuilder(t),s=0,a=i.fragments;s<a.length;s++)for(var u=a[s],c=n(u),h=0,f=c.fragments;h<f.length;h++){var l=f[h];o.add(l)}return o.getSeq()}}var C=function(){function t(t,e){this.columns=[];for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];void 0!==t[i]&&e[i]&&this.columns.push({value:t[i],array:e[i]})}}return t.prototype.isSatisfied=function(t){for(var e=0,n=this.columns;e<n.length;e++){var r=n[e];if(r.value!==r.array[t])return!1}return!0},t}();n.compileEverything=r,n.compileAtoms=i,n.compileAtomIndices=o,n.compileFromIndices=s,n.compileAtomRanges=a,n.compileSequence=u,n.compileHetGroups=c,n.compileNonHetPolymer=h,n.compileAtomsInBox=f,n.compileInside=l,n.compileIntersectWith=p,n.compileFilter=m,n.compileComplement=v,n.compileOr=y,n.compileUnion=g,n.compilePolymerNames=b,n.compileAmbientResidues=_,n.compileWholeResidues=w,n.compileFlatten=x}(N=e.Compiler||(e.Compiler={}))}(n=e.Query||(e.Query={}))}(e=t.Structure||(t.Structure={}))}(e=t.Core||(t.Core={}))}(s||(s={}));var s;return function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n;!function(n){function r(t){return function(e){return function(n,r){return t(e(n,r))}}}function i(t){return function(e,n){return function(r,i){return t(e(r,i),n(r,i))}}}function o(t){return function(e,n){return function(r,i){return t(e(r,i),n(r,i))}}}function s(t,e,n){return function(r,i){var o=t(r,i);return o>=e&&o<=n}}function a(t){return function(){return t}}function u(t,e,n){return function(r,i){var o=r.structure;return n(e(o))[t(o.data.atoms)[i]]}}function c(t){return e.Builder.build(function(){return function(n){for(var r=[],i=0,o=n.structure.data.atoms.count;i<o;i++)n.hasAtom(i)&&t(n,i)&&(r[r.length]=i);return r.length?new e.FragmentSeq(n,[e.Fragment.ofArray(n,r[0],new Int32Array(r))]):e.FragmentSeq.empty(n)}})}n.not=r(function(t){return!t}),n.and=i(function(t,e){return t&&e}),n.or=i(function(t,e){return t||e});var h=t.Utils.FastSet.ofArray(["N","CA","C","O","P","OP1","OP2","O3'","O5'","C3'","C5'","C4"]);n.backbone=function(t,e){return"polymer"===n.entityType(t,e)&&h.has(n.atomName(t,e))},n.sidechain=function(t,e){return"polymer"===n.entityType(t,e)&&!h.has(n.atomName(t,e))},n.equal=o(function(t,e){return t===e}),n.notEqual=o(function(t,e){return t!==e}),n.greater=o(function(t,e){return t>e}),n.lesser=o(function(t,e){return t<e}),n.greaterEqual=o(function(t,e){return t>=e}),n.lesserEqual=o(function(t,e){return t<=e}),n.inRange=s,n.value=a,n.residueSeqNumber=u(function(t){return t.residueIndex},function(t){return t.data.residues},function(t){return t.seqNumber}),n.residueName=u(function(t){return t.residueIndex},function(t){return t.data.residues},function(t){return t.name}),n.elementSymbol=u(function(t){return t.indices},function(t){return t.data.atoms},function(t){return t.elementSymbol}),n.atomName=u(function(t){return t.indices},function(t){return t.data.atoms},function(t){return t.name}),n.entityType=u(function(t){return t.entityIndex},function(t){return t.data.entities},function(t){return t.type}),n.query=c}(n=e.Algebraic||(e.Algebraic={}))}(n=e.Query||(e.Query={}))}(e=t.Structure||(t.Structure={}))}(e=t.Core||(t.Core={}))}(s||(s={})),s.Core};if("object"==typeof module&&"object"==typeof module.exports)module.exports=__LiteMol_Core();else if("function"==typeof define&&define.amd)define(["require"],function(t){return __LiteMol_Core()});else{var __target=window?window:this;__target.LiteMol||(__target.LiteMol={}),__target.LiteMol.Core=__LiteMol_Core()}